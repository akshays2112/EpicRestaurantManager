<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Epic Restaurant Manager</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-3.1.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout-validation/2.0.3/knockout.validation.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sammy.js/0.7.6/sammy.min.js"></script>
    <script>
        $(document).ready(function () {
            var UILoginUserID, UILoginPassword, UILoginPasswordUnencoded, UIUserIsRoot, UIUserSites, UIControllerActionPermissions;

            function toggleSPAPage(SPAPageName, targetElementIDName) {
                ko.cleanNode(document.getElementById(targetElementIDName));
                $('#' + targetElementIDName).html($('#' + SPAPageName).html());
                eval(SPAPageName + '(' + UILoginUserID + ',\'' + UILoginPassword + '\');');
            }

            function selfIsSiteAdmin(siteID) {
                for (var i = 0; i < UIUserSites.length; i++) {
                    if (UIUserSites[i].SiteID == siteID && UIUserSites[i].IsSiteAdmin) {
                        return true
                    }
                }
                return false;
            }

            function getSiteName(siteID) {
                for (var i = 0; i < UIUserSites.length; i++) {
                    if (UIUserSites[i].SiteID == siteID) {
                        return UIUserSites[i].SiteName;
                    }
                }
                return '';
            }

            function isSiteAdminOnAnySite() {
                for (var i = 0; i < UIUserSites.length; i++) {
                    if (UIUserSites[i].IsSiteAdmin) {
                        return true
                    }
                }
                return false;
            }

            function checkControllerActionPermission(controllerActionName) {
                var found = false;
                for (var i = 0; i < UIControllerActionPermissions.length; i++) {
                    if (UIControllerActionPermissions[i].ControllerActioName = controllerActionName) {
                        found = true;
                        if (!UIControllerActionPermissions[i].Allow) {
                            return false;
                        }
                        break;
                    }
                }
                if (!found) {
                    return false;
                } else {
                    return true;
                }
            }

            function ProductTypeCategory(item) {
                var self = this;
                if (item) {
                    self.ptcID = ko.observable(item.ID);
                    self.ptcName = ko.observable(item.Name).extend({ required: true });
                    self.ptcDescription = ko.observable(item.Description);
                    self.ptcEntryByUserID = ko.observable(item.EntryByUserID);
                    self.ptcTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.ptcSiteID = ko.observable(item.SiteID);
                    self.ptcCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutProductTypeCategory')) ? true : false);
                    self.ptcCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteProductTypeCategory')) ? true : false);
                } else {
                    self.ptcID = ko.observable();
                    self.ptcName = ko.observable().extend({ required: true });
                    self.ptcDescription = ko.observable();
                    self.ptcEntryByUserID = ko.observable(UILoginUserID);
                    var today = new Date();
                    self.ptcTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.ptcSiteID = ko.observable();
                    self.ptcCheckIfEditable = ko.observable(true);
                    self.ptcCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function ProductMeasurementType(item) {
                var self = this;
                if (item) {
                    self.pmtID = ko.observable(item.ID);
                    self.pmtName = ko.observable(item.Name).extend({ required: true });
                    self.pmtDescription = ko.observable(item.Description);
                    self.pmtEntryByUserID = ko.observable(item.EntryByUserID);
                    self.pmtTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.pmtSiteID = ko.observable(item.SiteID);
                    self.pmtCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutProductMeasurementType')) ? true : false);
                    self.pmtCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteProductMeasurementType')) ? true : false);
                } else {
                    self.pmtID = ko.observable();
                    self.pmtName = ko.observable().extend({ required: true });
                    self.pmtDescription = ko.observable();
                    self.pmtEntryByUserID = ko.observable(UILoginUserID);
                    self.pmtSiteID = ko.observable();
                    var today = new Date();
                    self.pmtTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.pmtCheckIfEditable = ko.observable(true);
                    self.pmtCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function ProductType(item) {
                var self = this;
                if (item) {
                    self.ptID = ko.observable(item.ID);
                    self.ptName = ko.observable(item.Name).extend({ required: true });
                    self.ptProductTypeCategoryID = ko.observable(item.ProductTypeCategoryID).extend({ required: true });
                    self.ptProductMeasurementTypeID = ko.observable(item.ProductMeasurementTypeID).extend({ required: true });
                    self.ptImage = ko.observable(item.Image).extend({ required: true });
                    self.ptEntryByUserID = ko.observable(item.EntryByUserID);
                    self.ptTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.ptSiteID = ko.observable(item.SiteID);
                    self.ptCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutProductType')) ? true : false);
                    self.ptCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteProductType')) ? true : false);
                } else {
                    self.ptID = ko.observable();
                    self.ptName = ko.observable().extend({ required: true });
                    self.ptProductTypeCategoryID = ko.observable().extend({ required: true });
                    self.ptProductMeasurementTypeID = ko.observable().extend({ required: true });
                    self.ptImage = ko.observable().extend({ required: true });
                    self.ptEntryByUserID = ko.observable(UILoginUserID);
                    self.ptSiteID = ko.observable();
                    var today = new Date();
                    self.ptTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.ptCheckIfEditable = ko.observable(true);
                    self.ptCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
                self.ptImageFileUpload = function (data, e) {
                    var file = e.target.files[0];
                    var reader = new FileReader();
                    reader.onloadend = function (onloadend_e) {
                        var result = reader.result;
                        self.ptImage(result);
                    };
                    if (file) {
                        reader.readAsDataURL(file);
                    }
                };
            }

            function Vendor(item) {
                var self = this;
                if (item) {
                    self.vID = ko.observable(item.ID);
                    self.vName = ko.observable(item.Name).extend({ required: true });
                    self.vAddress = ko.observable(item.Address);
                    self.vCity = ko.observable(item.City);
                    self.vState = ko.observable(item.State);
                    self.vCountry = ko.observable(item.Country);
                    self.vZipCode = ko.observable(item.ZipCode);
                    self.vEntryByUserID = ko.observable(item.EntryByUserID);
                    self.vTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.vSiteID = ko.observable(item.SiteID);
                    self.vCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutVendor')) ? true : false);
                    self.vCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteVendor')) ? true : false);
                } else {
                    self.vID = ko.observable();
                    self.vName = ko.observable().extend({ required: true });
                    self.vAddress = ko.observable();
                    self.vCity = ko.observable();
                    self.vState = ko.observable();
                    self.vCountry = ko.observable();
                    self.vZipCode = ko.observable();
                    self.vEntryByUserID = ko.observable(UILoginUserID);
                    self.vSiteID = ko.observable();
                    var today = new Date();
                    self.vTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.vCheckIfEditable = ko.observable(true);
                    self.vCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function VendorContactDetail(item) {
                var self = this;
                if (item) {
                    self.vcdID = ko.observable(item.ID);
                    self.vcdName = ko.observable(item.Name).extend({ required: true });
                    self.vcdPhoneNumber = ko.observable(item.PhoneNumber).extend({ required: true });
                    self.vcdVendorID = ko.observable(item.VendorID).extend({ required: true });
                    self.vcdActive = ko.observable(item.Active);
                    self.vcdEntryByUserID = ko.observable(item.EntryByUserID);
                    self.vcdTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.vcdSiteID = ko.observable(item.SiteID);
                    self.vcdCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutVendorContactDetail')) ? true : false);
                    self.vcdCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteVendorContactDetail')) ? true : false);
                } else {
                    self.vcdID = ko.observable();
                    self.vcdName = ko.observable().extend({ required: true });
                    self.vcdPhoneNumber = ko.observable().extend({ required: true });
                    self.vcdVendorID = ko.observable().extend({ required: true });
                    self.vcdActive = ko.observable(true);
                    self.vcdEntryByUserID = ko.observable(UILoginUserID);
                    var today = new Date();
                    self.vcdTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.vcdSiteID = ko.observable();
                    self.vcdCheckIfEditable = ko.observable(true);
                    self.vcdCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function VendorProductType(item) {
                var self = this;
                if (item) {
                    self.vptID = ko.observable(item.ID);
                    self.vptVendorID = ko.observable(item.VendorID).extend({ required: true });
                    self.vptProductTypeID = ko.observable(item.ProductTypeID).extend({ required: true });
                    self.vptDescription = ko.observable(item.Description);
                    self.vptEntryByUserID = ko.observable(item.EntryByUserID);
                    self.vptTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.vptSiteID = ko.observable(item.SiteID);
                    self.vptCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutVendorProductType')) ? true : false);
                    self.vptCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteVendorProductType')) ? true : false);
                } else {
                    self.vptID = ko.observable();
                    self.vptVendorID = ko.observable().extend({ required: true });
                    self.vptProductTypeID = ko.observable().extend({ required: true });
                    self.vptDescription = ko.observable();
                    self.vptEntryByUserID = ko.observable(UILoginUserID);
                    var today = new Date();
                    self.vptTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.vptSiteID = ko.observable();
                    self.vptCheckIfEditable = ko.observable(true);
                    self.vptCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function VendorProductTypePrice(item) {
                var self = this;
                if (item) {
                    self.vptpID = ko.observable(item.ID);
                    self.vptpVendorProductTypeID = ko.observable(item.VendorProductTypeID).extend({ required: true });
                    self.vptpPricePerMeasurementType = ko.observable(item.PricePerMeasurementType).extend({ required: true });
                    self.vptpEntryByUserID = ko.observable(item.EntryByUserID);
                    self.vptpContractStartDate = ko.observable(item.ContractStartDate.split('T')[0]);
                    self.vptpContractEndDate = ko.observable(item.ContractEndDate.split('T')[0]);
                    self.vptpTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.vptpSiteID = ko.observable(item.SiteID);
                    self.vptpCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutVendorProductTypePrice')) ? true : false);
                    self.vptpCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteVendorProductTypePrice')) ? true : false);
                } else {
                    self.vptpID = ko.observable();
                    self.vptpVendorProductTypeID = ko.observable().extend({ required: true });
                    self.vptpPricePerMeasurementType = ko.observable();
                    var today = new Date();
                    self.vptpEntryByUserID = ko.observable(UILoginUserID);
                    self.vptpContractStartDate = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) : today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()));
                    self.vptpContractEndDate = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) : today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()));
                    self.vptpTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.vptpSiteID = ko.observable();
                    self.vptpCheckIfEditable = ko.observable(true);
                    self.vptpCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function PurchaseOrder(item) {
                var self = this;
                if (item) {
                    self.poID = ko.observable(item.ID);
                    self.poVendorProductTypeID = ko.observable(item.VendorProductTypeID).extend({ required: true });
                    self.poQuantity = ko.observable(item.Quantity).extend({ required: true });
                    self.poOrderPlacedOnDate = ko.observable(item.OrderPlacedOnDate.split('T')[0]);
                    self.poExpectedDeliveryDate = ko.observable(item.ExpectedDeliveryDate.split('T')[0]);
                    self.poComments = ko.observable(item.Comments);
                    self.poEntryByUserID = ko.observable(item.EntryByUserID);
                    self.poTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.poSiteID = ko.observable(item.SiteID);
                    self.poCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutPurchaseOrder')) ? true : false);
                    self.poCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeletePurchaseOrder')) ? true : false);
                } else {
                    self.poID = ko.observable();
                    self.poVendorProductTypeID = ko.observable().extend({ required: true });
                    self.poQuantity = ko.observable().extend({ required: true });
                    var today = new Date();
                    self.poOrderPlacedOnDate = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) : today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()));
                    self.poExpectedDeliveryDate = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) : today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()));
                    self.poComments = ko.observable();
                    self.poEntryByUserID = ko.observable(UILoginUserID);
                    self.poTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.poSiteID = ko.observable();
                    self.poCheckIfEditable = ko.observable(true);
                    self.poCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function Inventory(item) {
                var self = this;
                if (item) {
                    self.iID = ko.observable(item.ID);
                    self.iProductTypeID = ko.observable(item.ProductTypeID).extend({ required: true });
                    self.iQuantity = ko.observable(item.Quantity).extend({ required: true });
                    self.iEntryByUserID = ko.observable(item.EntryByUserID);
                    self.iTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.iSiteID = ko.observable(item.SiteID);
                    self.iCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutInventory')) ? true : false);
                    self.iCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteInventory')) ? true : false);
                } else {
                    self.iID = ko.observable();
                    self.iProductTypeID = ko.observable().extend({ required: true });
                    self.iQuantity = ko.observable().extend({ required: true });
                    self.iEntryByUserID = ko.observable(UILoginUserID);
                    self.iSiteID = ko.observable();
                    var today = new Date();
                    self.iTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.iCheckIfEditable = ko.observable(true);
                    self.iCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function Receiving(item) {
                var self = this;
                if (item) {
                    self.rID = ko.observable(item.ID);
                    self.rVendorProductTypeID = ko.observable(item.VendorProductTypeID).extend({ required: true });
                    self.rQuantity = ko.observable(item.Quantity).extend({ required: true });
                    self.rPricePaid = ko.observable(item.PricePaid).extend({ required: true });
                    self.rReceivedDate = ko.observable(item.ReceivedDate.split('T')[0]).extend({ required: true });;
                    self.rComments = ko.observable(item.Comments);
                    self.rEntryByUserID = ko.observable(item.EntryByUserID);
                    self.rTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.rSiteID = ko.observable(item.SiteID);
                    self.rCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutReceived')) ? true : false);
                    self.rCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteReceived')) ? true : false);
                } else {
                    self.rID = ko.observable();
                    self.rVendorProductTypeID = ko.observable().extend({ required: true });
                    self.rQuantity = ko.observable().extend({ required: true });
                    self.rPricePaid = ko.observable().extend({ required: true });
                    var today = new Date();
                    self.rReceivedDate = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) : today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()));
                    self.rComments = ko.observable();
                    self.rEntryByUserID = ko.observable(UILoginUserID);
                    self.rTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.rSiteID = ko.observable();
                    self.rCheckIfEditable = ko.observable(true);
                    self.rCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function InventoryLocation(item) {
                var self = this;
                if (item) {
                    self.ilID = ko.observable(item.ID);
                    self.ilProductTypeID = ko.observable(item.ProductTypeID).extend({ required: true });
                    self.ilLocationDescription = ko.observable(item.LocationDescription).extend({ required: true });
                    self.ilEntryByUserID = ko.observable(item.EntryByUserID);
                    self.ilTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.ilSiteID = ko.observable(item.SiteID);
                    self.ilCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutInventoryLocation')) ? true : false);
                    self.ilCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteInventoryLocation')) ? true : false);
                } else {
                    self.ilID = ko.observable();
                    self.ilProductTypeID = ko.observable().extend({ required: true });
                    self.ilLocationDescription = ko.observable().extend({ required: true });
                    self.ilEntryByUserID = ko.observable(UILoginUserID);
                    self.ilSiteID = ko.observable();
                    var today = new Date();
                    self.ilTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.ilCheckIfEditable = ko.observable(true);
                    self.ilCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function InventoryQuota(item) {
                var self = this;
                if (item) {
                    self.iqID = ko.observable(item.ID);
                    self.iqProductTypeID = ko.observable(item.ProductTypeID).extend({ required: true });
                    self.iqMinimumStock = ko.observable(item.MinimumStock);
                    self.iqMaximumStock = ko.observable(item.MaximumStock);
                    self.iqEntryByUserID = ko.observable(item.EntryByUserID);
                    self.iqTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.iqSiteID = ko.observable(item.SiteID);
                    self.iqCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutInventoryQuota')) ? true : false);
                    self.iqCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteInventoryQuota')) ? true : false);
                } else {
                    self.iqID = ko.observable();
                    self.iqProductTypeID = ko.observable().extend({ required: true });
                    self.iqMinimumStock = ko.observable();
                    self.iqMaximumStock = ko.observable();
                    self.iqEntryByUserID = ko.observable(UILoginUserID);
                    self.iqSiteID = ko.observable();
                    var today = new Date();
                    self.iqTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.iqCheckIfEditable = ko.observable(true);
                    self.iqCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function MenuCategory(item) {
                var self = this;
                if (item) {
                    self.mcID = ko.observable(item.ID);
                    self.mcName = ko.observable(item.Name).extend({ required: true });
                    self.mcEntryByUserID = ko.observable(item.EntryByUserID);
                    self.mcTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.mcSiteID = ko.observable(item.SiteID);
                    self.mcCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutMenuCategory')) ? true : false);
                    self.mcCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteMenuCategory')) ? true : false);
                } else {
                    self.mcID = ko.observable();
                    self.mcName = ko.observable().extend({ required: true });
                    self.mcEntryByUserID = ko.observable(UILoginUserID);
                    var today = new Date();
                    self.mcTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.mcSiteID = ko.observable();
                    self.mcCheckIfEditable = ko.observable(true);
                    self.mcCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function MenuItem(item) {
                var self = this;
                if (item) {
                    self.miID = ko.observable(item.ID);
                    self.miMenuCategoryID = ko.observable(item.MenuCategoryID).extend({ required: true });
                    self.miName = ko.observable(item.Name);
                    self.miDescription = ko.observable(item.Description);
                    self.miImage = ko.observable(item.Image);
                    self.miEntryByUserID = ko.observable(item.EntryByUserID);
                    self.miTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.miSiteID = ko.observable(item.SiteID);
                    self.miCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutMenuItem')) ? true : false);
                    self.miCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteMenuItem')) ? true : false);
                } else {
                    self.miID = ko.observable();
                    self.miMenuCategoryID = ko.observable().extend({ required: true });
                    self.miName = ko.observable();
                    self.miDescription = ko.observable();
                    self.miImage = ko.observable('');
                    self.miEntryByUserID = ko.observable(UILoginUserID);
                    self.miSiteID = ko.observable();
                    var today = new Date();
                    self.miTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.miCheckIfEditable = ko.observable(true);
                    self.miCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
                self.miImageFileUpload = function (data, e) {
                    var file = e.target.files[0];
                    var reader = new FileReader();
                    reader.onloadend = function (onloadend_e) {
                        var result = reader.result;
                        self.miImage(result);
                    };
                    if (file) {
                        reader.readAsDataURL(file);
                    }
                };
            }

            function MenuItemIngredient(item) {
                var self = this;
                if (item) {
                    self.miiID = ko.observable(item.ID);
                    self.miiMenuItemID = ko.observable(item.MenuItemID).extend({ required: true });
                    self.miiProductTypeID = ko.observable(item.ProductTypeID).extend({ required: true });
                    self.miiQuantity = ko.observable(item.Quantity).extend({ required: true });
                    self.miiEntryByUserID = ko.observable(item.EntryByUserID);
                    self.miiTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.miiSiteID = ko.observable(item.SiteID);
                    self.miiCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutMenuItemIngredient')) ? true : false);
                    self.miiCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteMenuItemIngredient')) ? true : false);
                } else {
                    self.miiID = ko.observable();
                    self.miiMenuItemID = ko.observable().extend({ required: true });
                    self.miiProductTypeID = ko.observable().extend({ required: true });
                    self.miiQuantity = ko.observable().extend({ required: true });
                    self.miiEntryByUserID = ko.observable(UILoginUserID);
                    self.miiSiteID = ko.observable();
                    var today = new Date();
                    self.miiTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.miiCheckIfEditable = ko.observable(true);
                    self.miiCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function MenuItemPrice(item) {
                var self = this;
                if (item) {
                    self.mipID = ko.observable(item.ID);
                    self.mipMenuItemID = ko.observable(item.MenuItemID).extend({ required: true });
                    self.mipPrice = ko.observable(item.Price).extend({ required: true });
                    self.mipStartDate = ko.observable(item.StartDate.split('T')[0]).extend({ required: true });
                    self.mipEndDate = ko.observable(item.EndDate.split('T')[0]).extend({ required: true });
                    self.mipEntryByUserID = ko.observable(item.EntryByUserID);
                    self.mipTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.mipSiteID = ko.observable(item.SiteID);
                    self.mipCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutMenuItemPrice')) ? true : false);
                    self.mipCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteMenuItemPrice')) ? true : false);
                } else {
                    self.mipID = ko.observable();
                    self.mipMenuItemID = ko.observable().extend({ required: true });
                    self.mipPrice = ko.observable().extend({ required: true });
                    var today = new Date();
                    self.mipStartDate = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate())).extend({ required: true });
                    self.mipEndDate = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate())).extend({ required: true });
                    self.mipEntryByUserID = ko.observable(UILoginUserID);
                    self.mipSiteID = ko.observable();
                    self.mipTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.mipCheckIfEditable = ko.observable(true);
                    self.mipCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function Requisition(item) {
                var self = this;
                if (item) {
                    self.reqID = ko.observable(item.ID);
                    self.reqProductTypeID = ko.observable(item.ProductTypeID).extend({ required: true });
                    self.reqQuantity = ko.observable(item.Quantity).extend({ required: true });
                    self.reqAuthorized = ko.observable(item.Authorized);
                    self.reqEntryByUserID = ko.observable(item.EntryByUserID);
                    self.reqTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.reqSiteID = ko.observable(item.SiteID);
                    self.reqCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutRequisition')) ? true : false);
                    self.reqCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteRequisition')) ? true : false);
                } else {
                    self.reqID = ko.observable();
                    self.reqProductTypeID = ko.observable().extend({ required: true });
                    self.reqQuantity = ko.observable().extend({ required: true });
                    var today = new Date();
                    self.reqAuthorized = ko.observable(false);
                    self.reqEntryByUserID = ko.observable(UILoginUserID);
                    self.reqTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.reqSiteID = ko.observable();
                    self.reqCheckIfEditable = ko.observable(true);
                    self.reqCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function SettlementType(item) {
                var self = this;
                if (item) {
                    self.stID = ko.observable(item.ID);
                    self.stDescription = ko.observable(item.Description).extend({ required: true });
                    self.stEntryByUserID = ko.observable(item.EntryByUserID);
                    self.stTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.stSiteID = ko.observable(item.SiteID);
                    self.stCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutSettlementType')) ? true : false);
                    self.stCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteSettlementType')) ? true : false);
                } else {
                    self.stID = ko.observable();
                    self.stDescription = ko.observable().extend({ required: true });
                    var today = new Date();
                    self.stEntryByUserID = ko.observable(UILoginUserID);
                    self.stTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.stSiteID = ko.observable();
                    self.stCheckIfEditable = ko.observable(true);
                    self.stCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
            }

            function User(item) {
                var self = this;
                if (item) {
                    self.userID = ko.observable(item.ID);
                    self.userUserName = ko.observable(item.UserName).extend({ required: true });
                    self.userName = ko.observable(item.Name).extend({ required: true });
                    self.userEmailAddress = ko.observable(item.EmailAddress).extend({ required: true });
                    self.userEmailIsVerified = ko.observable(item.EmailIsVerified);
                    self.userPhoneNumber = ko.observable(item.PhoneNumber).extend({ required: true });
                    self.userPhoneNumberIsVerified = ko.observable(item.PhoneNumberIsVerified);
                    self.userAddress = ko.observable(item.Address);
                    self.userCity = ko.observable(item.City);
                    self.userState = ko.observable(item.State);
                    self.userCountry = ko.observable(item.Country);
                    self.userZipCode = ko.observable(item.ZipCode);
                    self.userPhoto = ko.observable(item.Photo);
                    self.userJobTitle = ko.observable(item.JobTitle).extend({ required: true });
                    self.userPassword = ko.observable(item.Password).extend({ required: true });
                    self.userEntryByUserID = ko.observable(item.EntryByUserID);
                    self.userTransactionDateTime = ko.observable(item.TransactionDateTime);
                    self.userSiteID = ko.observable(item.SiteID);
                    self.userCheckIfEditable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('PutUser')) ? true : false);
                    self.userCheckIfDeletable = ko.observable(UIUserIsRoot || selfIsSiteAdmin(item.SiteID) || (item.EntryByUserID == UILoginUserID && checkControllerActionPermission('DeleteUser')) ? true : false);
                } else {
                    self.userID = ko.observable();
                    self.userUserName = ko.observable().extend({ required: true });
                    self.userName = ko.observable().extend({ required: true });
                    self.userEmailAddress = ko.observable().extend({ required: true });
                    self.userEmailIsVerified = ko.observable(false);
                    self.userPhoneNumber = ko.observable().extend({ required: true });
                    self.userPhoneNumberIsVerified = ko.observable(false);
                    self.userAddress = ko.observable();
                    self.userCity = ko.observable();
                    self.userState = ko.observable();
                    self.userCountry = ko.observable();
                    self.userZipCode = ko.observable();
                    self.userPhoto = ko.observable('');
                    self.userJobTitle = ko.observable().extend({ required: true });
                    self.userPassword = ko.observable().extend({ required: true });
                    self.userCreatedByUserID = ko.obeservable(UILoginUserID);
                    var today = new Date();
                    self.userCreatedOn = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds()));
                    self.userEntryByUserID = ko.observable(UILoginUserID);
                    self.userTransactionDateTime = ko.observable(today.getFullYear() + '-' + (today.getMonth() + 1 < 10 ? '0' + (today.getMonth() + 1) :
                        today.getMonth() + 1) + '-' + (today.getDate() < 10 ? '0' + today.getDate() : today.getDate()) + 'T' + (today.getHours() < 10 ?
                        '0' + today.getHours() : today.getHours()) + ':' + (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes()) +
                        ':' + (today.getSeconds() < 10 ? '0' + today.getSeconds() : today.getSeconds())).extend({ required: true });
                    self.userSiteID = ko.observable();
                    self.userCheckIfEditable = ko.observable(true);
                    self.userCheckIfDeletable = ko.observable(true);
                }
                self.errors = ko.validation.group(self);
                self.userImageFileUpload = function (data, e) {
                    var file = e.target.files[0];
                    var reader = new FileReader();
                    reader.onloadend = function (onloadend_e) {
                        var result = reader.result;
                        self.userPhoto(result);
                    };
                    if (file) {
                        reader.readAsDataURL(file);
                    }
                };
            }

            function HomePage() {
            }

            function ProductTypeCategoriesPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function ProductTypeCategoriesViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.ptcProductTypeCategories = ko.observableArray();
                    self.ptcUserSites = ko.observableArray(UIUserSites);
                    self.ptcPageSize = ko.observable(5);
                    self.ptcPageIndex = ko.observable(0);
                    self.ptcSelectedItem = ko.observable();
                    self.ptcOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.ptcUserSites().length; i++) {
                            if (self.ptcUserSites()[i].SiteID == siteID()) {
                                return self.ptcUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function()
                    {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostProductTypeCategory'))) {
                            return true;
                        }
                        return false;
                    }
                    self.ptcCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.ptcPagedList = ko.dependentObservable(function () {
                        var size = self.ptcPageSize();
                        var start = self.ptcPageIndex() * size;
                        return self.ptcProductTypeCategories.slice(start, start + size);
                    });
                    self.ptcMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.ptcProductTypeCategories().length / self.ptcPageSize()) - 1;
                    });
                    self.ptcAllPages = ko.dependentObservable(function () {
                        var ptcPages = [];
                        for (i = 0; i <= self.ptcMaxPageIndex() ; i++) {
                            ptcPages.push({ ptcPageNumber: (i + 1) });
                        }
                        return ptcPages;
                    });
                    self.ptcEdit = function (item) {
                        item.ptcCurrentTemplate = 'ptcEditTemplate';
                        self.ptcOldItem.Name = item.ptcName();
                        self.ptcOldItem.Description = item.ptcDescription();
                        self.ptcOldItem.SiteID = item.ptcSiteID();
                        self.ptcSelectedItem(item);
                    };
                    self.ptcCancelEdit = function (item) {
                        self.ptcSelectedItem().ptcCurrentTemplate = 'ptcShowTemplate';
                        self.ptcSelectedItem().ptcName(self.ptcOldItem.Name);
                        self.ptcSelectedItem().ptcDescription(self.ptcOldItem.Description);
                        self.ptcSelectedItem().ptcSiteID(self.ptcOldItem.SiteID);
                        self.ptcOldItem = {};
                        self.ptcSelectedItem(null);
                    };
                    self.ptcCancelAdd = function (item) {
                        self.ptcSelectedItem().ptcCurrentTemplate = 'ptcShowTemplate';
                        self.ptcSelectedItem(null);
                        self.ptcProductTypeCategories.remove(item);
                    };
                    self.ptcAdd = function () {
                        var newItem = new ProductTypeCategory();
                        newItem.ptcID(9999);
                        newItem.ptcCurrentTemplate = 'ptcAddTemplate';
                        self.ptcProductTypeCategories.push(newItem);
                        self.ptcSelectedItem(newItem);
                        self.ptcMoveToPage(self.ptcMaxPageIndex());
                    };
                    self.ptcRemove = function (item) {
                        if (item.ptcID()) {
                            if (confirm('Are you sure you wish to delete this product type category?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/ProductTypeCategories/' + item.ptcID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.ptcSiteID(), success:
                                        function (result) {
                                            self.ptcProductTypeCategories.remove(item);
                                            if (self.ptcPageIndex() > self.ptcMaxPageIndex()) {
                                                self.ptcMoveToPage(self.ptcMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.ptcProductTypeCategories.remove(item);
                            if (self.ptcPageIndex() > self.ptcMaxPageIndex()) {
                                self.ptcMoveToPage(self.ptcMaxPageIndex());
                            }
                        }
                    };
                    self.ptcSaveAdd = function () {
                        if (self.ptcSelectedItem().errors().length === 0) {
                            var item = self.ptcSelectedItem();
                            var today = new Date();
                            var dataItem = {
                                ID: item.ptcID(), Name: item.ptcName(), Description: item.ptcDescription(), UILoginUserID: UILoginUserID,
                                UILoginPassword: UILoginPasswordUnencoded, SiteID: item.ptcSiteID(), EntryByUserID: UILoginUserID,
                                TransactionDateTime: item.ptcTransactionDateTime()
                            };
                            $.post('api/ProductTypeCategories', dataItem, function (result) {
                                item.ptcID(result.ID);
                                item.ptcCurrentTemplate = null;
                                self.ptcSelectedItem(null);
                            });
                        } else {
                            self.ptcSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.ptcSaveEdit = function () {
                        if (self.ptcSelectedItem().errors().length === 0) {
                            var item = self.ptcSelectedItem();
                            var today = new Date();
                            var dataItem = {
                                ID: item.ptcID(), Name: item.ptcName(), Description: item.ptcDescription(), UILoginUserID: UILoginUserID,
                                UILoginPassword: UILoginPasswordUnencoded, SiteID: item.ptcSiteID(), EntryByUserID: UILoginUserID,
                                TransactionDateTime: item.ptcTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/ProductTypeCategories/' + item.ptcID(), data: dataItem,
                                contentType: "application/x-www-form-urlencoded;charset=UTF-8", success:
                                    function (result) {
                                        item.ptcCurrentTemplate = 'ptcShowTemplate';
                                        self.ptcSelectedItem(null);
                                    }
                            });
                        } else {
                            self.ptcSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.ptcTemplateToUse = function (item) {
                        return self.ptcSelectedItem() === item && item.ptcCurrentTemplate === 'ptcEditTemplate' ? 'ptcEditTemplate' :
                            self.ptcSelectedItem() === item && item.ptcCurrentTemplate === 'ptcAddTemplate' ? 'ptcAddTemplate' : 'ptcShowTemplate';
                    };
                    self.ptcPreviousPage = function () {
                        if (self.ptcPageIndex() > 0) {
                            self.ptcPageIndex(self.ptcPageIndex() - 1);
                        }
                    };
                    self.ptcNextPage = function () {
                        if (self.ptcPageIndex() < self.ptcMaxPageIndex()) {
                            self.ptcPageIndex(self.ptcPageIndex() + 1);
                        }
                    };
                    self.ptcMoveToPage = function (index) {
                        self.ptcPageIndex(index);
                    };
                    if (UILoginUserID && UILoginPassword) {
                        $.get('api/ProductTypeCategories' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.ptcProductTypeCategories($.map(data, function (item) {
                                    return new ProductTypeCategory(item);
                                }));
                                self.doneLoading = true;
                                self.ptcCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }).fail(function() {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var productTypeCategoriesViewModel = new ProductTypeCategoriesViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(productTypeCategoriesViewModel, document.getElementById('main'));
                }
            }

            function ProductMeasurementTypesPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function ProductMeasurementTypesViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.pmtProductMeasurementTypes = ko.observableArray();
                    self.pmtUserSites = ko.observableArray(UIUserSites);
                    self.pmtPageSize = ko.observable(5);
                    self.pmtPageIndex = ko.observable(0);
                    self.pmtSelectedItem = ko.observable();
                    self.pmtOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.pmtUserSites().length; i++) {
                            if (self.pmtUserSites()[i].SiteID == siteID()) {
                                return self.pmtUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostProductMeasurementType'))) {
                            return true;
                        }
                        return false;
                    }
                    self.pmtCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.pmtPagedList = ko.dependentObservable(function () {
                        var size = self.pmtPageSize();
                        var start = self.pmtPageIndex() * size;
                        return self.pmtProductMeasurementTypes.slice(start, start + size);
                    });
                    self.pmtMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.pmtProductMeasurementTypes().length / self.pmtPageSize()) - 1;
                    });
                    self.pmtAllPages = ko.dependentObservable(function () {
                        var pmtPages = [];
                        for (i = 0; i <= self.pmtMaxPageIndex() ; i++) {
                            pmtPages.push({ pmtPageNumber: (i + 1) });
                        }
                        return pmtPages;
                    });
                    self.pmtEdit = function (item) {
                        item.pmtCurrentTemplate = 'pmtEditTemplate';
                        self.pmtOldItem.Name = item.pmtName();
                        self.pmtOldItem.Description = item.pmtDescription();
                        self.pmtOldItem.SiteID = item.pmtSiteID();
                        self.pmtSelectedItem(item);
                    };
                    self.pmtCancelEdit = function (item) {
                        self.pmtSelectedItem().pmtCurrentTemplate = 'pmtShowTemplate';
                        self.pmtSelectedItem().pmtName(self.pmtOldItem.Name);
                        self.pmtSelectedItem().pmtDescription(self.pmtOldItem.Description);
                        self.pmtSelectedItem().pmtSiteID(self.pmtOldItem.SiteID);
                        self.pmtOldItem = {};
                        self.pmtSelectedItem(null);
                    };
                    self.pmtCancelAdd = function (item) {
                        self.pmtSelectedItem().pmtCurrentTemplate = 'pmtShowTemplate';
                        self.pmtSelectedItem(null);
                        self.pmtProductMeasurementTypes.remove(item);
                    };
                    self.pmtAdd = function () {
                        var newItem = new ProductMeasurementType();
                        newItem.pmtID(9999);
                        newItem.pmtCurrentTemplate = 'pmtAddTemplate';
                        self.pmtProductMeasurementTypes.push(newItem);
                        self.pmtSelectedItem(newItem);
                        self.pmtMoveToPage(self.pmtMaxPageIndex());
                    };
                    self.pmtRemove = function (item) {
                        if (item.pmtID()) {
                            if (confirm('Are you sure you wish to delete this product measurement type?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/ProductMeasurementTypes/' + item.pmtID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.pmtSiteID(), success:
                                        function (result) {
                                            self.pmtProductMeasurementTypes.remove(item);
                                            if (self.pmtPageIndex() > self.pmtMaxPageIndex()) {
                                                self.pmtMoveToPage(self.pmtMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.pmtProductMeasurementTypes.remove(item);
                            if (self.pmtPageIndex() > self.pmtMaxPageIndex()) {
                                self.pmtMoveToPage(self.pmtMaxPageIndex());
                            }
                        }
                    };
                    self.pmtSaveAdd = function () {
                        if (self.pmtSelectedItem().errors().length === 0) {
                            var item = self.pmtSelectedItem();
                            var dataItem = {
                                ID: item.pmtID(), Name: item.pmtName(), Description: item.pmtDescription(), UILoginUserID: UILoginUserID,
                                UILoginPassword: UILoginPasswordUnencoded, SiteID: item.pmtSiteID(), EntryByUserID: item.pmtEntryByUserID(),
                                TransactionDateTime: item.pmtTransactionDateTime()
                            };
                            $.post('api/ProductMeasurementTypes', dataItem, function (result) {
                                item.pmtID(result.ID);
                                item.pmtCurrentTemplate = null;
                                self.pmtSelectedItem(null);
                            });
                        } else {
                            self.pmtSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.pmtSaveEdit = function () {
                        if (self.pmtSelectedItem().errors().length === 0) {
                            var item = self.pmtSelectedItem();
                            var dataItem = {
                                ID: item.pmtID(), Name: item.pmtName(), Description: item.pmtDescription(), UILoginUserID: UILoginUserID,
                                UILoginPassword: UILoginPasswordUnencoded, SiteID: item.pmtSiteID(), EntryByUserID: item.pmtEntryByUserID(),
                                TransactionDateTime: item.pmtTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/ProductMeasurementTypes/' + item.pmtID(), data: dataItem, contentType: "application/x-www-form-urlencoded;charset=UTF-8",
                                success: function (result) {
                                    item.pmtCurrentTemplate = 'pmtShowTemplate';
                                    self.pmtSelectedItem(null);
                                }
                            });
                        } else {
                            self.pmtSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.pmtTemplateToUse = function (item) {
                        return self.pmtSelectedItem() === item && item.pmtCurrentTemplate === 'pmtEditTemplate' ? 'pmtEditTemplate' :
                            self.pmtSelectedItem() === item && item.pmtCurrentTemplate === 'pmtAddTemplate' ? 'pmtAddTemplate' : 'pmtShowTemplate';
                    };
                    self.pmtPreviousPage = function () {
                        if (self.pmtPageIndex() > 0) {
                            self.pmtPageIndex(self.pmtPageIndex() - 1);
                        }
                    };
                    self.pmtNextPage = function () {
                        if (self.pmtPageIndex() < self.pmtMaxPageIndex()) {
                            self.pmtPageIndex(self.pmtPageIndex() + 1);
                        }
                    };
                    self.pmtMoveToPage = function (index) {
                        self.pmtPageIndex(index);
                    };
                    if (UILoginUserID && UILoginPassword) {
                        $.get('api/ProductMeasurementTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.pmtProductMeasurementTypes($.map(data, function (item) {
                                    return new ProductMeasurementType(item);
                                }));
                                self.doneLoading = true;
                                self.pmtCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var productMeasurementTypesViewModel = new ProductMeasurementTypesViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(productMeasurementTypesViewModel, document.getElementById('main'));
                }
            }

            function ProductTypesPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function ProductTypesViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.ptProductTypes = ko.observableArray();
                    self.ptProductTypeCategories = ko.observableArray();
                    self.ptProductMeasurementTypes = ko.observableArray();
                    self.ptUserSites = ko.observableArray(UIUserSites);
                    self.ptPageSize = ko.observable(5);
                    self.ptPageIndex = ko.observable(0);
                    self.ptSelectedItem = ko.observable();
                    self.ptOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.ptUserSites().length; i++) {
                            if (self.ptUserSites()[i].SiteID == siteID()) {
                                return self.ptUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getProductTypeCategoryByID = function (productTypeCategoryID) {
                        for (var i = 0; i < self.ptProductTypeCategories().length; i++) {
                            if (self.ptProductTypeCategories()[i].ptcID() == productTypeCategoryID()) {
                                return self.ptProductTypeCategories()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getProductMeasurementTypeByID = function (productMeasurementTypeID) {
                        for (var i = 0; i < self.ptProductMeasurementTypes().length; i++) {
                            if (self.ptProductMeasurementTypes()[i].pmtID() == productMeasurementTypeID()) {
                                return self.ptProductMeasurementTypes()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostProductType'))) {
                            return true;
                        }
                        return false;
                    }
                    self.ptCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.ptPagedList = ko.dependentObservable(function () {
                        var size = self.ptPageSize();
                        var start = self.ptPageIndex() * size;
                        return self.ptProductTypes.slice(start, start + size);
                    });
                    self.ptMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.ptProductTypes().length / self.ptPageSize()) - 1;
                    });
                    self.ptAllPages = ko.dependentObservable(function () {
                        var ptPages = [];
                        for (i = 0; i <= self.ptMaxPageIndex() ; i++) {
                            ptPages.push({ ptPageNumber: (i + 1) });
                        }
                        return ptPages;
                    });
                    self.ptEdit = function (item) {
                        item.ptCurrentTemplate = 'ptEditTemplate';
                        self.ptOldItem.Name = item.ptName();
                        self.ptOldItem.ProductTypeCategoryID = item.ptProductTypeCategoryID();
                        self.ptOldItem.ProductMeasurementTypeID = item.ptProductMeasurementTypeID();
                        self.ptOldItem.Image = item.ptImage();
                        self.ptOldItem.SiteID = item.ptSiteID();
                        self.ptSelectedItem(item);
                    };
                    self.ptCancelEdit = function (item) {
                        self.ptSelectedItem().ptCurrentTemplate = 'ptShowTemplate';
                        self.ptSelectedItem().ptName(self.ptOldItem.Name);
                        self.ptSelectedItem().ptProductTypeCategoryID(self.ptOldItem.ProductTypeCategoryID);
                        self.ptSelectedItem().ptProductMeasurementTypeID(self.ptOldItem.ProductMeasurementTypeID);
                        self.ptSelectedItem().ptImage(self.ptOldItem.Image);
                        self.ptSelectedItem().ptSiteID(self.ptOldItem.SiteID);
                        self.ptOldItem = {};
                        self.ptSelectedItem(null);
                    };
                    self.ptCancelAdd = function (item) {
                        self.ptSelectedItem().ptCurrentTemplate = 'ptShowTemplate';
                        self.ptSelectedItem(null);
                        self.ptProductTypes.remove(item);
                    };
                    self.ptAdd = function () {
                        var newItem = new ProductType();
                        newItem.ptID(9999);
                        newItem.ptCurrentTemplate = 'ptAddTemplate';
                        self.ptProductTypes.push(newItem);
                        self.ptSelectedItem(newItem);
                        self.ptMoveToPage(self.ptMaxPageIndex());
                    };
                    self.ptRemove = function (item) {
                        if (item.ptID()) {
                            if (confirm('Are you sure you wish to delete this product type?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/ProductTypes/' + item.ptID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.ptSiteID(), success:
                                        function (result) {
                                            self.ptProductTypes.remove(item);
                                            if (self.ptPageIndex() > self.ptMaxPageIndex()) {
                                                self.ptMoveToPage(self.ptMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.ptProductTypes.remove(item);
                            if (self.ptPageIndex() > self.ptMaxPageIndex()) {
                                self.ptMoveToPage(self.ptMaxPageIndex());
                            }
                        }
                    };
                    self.ptSaveAdd = function () {
                        if (self.ptSelectedItem().errors().length === 0) {
                            var item = self.ptSelectedItem();
                            var dataItem = {
                                ID: item.ptID(), Name: item.ptName(), ProductTypeCategoryID: item.ptProductTypeCategoryID(), Image: item.ptImage(),
                                ProductMeasurementTypeID: item.ptProductMeasurementTypeID(), UILoginUserID: UILoginUserID,
                                UILoginPassword: UILoginPasswordUnencoded, SiteID: item.ptSiteID(), EntryByUserID: item.ptEntryByUserID(),
                                TransactionDateTime: item.ptTransactionDateTime()
                            };
                            $.post('api/ProductTypes', dataItem, function (result) {
                                item.ptID(result.ID);
                                item.ptCurrentTemplate = null;
                                self.ptSelectedItem(null);
                            });
                        } else {
                            self.ptSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.ptSaveEdit = function () {
                        if (self.ptSelectedItem().errors().length === 0) {
                            var item = self.ptSelectedItem();
                            var dataItem = {
                                ID: item.ptID(), Name: item.ptName(), ProductTypeCategoryID: item.ptProductTypeCategoryID(), Image: item.ptImage(),
                                ProductMeasurementTypeID: item.ptProductMeasurementTypeID(), UILoginUserID: UILoginUserID,
                                UILoginPassword: UILoginPasswordUnencoded, SiteID: item.ptSiteID(), EntryByUserID: item.ptEntryByUserID(),
                                TransactionDateTime: item.ptTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/ProductTypes/' + item.ptID(), data: dataItem, success:
                                    function (result) {
                                        item.ptCurrentTemplate = 'ptShowTemplate';
                                        self.ptSelectedItem(null);
                                    }
                            });
                        } else {
                            self.ptSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.ptTemplateToUse = function (item) {
                        return self.ptSelectedItem() === item && item.ptCurrentTemplate === 'ptEditTemplate' ? 'ptEditTemplate' :
                            self.ptSelectedItem() === item && item.ptCurrentTemplate === 'ptAddTemplate' ? 'ptAddTemplate' : 'ptShowTemplate';
                    };
                    self.ptPreviousPage = function () {
                        if (self.ptPageIndex() > 0) {
                            self.ptPageIndex(self.ptPageIndex() - 1);
                        }
                    };
                    self.ptNextPage = function () {
                        if (self.ptPageIndex() < self.ptMaxPageIndex()) {
                            self.ptPageIndex(self.ptPageIndex() + 1);
                        }
                    };
                    self.ptMoveToPage = function (index) {
                        self.ptPageIndex(index);
                    };


                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 3) {
                                self.ptProductTypes(self.lastArray);
                                self.doneLoading = true;
                                self.ptCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/ProductTypeCategories' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.ptProductTypeCategories($.map(data, function (item) {
                                    return new ProductTypeCategory(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function() {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/ProductMeasurementTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.ptProductMeasurementTypes($.map(data, function (item) {
                                    return new ProductMeasurementType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/ProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new ProductType(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var ptsProductTypesViewModel = new ProductTypesViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(ptsProductTypesViewModel, document.getElementById('main'));
                }
            }

            function VendorsPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function VendorsViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.vVendors = ko.observableArray();
                    self.vUserSites = ko.observableArray(UIUserSites);
                    self.vPageSize = ko.observable(5);
                    self.vPageIndex = ko.observable(0);
                    self.vSelectedItem = ko.observable();
                    self.vOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.vUserSites().length; i++) {
                            if (self.vUserSites()[i].SiteID == siteID()) {
                                return self.vUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostVendor'))) {
                            return true;
                        }
                        return false;
                    }
                    self.vCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.vPagedList = ko.dependentObservable(function () {
                        var size = self.vPageSize();
                        var start = self.vPageIndex() * size;
                        return self.vVendors.slice(start, start + size);
                    });
                    self.vMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.vVendors().length / self.vPageSize()) - 1;
                    });
                    self.vAllPages = ko.dependentObservable(function () {
                        var vPages = [];
                        for (i = 0; i <= self.vMaxPageIndex() ; i++) {
                            vPages.push({ vPageNumber: (i + 1) });
                        }
                        return vPages;
                    });
                    self.vEdit = function (item) {
                        item.vCurrentTemplate = 'vEditTemplate';
                        self.vOldItem.Name = item.vName();
                        self.vOldItem.Address = item.vAddress();
                        self.vOldItem.City = item.vCity();
                        self.vOldItem.State = item.vState();
                        self.vOldItem.Country = item.vCountry();
                        self.vOldItem.ZipCode = item.vZipCode();
                        self.vOldItem.SiteID = item.vSiteID();
                        self.vSelectedItem(item);
                    };
                    self.vCancelEdit = function (item) {
                        self.vSelectedItem().vCurrentTemplate = 'vShowTemplate';
                        self.vSelectedItem().vName(self.vOldItem.Name);
                        self.vSelectedItem().vAddress(self.vOldItem.Address);
                        self.vSelectedItem().vCity(self.vOldItem.City);
                        self.vSelectedItem().vState(self.vOldItem.State);
                        self.vSelectedItem().vCountry(self.vOldItem.Country);
                        self.vSelectedItem().vZipCode(self.vOldItem.ZipCode);
                        self.vSelectedItem().vSiteID(self.vOldItem.SiteID);
                        self.vOldItem = {};
                        self.vSelectedItem(null);
                    };
                    self.vCancelAdd = function (item) {
                        self.vSelectedItem().vCurrentTemplate = 'vShowTemplate';
                        self.vSelectedItem(null);
                        self.vVendors.remove(item);
                    };
                    self.vAdd = function () {
                        var newItem = new Vendor();
                        newItem.vID(9999);
                        newItem.vCurrentTemplate = 'vAddTemplate';
                        self.vVendors.push(newItem);
                        self.vSelectedItem(newItem);
                        self.vMoveToPage(self.vMaxPageIndex());
                    };
                    self.vRemove = function (item) {
                        if (item.vID()) {
                            if (confirm('Are you sure you wish to delete this vendor?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/Vendors/' + item.vID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.vSiteID(), success:
                                        function (result) {
                                            self.vVendors.remove(item);
                                            if (self.vPageIndex() > self.vMaxPageIndex()) {
                                                self.vMoveToPage(self.vMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.vVendors.remove(item);
                            if (self.vPageIndex() > self.vMaxPageIndex()) {
                                self.vMoveToPage(self.vMaxPageIndex());
                            }
                        }
                    };
                    self.vSaveAdd = function () {
                        if (self.vSelectedItem().errors().length === 0) {
                            var item = self.vSelectedItem();
                            var dataItem = {
                                ID: item.vID(), Name: item.vName(), Address: item.vAddress(), City: item.vCity(), State: item.vState(),
                                Country: item.vCountry(), ZipCode: item.vZipCode(), UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded,
                                SiteID: item.vSiteID(), EntryByUserID: item.vEntryByUserID(), TransactionDateTime: item.vTransactionDateTime()
                            };
                            $.post('api/Vendors', dataItem, function (result) {
                                item.vID(result.ID);
                                item.vCurrentTemplate = null;
                                self.vSelectedItem(null);
                            });
                        } else {
                            self.vSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.vSaveEdit = function () {
                        if (self.vSelectedItem().errors().length === 0) {
                            var item = self.vSelectedItem();
                            var dataItem = {
                                ID: item.vID(), Name: item.vName(), Address: item.vAddress(), City: item.vCity(), State: item.vState(),
                                Country: item.vCountry(), ZipCode: item.vZipCode(), UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded,
                                SiteID: item.vSiteID(), EntryByUserID: item.vEntryByUserID(), TransactionDateTime: item.vTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/Vendors/' + item.vID(), data: dataItem,
                                contentType: "application/x-www-form-urlencoded;charset=UTF-8", success:
                                    function (result) {
                                        item.vCurrentTemplate = 'vShowTemplate';
                                        self.vSelectedItem(null);
                                    }
                            });
                        } else {
                            self.vSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.vTemplateToUse = function (item) {
                        return self.vSelectedItem() === item && item.vCurrentTemplate === 'vEditTemplate' ? 'vEditTemplate' :
                            self.vSelectedItem() === item && item.vCurrentTemplate === 'vAddTemplate' ? 'vAddTemplate' : 'vShowTemplate';
                    };
                    self.vPreviousPage = function () {
                        if (self.vPageIndex() > 0) {
                            self.vPageIndex(self.vPageIndex() - 1);
                        }
                    };
                    self.vNextPage = function () {
                        if (self.vPageIndex() < self.vMaxPageIndex()) {
                            self.vPageIndex(self.vPageIndex() + 1);
                        }
                    };
                    self.vMoveToPage = function (index) {
                        self.vPageIndex(index);
                    };
                    if (UILoginUserID && UILoginPassword) {
                        $.get('api/Vendors' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.vVendors($.map(data, function (item) {
                                    return new Vendor(item);
                                }));
                                self.doneLoading = true;
                                self.vCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }).fail(function() {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var vendorsViewModel = new VendorsViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(vendorsViewModel, document.getElementById('main'));
                }
            }

            function VendorContactDetailsPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function VendorContactDetailsViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.vcdVendorContactDetails = ko.observableArray();
                    self.vcdUserSites = ko.observableArray(UIUserSites);
                    self.vcdVendors = ko.observableArray();
                    self.vcdPageSize = ko.observable(5);
                    self.vcdPageIndex = ko.observable(0);
                    self.vcdSelectedItem = ko.observable();
                    self.vcdOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.vcdUserSites().length; i++) {
                            if (self.vcdUserSites()[i].SiteID == siteID()) {
                                return self.vcdUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getVCDVendorByID = function (vendorID) {
                        for (var i = 0; i < self.vcdVendors().length; i++) {
                            if (self.vcdVendors()[i].vID() == vendorID()) {
                                return self.vcdVendors()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostVendorContactDetail'))) {
                            return true;
                        }
                        return false;
                    }
                    self.vcdCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.vcdPagedList = ko.dependentObservable(function () {
                        var size = self.vcdPageSize();
                        var start = self.vcdPageIndex() * size;
                        return self.vcdVendorContactDetails.slice(start, start + size);
                    });
                    self.vcdMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.vcdVendorContactDetails().length / self.vcdPageSize()) - 1;
                    });
                    self.vcdAllPages = ko.dependentObservable(function () {
                        var vcdPages = [];
                        for (i = 0; i <= self.vcdMaxPageIndex() ; i++) {
                            vcdPages.push({ vcdPageNumber: (i + 1) });
                        }
                        return vcdPages;
                    });
                    self.vcdEdit = function (item) {
                        item.vcdCurrentTemplate = 'vcdEditTemplate';
                        self.vcdOldItem.Name = item.vcdName();
                        self.vcdOldItem.PhoneNumber = item.vcdPhoneNumber();
                        self.vcdOldItem.VendorID = item.vcdVendorID();
                        self.vcdOldItem.Active = item.vcdActive();
                        self.vcdOldItem.SiteID = item.vcdSiteID();
                        self.vcdSelectedItem(item);
                    };
                    self.vcdCancelEdit = function (item) {
                        self.vcdSelectedItem().vcdCurrentTemplate = 'vcdShowTemplate';
                        self.vcdSelectedItem().vcdName(self.vcdOldItem.Name);
                        self.vcdSelectedItem().vcdPhoneNumber(self.vcdOldItem.PhoneNumber);
                        self.vcdSelectedItem().vcdVendorID(self.vcdOldItem.VendorID);
                        self.vcdSelectedItem().vcdActive(self.vcdOldItem.Active);
                        self.vcdSelectedItem().vcdSiteID(self.vcdOldItem.SiteID);
                        self.vcdOldItem = {};
                        self.vcdSelectedItem(null);
                    };
                    self.vcdCancelAdd = function (item) {
                        self.vcdSelectedItem().vcdCurrentTemplate = 'vcdShowTemplate';
                        self.vcdSelectedItem(null);
                        self.vcdVendorContactDetails.remove(item);
                    };
                    self.vcdAdd = function () {
                        var newItem = new VendorContactDetail();
                        newItem.vcdID(9999);
                        newItem.vcdCurrentTemplate = 'vcdAddTemplate';
                        self.vcdVendorContactDetails.push(newItem);
                        self.vcdSelectedItem(newItem);
                        self.vcdMoveToPage(self.vcdMaxPageIndex());
                    };
                    self.vcdRemove = function (item) {
                        if (item.vcdID()) {
                            if (confirm('Are you sure you wish to delete this vendor contact detail?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/VendorContactDetails/' + item.vcdID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.vcdSiteID(), success:
                                        function (result) {
                                            self.vcdVendorContactDetails.remove(item);
                                            if (self.vcdPageIndex() > self.vcdMaxPageIndex()) {
                                                self.vcdMoveToPage(self.vcdMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.vcdVendorContactDetails.remove(item);
                            if (self.vcdPageIndex() > self.vcdMaxPageIndex()) {
                                self.vcdMoveToPage(self.vcdMaxPageIndex());
                            }
                        }
                    };
                    self.vcdSaveAdd = function () {
                        if (self.vcdSelectedItem().errors().length === 0) {
                            var item = self.vcdSelectedItem();
                            var dataItem = {
                                ID: item.vcdID(), Name: item.vcdName(), PhoneNumber: item.vcdPhoneNumber(), VendorID: item.vcdVendorID(),
                                Active: item.vcdActive(), UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded,
                                SiteID: item.vcdSiteID(), EntryByUserID: UILoginUserID, TransactionDateTime: item.vcdTransactionDateTime(),
                                Active: item.vcdActive()
                            };
                            $.post('api/VendorContactDetails', dataItem, function (result) {
                                item.vcdID(result.ID);
                                item.vcdCurrentTemplate = null;
                                self.vcdSelectedItem(null);
                            });
                        } else {
                            self.vcdSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.vcdSaveEdit = function () {
                        if (self.vcdSelectedItem().errors().length === 0) {
                            var item = self.vcdSelectedItem();
                            var dataItem = {
                                ID: item.vcdID(), Name: item.vcdName(), PhoneNumber: item.vcdPhoneNumber(), VendorID: item.vcdVendorID(),
                                Active: item.vcdActive(), UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded,
                                SiteID: item.vcdSiteID(), EntryByUserID: UILoginUserID, TransactionDateTime: item.vcdTransactionDateTime(),
                                Active: item.vcdActive()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/VendorContactDetails/' + item.vcdID(), data: dataItem, success:
                                    function (result) {
                                        item.vcdCurrentTemplate = 'vcdShowTemplate';
                                        self.vcdSelectedItem(null);
                                    }
                            });
                        } else {
                            self.vcdSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.vcdTemplateToUse = function (item) {
                        return self.vcdSelectedItem() === item && item.vcdCurrentTemplate === 'vcdEditTemplate' ? 'vcdEditTemplate' :
                            self.vcdSelectedItem() === item && item.vcdCurrentTemplate === 'vcdAddTemplate' ? 'vcdAddTemplate' : 'vcdShowTemplate';
                    };
                    self.vcdPreviousPage = function () {
                        if (self.vcdPageIndex() > 0) {
                            self.vcdPageIndex(self.vcdPageIndex() - 1);
                        }
                    };
                    self.vcdNextPage = function () {
                        if (self.vcdPageIndex() < self.vcdMaxPageIndex()) {
                            self.vcdPageIndex(self.vcdPageIndex() + 1);
                        }
                    };
                    self.vcdMoveToPage = function (index) {
                        self.vcdPageIndex(index);
                    };

                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 2) {
                                self.vcdVendorContactDetails(self.lastArray);
                                self.doneLoading = true;
                                self.vcdCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/Vendors' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.vcdVendors($.map(data, function (item) {
                                    return new Vendor(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function() {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/VendorContactDetails' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new VendorContactDetail(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var vendorContactDetailsViewModel = new VendorContactDetailsViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(vendorContactDetailsViewModel, document.getElementById('main'));
                }
            }

            function VendorProductTypesPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function VendorProductTypesViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.vptVendorProductTypes = ko.observableArray();
                    self.vptVendors = ko.observableArray();
                    self.vptProductTypes = ko.observableArray();
                    self.vptUserSites = ko.observableArray(UIUserSites);
                    self.vptPageSize = ko.observable(5);
                    self.vptPageIndex = ko.observable(0);
                    self.vptSelectedItem = ko.observable();
                    self.vptOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.vptUserSites().length; i++) {
                            if (self.vptUserSites()[i].SiteID == siteID()) {
                                return self.vptUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getVPTVendorByID = function (vendorID) {
                        for (var i = 0; i < self.vptVendors().length; i++) {
                            if (self.vptVendors()[i].vID() == vendorID()) {
                                return self.vptVendors()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getVPTProductTypeByID = function (productTypeID) {
                        for (var i = 0; i < self.vptProductTypes().length; i++) {
                            if (self.vptProductTypes()[i].ptID() == productTypeID()) {
                                return self.vptProductTypes()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostVendorProductType'))) {
                            return true;
                        }
                        return false;
                    }
                    self.vptCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.vptPagedList = ko.dependentObservable(function () {
                        var size = self.vptPageSize();
                        var start = self.vptPageIndex() * size;
                        return self.vptVendorProductTypes.slice(start, start + size);
                    });
                    self.vptMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.vptVendorProductTypes().length / self.vptPageSize()) - 1;
                    });
                    self.vptAllPages = ko.dependentObservable(function () {
                        var vptPages = [];
                        for (i = 0; i <= self.vptMaxPageIndex() ; i++) {
                            vptPages.push({ vptPageNumber: (i + 1) });
                        }
                        return vptPages;
                    });
                    self.vptEdit = function (item) {
                        item.vptCurrentTemplate = 'vptEditTemplate';
                        self.vptOldItem.VendorID = item.vptVendorID();
                        self.vptOldItem.ProductTypeID = item.vptProductTypeID();
                        self.vptOldItem.Description = item.vptDescription();
                        self.vptOldItem.SiteID = item.vptSiteID();
                        self.vptSelectedItem(item);
                    };
                    self.vptCancelEdit = function (item) {
                        self.vptSelectedItem().vptCurrentTemplate = 'vptShowTemplate';
                        self.vptSelectedItem().vptVendorID(self.vptOldItem.VendorID);
                        self.vptSelectedItem().vptProductTypeID(self.vptOldItem.ProductTypeID);
                        self.vptSelectedItem().vptDescription(self.vptOldItem.Description);
                        self.vptSelectedItem().vptSiteID(self.vptOldItem.SiteID);
                        self.vptOldItem = {};
                        self.vptSelectedItem(null);
                    };
                    self.vptCancelAdd = function (item) {
                        self.vptSelectedItem().vptCurrentTemplate = 'vptShowTemplate';
                        self.vptSelectedItem(null);
                        self.vptVendorProductTypes.remove(item);
                    };
                    self.vptAdd = function () {
                        var newItem = new VendorProductType();
                        newItem.vptID(9999);
                        newItem.vptCurrentTemplate = 'vptAddTemplate';
                        self.vptVendorProductTypes.push(newItem);
                        self.vptSelectedItem(newItem);
                        self.vptMoveToPage(self.vptMaxPageIndex());
                    };
                    self.vptRemove = function (item) {
                        if (item.vptID()) {
                            if (confirm('Are you sure you wish to delete this vendor contact detail?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/VendorProductTypes/' + item.vptID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.vptSiteID(), success:
                                        function (result) {
                                            self.vptVendorProductTypes.remove(item);
                                            if (self.vptPageIndex() > self.vptMaxPageIndex()) {
                                                self.vptMoveToPage(self.vptMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.vptVendorProductTypes.remove(item);
                            if (self.vptPageIndex() > self.vptMaxPageIndex()) {
                                self.vptMoveToPage(self.vptMaxPageIndex());
                            }
                        }
                    };
                    self.vptSaveAdd = function () {
                        if (self.vptSelectedItem().errors().length === 0) {
                            var item = self.vptSelectedItem();
                            var dataItem = {
                                ID: item.vptID(), VendorID: item.vptVendorID(), ProductTypeID: item.vptProductTypeID(), Description: item.vptDescription,
                                SiteID: item.vptSiteID(), EntryByUserID: item.vptEntryByUserID(), TransactionDateTime: item.vptTransactionDateTime(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded
                            };
                            $.post('api/VendorProductTypes', dataItem, function (result) {
                                item.vptID(result.ID);
                                item.vptCurrentTemplate = null;
                                self.vptSelectedItem(null);
                            });
                        } else {
                            self.vptSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.vptSaveEdit = function () {
                        if (self.vptSelectedItem().errors().length === 0) {
                            var item = self.vptSelectedItem();
                            var dataItem = {
                                ID: item.vptID(), VendorID: item.vptVendorID(), ProductTypeID: item.vptProductTypeID(), Description: item.vptDescription,
                                SiteID: item.vptSiteID(), EntryByUserID: item.vptEntryByUserID(), TransactionDateTime: item.vptTransactionDateTime(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/VendorProductTypes/' + item.vptID(), data: dataItem, success:
                                    function (result) {
                                        item.vptCurrentTemplate = 'vptShowTemplate';
                                        self.vptSelectedItem(null);
                                    }
                            });
                        } else {
                            self.vptSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.vptTemplateToUse = function (item) {
                        return self.vptSelectedItem() === item && item.vptCurrentTemplate === 'vptEditTemplate' ? 'vptEditTemplate' :
                            self.vptSelectedItem() === item && item.vptCurrentTemplate === 'vptAddTemplate' ? 'vptAddTemplate' : 'vptShowTemplate';
                    };
                    self.vptPreviousPage = function () {
                        if (self.vptPageIndex() > 0) {
                            self.vptPageIndex(self.vptPageIndex() - 1);
                        }
                    };
                    self.vptNextPage = function () {
                        if (self.vptPageIndex() < self.vptMaxPageIndex()) {
                            self.vptPageIndex(self.vptPageIndex() + 1);
                        }
                    };
                    self.vptMoveToPage = function (index) {
                        self.vptPageIndex(index);
                    };

                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 2) {
                                self.vptVendorProductTypes(self.lastArray);
                                self.doneLoading = true;
                                self.vptCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/Vendors' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.vptVendors($.map(data, function (item) {
                                    return new Vendor(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function() {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/ProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.vptProductTypes($.map(data, function (item) {
                                    return new ProductType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/VendorProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new VendorProductType(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var vendorProductTypesViewModel = new VendorProductTypesViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(vendorProductTypesViewModel, document.getElementById('main'));
                }
            }

            function VendorProductTypePricesPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function VendorProductTypePricesViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.vptpVendorProductTypePrices = ko.observableArray();
                    self.vptpVendorProductTypes = ko.observableArray();
                    self.vptpVendors = ko.observableArray();
                    self.vptpProductTypes = ko.observableArray();
                    self.vptpUserSites = ko.observableArray(UIUserSites);
                    self.vptpPageSize = ko.observable(5);
                    self.vptpPageIndex = ko.observable(0);
                    self.vptpSelectedItem = ko.observable();
                    self.vptpOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.vptpUserSites().length; i++) {
                            if (self.vptpUserSites()[i].SiteID == siteID()) {
                                return self.vptpUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getVPTPVendorProductTypeByID = function (vendorProductTypeID) {
                        for (var i = 0; i < self.vptpVendorProductTypes().length; i++) {
                            if (self.vptpVendorProductTypes()[i].vptID() == vendorProductTypeID) {
                                for (var j = 0; j < self.vptpVendors().length; j++) {
                                    if (self.vptpVendorProductTypes()[i].vptVendorID() == self.vptpVendors()[j].vID()) {
                                        for (k = 0; k < self.vptpProductTypes().length; k++) {
                                            if (self.vptpVendorProductTypes()[i].vptProductTypeID() == self.vptpProductTypes()[k].ptID()) {
                                                return self.vptpVendors()[j].vName() + ' - ' + self.vptpProductTypes()[k].ptName() + ' - ' + self.vptpVendorProductTypes()[i].vptDescription();
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostVendorProductType'))) {
                            return true;
                        }
                        return false;
                    }
                    self.vptpCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.vptpPagedList = ko.dependentObservable(function () {
                        var size = self.vptpPageSize();
                        var start = self.vptpPageIndex() * size;
                        return self.vptpVendorProductTypePrices.slice(start, start + size);
                    });
                    self.vptpMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.vptpVendorProductTypePrices().length / self.vptpPageSize()) - 1;
                    });
                    self.vptpAllPages = ko.dependentObservable(function () {
                        var vptpPages = [];
                        for (i = 0; i <= self.vptpMaxPageIndex() ; i++) {
                            vptpPages.push({ vptpPageNumber: (i + 1) });
                        }
                        return vptpPages;
                    });
                    self.vptpEdit = function (item) {
                        item.vptpCurrentTemplate = 'vptpEditTemplate';
                        self.vptpOldItem.VendorProductTypeID = item.vptpVendorProductTypeID();
                        self.vptpOldItem.PricePerMeasurementType = item.vptpPricePerMeasurementType();
                        self.vptpOldItem.ContractStartDate = item.vptpContractStartDate();
                        self.vptpOldItem.ContractEndDate = item.vptpContractEndDate();
                        self.vptpOldItem.SiteID = item.vptpSiteID();
                        self.vptpSelectedItem(item);
                    };
                    self.vptpCancelEdit = function (item) {
                        self.vptpSelectedItem().vptpCurrentTemplate = 'vptpShowTemplate';
                        self.vptpSelectedItem().vptpVendorProductTypeID(self.vptpOldItem.VendorProductTypeID);
                        self.vptpSelectedItem().vptpPricePerMeasurementType(self.vptpOldItem.PricePerMeasurementType);
                        self.vptpSelectedItem().vptpContractStartDate(self.vptpOldItem.ContractStartDate);
                        self.vptpSelectedItem().vptpContractEndDate(self.vptpOldItem.ContractEndDate);
                        self.vptpSelectedItem().vptpSiteID(self.vptpOldItem.SiteID);
                        self.vptpOldItem = {};
                        self.vptpSelectedItem(null);
                    };
                    self.vptpCancelAdd = function (item) {
                        self.vptpSelectedItem().vptpCurrentTemplate = 'vptpShowTemplate';
                        self.vptpSelectedItem(null);
                        self.vptpVendorProductTypePrices.remove(item);
                    };
                    self.vptpAdd = function () {
                        var newItem = new VendorProductTypePrice();
                        newItem.vptpID(9999);
                        newItem.vptpCurrentTemplate = 'vptpAddTemplate';
                        self.vptpVendorProductTypePrices.push(newItem);
                        self.vptpSelectedItem(newItem);
                        self.vptpMoveToPage(self.vptpMaxPageIndex());
                    };
                    self.vptpRemove = function (item) {
                        if (item.vptpID()) {
                            if (confirm('Are you sure you wish to delete this vendor product type price?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/VendorProductTypePrices/' + item.vptpID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.vptpSiteID(), success:
                                        function (result) {
                                            self.vptpVendorProductTypePrices.remove(item);
                                            if (self.vptpPageIndex() > self.vptpMaxPageIndex()) {
                                                self.vptpMoveToPage(self.vptpMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.vptpVendorProductTypePrices.remove(item);
                            if (self.vptpPageIndex() > self.vptpMaxPageIndex()) {
                                self.vptpMoveToPage(self.vptpMaxPageIndex());
                            }
                        }
                    };
                    self.vptpSaveAdd = function () {
                        if (self.vptpSelectedItem().errors().length === 0) {
                            var item = self.vptpSelectedItem();
                            var dataItem = {
                                ID: item.vptpID(), VendorProductTypeID: item.vptpVendorProductTypeID(), PricePerMeasurementType: item.vptpPricePerMeasurementType,
                                ContractStartDate: item.vptpContractStartDate(), ContractEndDate: item.vptpContractEndDate(),
                                SiteID: item.vptpSiteID(), EntryByUserID: item.vptpEntryByUserID(), TransactionDateTime: item.vptpTransactionDateTime(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded
                            };
                            $.post('api/VendorProductTypePrices', dataItem, function (result) {
                                item.vptpID(result.ID);
                                item.vptpCurrentTemplate = null;
                                self.vptpSelectedItem(null);
                            });
                        } else {
                            self.vptpSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.vptpSaveEdit = function () {
                        if (self.vptpSelectedItem().errors().length === 0) {
                            var item = self.vptpSelectedItem();
                            var dataItem = {
                                ID: item.vptpID(), VendorProductTypeID: item.vptpVendorProductTypeID(), PricePerMeasurementType: item.vptpPricePerMeasurementType,
                                ContractStartDate: item.vptpContractStartDate(), ContractEndDate: item.vptpContractEndDate(),
                                SiteID: item.vptpSiteID(), EntryByUserID: item.vptpEntryByUserID(), TransactionDateTime: item.vptpTransactionDateTime(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/VendorProductTypePrices/' + item.vptpID(), data: dataItem, success:
                                    function (result) {
                                        item.vptpCurrentTemplate = 'vptpShowTemplate';
                                        self.vptpSelectedItem(null);
                                    }
                            });
                        } else {
                            self.vptpSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.vptpTemplateToUse = function (item) {
                        return self.vptpSelectedItem() === item && item.vptpCurrentTemplate === 'vptpEditTemplate' ? 'vptpEditTemplate' :
                            self.vptpSelectedItem() === item && item.vptpCurrentTemplate === 'vptpAddTemplate' ? 'vptpAddTemplate' : 'vptpShowTemplate';
                    };
                    self.vptpPreviousPage = function () {
                        if (self.vptpPageIndex() > 0) {
                            self.vptpPageIndex(self.vptpPageIndex() - 1);
                        }
                    };
                    self.vptpNextPage = function () {
                        if (self.vptpPageIndex() < self.vptpMaxPageIndex()) {
                            self.vptpPageIndex(self.vptpPageIndex() + 1);
                        }
                    };
                    self.vptpMoveToPage = function (index) {
                        self.vptpPageIndex(index);
                    };

                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 4) {
                                self.vptpVendorProductTypePrices(self.lastArray);
                                self.doneLoading = true;
                                self.vptpCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/VendorProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.vptpVendorProductTypes($.map(data, function (item) {
                                    return new VendorProductType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/Vendors' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.vptpVendors($.map(data, function (item) {
                                    return new Vendor(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/ProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.vptpProductTypes($.map(data, function (item) {
                                    return new ProductType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/VendorProductTypePrices' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new VendorProductTypePrice(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var vendorProductTypePricesViewModel = new VendorProductTypePricesViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(vendorProductTypePricesViewModel, document.getElementById('main'));
                }
            }

            function PurchaseOrdersPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function PurchaseOrdersViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.poPurchaseOrders = ko.observableArray();
                    self.poVendorProductTypes = ko.observableArray();
                    self.poUserSites = ko.observableArray(UIUserSites);
                    self.poPageSize = ko.observable(5);
                    self.poPageIndex = ko.observable(0);
                    self.poSelectedItem = ko.observable();
                    self.poOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.poUserSites().length; i++) {
                            if (self.poUserSites()[i].SiteID == siteID()) {
                                return self.poUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getPOVendorProductTypeByID = function (vendorProductTypeID) {
                        for (var i = 0; i < self.poVendorProductTypes().length; i++) {
                            if (self.poVendorProductTypes()[i].vptID() == vendorProductTypeID()) {
                                return self.poVendorProductTypes()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostPurchaseOrder'))) {
                            return true;
                        }
                        return false;
                    }
                    self.poCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.poPagedList = ko.dependentObservable(function () {
                        var size = self.poPageSize();
                        var start = self.poPageIndex() * size;
                        return self.poPurchaseOrders.slice(start, start + size);
                    });
                    self.poMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.poPurchaseOrders().length / self.poPageSize()) - 1;
                    });
                    self.poAllPages = ko.dependentObservable(function () {
                        var poPages = [];
                        for (i = 0; i <= self.poMaxPageIndex() ; i++) {
                            poPages.push({ poPageNumber: (i + 1) });
                        }
                        return poPages;
                    });
                    self.poEdit = function (item) {
                        item.poCurrentTemplate = 'poEditTemplate';
                        self.poOldItem.VendorProductTypeID = item.poVendorProductTypeID();
                        self.poOldItem.Quantity = item.poQuantity();
                        self.poOldItem.OrderPlacedOnDate = item.poOrderPlacedOnDate();
                        self.poOldItem.ExpectedDeliveryDate = item.poExpectedDeliveryDate();
                        self.poOldItem.Comments = item.poComments();
                        self.poOldItem.SiteID = item.poSiteID();
                        self.poSelectedItem(item);
                    };
                    self.poCancelEdit = function (item) {
                        self.poSelectedItem().poCurrentTemplate = 'poShowTemplate';
                        self.poSelectedItem().poVendorProductTypeID(self.poOldItem.VendorProductTypeID);
                        self.poSelectedItem().poQuantity(self.poOldItem.Quantity);
                        self.poSelectedItem().poOrderPlacedOnDate(self.poOldItem.OrderPlacedOnDate);
                        self.poSelectedItem().poExpectedDeliveryDate(self.poOldItem.ExpectedDeliveryDate);
                        self.poSelectedItem().poComments(self.poOldItem.Comments);
                        self.poSelectedItem().poSiteID(self.poOldItem.SiteID);
                        self.poOldItem = {};
                        self.poSelectedItem(null);
                    };
                    self.poCancelAdd = function (item) {
                        self.poSelectedItem().poCurrentTemplate = 'poShowTemplate';
                        self.poSelectedItem(null);
                        self.poPurchaseOrders.remove(item);
                    };
                    self.poAdd = function () {
                        var newItem = new PurchaseOrder();
                        newItem.poID(9999);
                        newItem.poCurrentTemplate = 'poAddTemplate';
                        self.poPurchaseOrders.push(newItem);
                        self.poSelectedItem(newItem);
                        self.poMoveToPage(self.poMaxPageIndex());
                    };
                    self.poRemove = function (item) {
                        if (item.poID()) {
                            if (confirm('Are you sure you wish to delete this purchase order?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/PurchaseOrders/' + item.poID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.poSiteID(), success:
                                        function (result) {
                                            self.poPurchaseOrders.remove(item);
                                            if (self.poPageIndex() > self.poMaxPageIndex()) {
                                                self.poMoveToPage(self.poMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.poPurchaseOrders.remove(item);
                            if (self.poPageIndex() > self.poMaxPageIndex()) {
                                self.poMoveToPage(self.poMaxPageIndex());
                            }
                        }
                    };
                    self.poSaveAdd = function () {
                        if (self.poSelectedItem().errors().length === 0) {
                            var item = self.poSelectedItem();
                            var dataItem = {
                                ID: item.poID(), VendorProductTypeID: item.poVendorProductTypeID(), Quantity: item.poQuantity(),
                                OrderPlacedOnDate: item.poOrderPlacedOnDate(), ExpectedDeliveryDate: item.poExpectedDeliveryDate(),  Comments: item.poComments(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.poSiteID(), EntryByUserID: item.poEntryByUserID(),
                                TransactionDateTime: item.poTransactionDateTime()
                            };
                            $.post('api/PurchaseOrders', dataItem, function (result) {
                                item.poID(result.ID);
                                item.poCurrentTemplate = null;
                                self.poSelectedItem(null);
                            });
                        } else {
                            self.poSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.poSaveEdit = function () {
                        if (self.poSelectedItem().errors().length === 0) {
                            var item = self.poSelectedItem();
                            var dataItem = {
                                ID: item.poID(), VendorProductTypeID: item.poVendorProductTypeID(), Quantity: item.poQuantity(),
                                OrderPlacedOnDate: item.poOrderPlacedOnDate(), ExpectedDeliveryDate: item.poExpectedDeliveryDate(),  Comments: item.poComments(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.poSiteID(), EntryByUserID: item.poEntryByUserID(),
                                TransactionDateTime: item.poTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/PurchaseOrders/' + item.poID(), data: dataItem, success:
                                    function (result) {
                                        item.poCurrentTemplate = 'poShowTemplate';
                                        self.poSelectedItem(null);
                                    }
                            });
                        } else {
                            self.poSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.poTemplateToUse = function (item) {
                        return self.poSelectedItem() === item && item.poCurrentTemplate === 'poEditTemplate' ? 'poEditTemplate' :
                            self.poSelectedItem() === item && item.poCurrentTemplate === 'poAddTemplate' ? 'poAddTemplate' : 'poShowTemplate';
                    };
                    self.poPreviousPage = function () {
                        if (self.poPageIndex() > 0) {
                            self.poPageIndex(self.poPageIndex() - 1);
                        }
                    };
                    self.poNextPage = function () {
                        if (self.poPageIndex() < self.poMaxPageIndex()) {
                            self.poPageIndex(self.poPageIndex() + 1);
                        }
                    };
                    self.poMoveToPage = function (index) {
                        self.poPageIndex(index);
                    };


                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 2) {
                                self.poPurchaseOrders(self.lastArray);
                                self.doneLoading = true;
                                self.poCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/PurchaseOrders' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new PurchaseOrder(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/VendorProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.poVendorProductTypes($.map(data, function (item) {
                                    return new VendorProductType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var poPurchaseOrdersViewModel = new PurchaseOrdersViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(poPurchaseOrdersViewModel, document.getElementById('main'));
                }
            }

            function InventoriesPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function InventoriesViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.iInventories = ko.observableArray();
                    self.iProductTypes = ko.observableArray();
                    self.iUserSites = ko.observableArray(UIUserSites);
                    self.iPageSize = ko.observable(5);
                    self.iPageIndex = ko.observable(0);
                    self.iSelectedItem = ko.observable();
                    self.iOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.iUserSites().length; i++) {
                            if (self.iUserSites()[i].SiteID == siteID()) {
                                return self.iUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getIProductTypeByID = function (productTypeID) {
                        for (var i = 0; i < self.iProductTypes().length; i++) {
                            if (self.iProductTypes()[i].ptID() == productTypeID()) {
                                return self.iProductTypes()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostInventory'))) {
                            return true;
                        }
                        return false;
                    }
                    self.iCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.iPagedList = ko.dependentObservable(function () {
                        var size = self.iPageSize();
                        var start = self.iPageIndex() * size;
                        return self.iInventories.slice(start, start + size);
                    });
                    self.iMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.iInventories().length / self.iPageSize()) - 1;
                    });
                    self.iAllPages = ko.dependentObservable(function () {
                        var iPages = [];
                        for (i = 0; i <= self.iMaxPageIndex() ; i++) {
                            iPages.push({ iPageNumber: (i + 1) });
                        }
                        return iPages;
                    });
                    self.iEdit = function (item) {
                        item.iCurrentTemplate = 'iEditTemplate';
                        self.iOldItem.ProductTypeID = item.iProductTypeID();
                        self.iOldItem.Quantity = item.iQuantity();
                        self.iOldItem.SiteID = item.iSiteID();
                        self.iSelectedItem(item);
                    };
                    self.iCancelEdit = function (item) {
                        self.iSelectedItem().iCurrentTemplate = 'iShowTemplate';
                        self.iSelectedItem().iProductTypeID(self.iOldItem.ProductTypeID);
                        self.iSelectedItem().iQuantity(self.iOldItem.Quantity);
                        self.iSelectedItem().iSiteID(self.iOldItem.SiteID);
                        self.iOldItem = {};
                        self.iSelectedItem(null);
                    };
                    self.iCancelAdd = function (item) {
                        self.iSelectedItem().iCurrentTemplate = 'iShowTemplate';
                        self.iSelectedItem(null);
                        self.iInventories.remove(item);
                    };
                    self.iAdd = function () {
                        var newItem = new Inventory();
                        newItem.iID(9999);
                        newItem.iCurrentTemplate = 'iAddTemplate';
                        self.iInventories.push(newItem);
                        self.iSelectedItem(newItem);
                        self.iMoveToPage(self.iMaxPageIndex());
                    };
                    self.iRemove = function (item) {
                        if (item.iID()) {
                            if (confirm('Are you sure you wish to delete this inventory item?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/Inventories/' + item.iID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.iSiteID(), success:
                                        function (result) {
                                            self.iInventories.remove(item);
                                            if (self.iPageIndex() > self.iMaxPageIndex()) {
                                                self.iMoveToPage(self.iMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.iInventories.remove(item);
                            if (self.iPageIndex() > self.iMaxPageIndex()) {
                                self.iMoveToPage(self.iMaxPageIndex());
                            }
                        }
                    };
                    self.iSaveAdd = function () {
                        if (self.iSelectedItem().errors().length === 0) {
                            var item = self.iSelectedItem();
                            var dataItem = {
                                ID: item.iID(), ProductTypeID: item.iProductTypeID(), Quantity: item.iQuantity(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.iSiteID(), EntryByUserID: item.iEntryByUserID(),
                                TransactionDateTime: item.iTransactionDateTime()
                            };
                            $.post('api/Inventories', dataItem, function (result) {
                                item.iID(result.ID);
                                item.iCurrentTemplate = null;
                                self.iSelectedItem(null);
                            });
                        } else {
                            self.iSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.iSaveEdit = function () {
                        if (self.iSelectedItem().errors().length === 0) {
                            var item = self.iSelectedItem();
                            var dataItem = {
                                ID: item.iID(), ProductTypeID: item.iProductTypeID(), Quantity: item.iQuantity(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.iSiteID(), EntryByUserID: item.iEntryByUserID(),
                                TransactionDateTime: item.iTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/Inventories/' + item.iID(), data: dataItem, success:
                                    function (result) {
                                        item.iCurrentTemplate = 'iShowTemplate';
                                        self.iSelectedItem(null);
                                    }
                            });
                        } else {
                            self.iSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.iTemplateToUse = function (item) {
                        return self.iSelectedItem() === item && item.iCurrentTemplate === 'iEditTemplate' ? 'iEditTemplate' :
                            self.iSelectedItem() === item && item.iCurrentTemplate === 'iAddTemplate' ? 'iAddTemplate' : 'iShowTemplate';
                    };
                    self.iPreviousPage = function () {
                        if (self.iPageIndex() > 0) {
                            self.iPageIndex(self.iPageIndex() - 1);
                        }
                    };
                    self.iNextPage = function () {
                        if (self.iPageIndex() < self.iMaxPageIndex()) {
                            self.iPageIndex(self.iPageIndex() + 1);
                        }
                    };
                    self.iMoveToPage = function (index) {
                        self.iPageIndex(index);
                    };


                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 2) {
                                self.iInventories(self.lastArray);
                                self.doneLoading = true;
                                self.iCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/Inventories' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new Inventory(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/ProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.iProductTypes($.map(data, function (item) {
                                    return new ProductType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var iInventoriesViewModel = new InventoriesViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(iInventoriesViewModel, document.getElementById('main'));
                }
            }

            function ReceivedPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function ReceivedViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.rReceived = ko.observableArray();
                    self.rVendorProductTypes = ko.observableArray();
                    self.rUserSites = ko.observableArray(UIUserSites);
                    self.rPageSize = ko.observable(5);
                    self.rPageIndex = ko.observable(0);
                    self.rSelectedItem = ko.observable();
                    self.rOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.rUserSites().length; i++) {
                            if (self.rUserSites()[i].SiteID == siteID()) {
                                return self.rUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getRVendorProductTypeByID = function (vendorProductTypeID) {
                        for (var i = 0; i < self.rVendorProductTypes().length; i++) {
                            if (self.rVendorProductTypes()[i].vptID() == vendorProductTypeID()) {
                                return self.rVendorProductTypes()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostReceived'))) {
                            return true;
                        }
                        return false;
                    }
                    self.rCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.rPagedList = ko.dependentObservable(function () {
                        var size = self.rPageSize();
                        var start = self.rPageIndex() * size;
                        return self.rReceived.slice(start, start + size);
                    });
                    self.rMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.rReceived().length / self.rPageSize()) - 1;
                    });
                    self.rAllPages = ko.dependentObservable(function () {
                        var rPages = [];
                        for (i = 0; i <= self.rMaxPageIndex() ; i++) {
                            rPages.push({ rPageNumber: (i + 1) });
                        }
                        return rPages;
                    });
                    self.rEdit = function (item) {
                        item.rCurrentTemplate = 'rEditTemplate';
                        self.rOldItem.VendorProductTypeID = item.rVendorProductTypeID();
                        self.rOldItem.Quantity = item.rQuantity();
                        self.rOldItem.PricePaid = item.rPricePaid();
                        self.rOldItem.ReceivedDate = item.rReceivedDate();
                        self.rOldItem.Comments = item.rComments();
                        self.rOldItem.SiteID = item.rSiteID();
                        self.rSelectedItem(item);
                    };
                    self.rCancelEdit = function (item) {
                        self.rSelectedItem().rCurrentTemplate = 'rShowTemplate';
                        self.rSelectedItem().rVendorProductTypeID(self.rOldItem.VendorProductTypeID);
                        self.rSelectedItem().rQuantity(self.rOldItem.Quantity);
                        self.rSelectedItem().rPricePaid(self.rOldItem.PricePaid);
                        self.rSelectedItem().rReceivedDate(self.rOldItem.ReceivedDate);
                        self.rSelectedItem().rComments(self.rOldItem.Comments);
                        self.rSelectedItem().rSiteID(self.rOldItem.SiteID);
                        self.rOldItem = {};
                        self.rSelectedItem(null);
                    };
                    self.rCancelAdd = function (item) {
                        self.rSelectedItem().rCurrentTemplate = 'rShowTemplate';
                        self.rSelectedItem(null);
                        self.rReceived.remove(item);
                    };
                    self.rAdd = function () {
                        var newItem = new Receiving();
                        newItem.rID(9999);
                        newItem.rCurrentTemplate = 'rAddTemplate';
                        self.rReceived.push(newItem);
                        self.rSelectedItem(newItem);
                        self.rMoveToPage(self.rMaxPageIndex());
                    };
                    self.rRemove = function (item) {
                        if (item.rID()) {
                            if (confirm('Are you sure you wish to delete this receiving entry?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/Received/' + item.rID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.rSiteID(), success:
                                        function (result) {
                                            self.rReceived.remove(item);
                                            if (self.rPageIndex() > self.rMaxPageIndex()) {
                                                self.rMoveToPage(self.rMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.rReceived.remove(item);
                            if (self.rPageIndex() > self.rMaxPageIndex()) {
                                self.rMoveToPage(self.rMaxPageIndex());
                            }
                        }
                    };
                    self.rSaveAdd = function () {
                        if (self.rSelectedItem().errors().length === 0) {
                            var item = self.rSelectedItem();
                            var dataItem = {
                                ID: item.rID(), VendorProductTypeID: item.rVendorProductTypeID(), Quantity: item.rQuantity(),
                                PricePaid: item.rPricePaid(), ReceivedDate: item.rReceivedDate(), Comments: item.rComments(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.rSiteID(), EntryByUserID: item.rEntryByUserID(),
                                TransactionDateTime: item.rTransactionDateTime()
                            };
                            $.post('api/Received', dataItem, function (result) {
                                item.rID(result.ID);
                                item.rCurrentTemplate = null;
                                self.rSelectedItem(null);
                            });
                        } else {
                            self.rSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.rSaveEdit = function () {
                        if (self.rSelectedItem().errors().length === 0) {
                            var item = self.rSelectedItem();
                            var dataItem = {
                                ID: item.rID(), VendorProductTypeID: item.rVendorProductTypeID(), Quantity: item.rQuantity(),
                                PricePaid: item.rPricePaid(), ReceivedDate: item.rReceivedDate(), Comments: item.rComments(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.rSiteID(), EntryByUserID: item.rEntryByUserID(),
                                TransactionDateTime: item.rTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/Received/' + item.rID(), data: dataItem, success:
                                    function (result) {
                                        item.rCurrentTemplate = 'rShowTemplate';
                                        self.rSelectedItem(null);
                                    }
                            });
                        } else {
                            self.rSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.rTemplateToUse = function (item) {
                        return self.rSelectedItem() === item && item.rCurrentTemplate === 'rEditTemplate' ? 'rEditTemplate' :
                            self.rSelectedItem() === item && item.rCurrentTemplate === 'rAddTemplate' ? 'rAddTemplate' : 'rShowTemplate';
                    };
                    self.rPreviousPage = function () {
                        if (self.rPageIndex() > 0) {
                            self.rPageIndex(self.rPageIndex() - 1);
                        }
                    };
                    self.rNextPage = function () {
                        if (self.rPageIndex() < self.rMaxPageIndex()) {
                            self.rPageIndex(self.rPageIndex() + 1);
                        }
                    };
                    self.rMoveToPage = function (index) {
                        self.rPageIndex(index);
                    };


                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 2) {
                                self.rReceived(self.lastArray);
                                self.doneLoading = true;
                                self.rCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/Received' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new Receiving(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/VendorProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.rVendorProductTypes($.map(data, function (item) {
                                    return new VendorProductType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var rReceivedViewModel = new ReceivedViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(rReceivedViewModel, document.getElementById('main'));
                }
            }

            function InventoryLocationsPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function InventoryLocationsViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.ilInventoryLocations = ko.observableArray();
                    self.ilProductTypes = ko.observableArray();
                    self.ilUserSites = ko.observableArray(UIUserSites);
                    self.ilPageSize = ko.observable(5);
                    self.ilPageIndex = ko.observable(0);
                    self.ilSelectedItem = ko.observable();
                    self.ilOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.ilUserSites().length; i++) {
                            if (self.ilUserSites()[i].SiteID == siteID()) {
                                return self.ilUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getILProductTypeByID = function (productTypeID) {
                        for (var j = 0; j < self.ilProductTypes().length; j++) {
                            if (self.ilProductTypes()[j].ptID() == productTypeID) {
                                return self.ilProductTypes()[j].ptName();
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostInventoryLocation'))) {
                            return true;
                        }
                        return false;
                    }
                    self.ilCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.ilPagedList = ko.dependentObservable(function () {
                        var size = self.ilPageSize();
                        var start = self.ilPageIndex() * size;
                        return self.ilInventoryLocations.slice(start, start + size);
                    });
                    self.ilMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.ilInventoryLocations().length / self.ilPageSize()) - 1;
                    });
                    self.ilAllPages = ko.dependentObservable(function () {
                        var ilPages = [];
                        for (i = 0; i <= self.ilMaxPageIndex() ; i++) {
                            ilPages.push({ ilPageNumber: (i + 1) });
                        }
                        return ilPages;
                    });
                    self.ilEdit = function (item) {
                        item.ilCurrentTemplate = 'ilEditTemplate';
                        self.ilOldItem.ProductTypeID = item.ilProductTypeID();
                        self.ilOldItem.LocationDescription = item.ilLocationDescription();
                        self.ilOldItem.SiteID = item.ilSiteID();
                        self.ilSelectedItem(item);
                    };
                    self.ilCancelEdit = function (item) {
                        self.ilSelectedItem().ilCurrentTemplate = 'ilShowTemplate';
                        self.ilSelectedItem().ilProductTypeID(self.ilOldItem.ProductTypeID);
                        self.ilSelectedItem().ilLocationDescription(self.ilOldItem.LocationDescription);
                        self.ilSelectedItem().ilSiteID(self.ilOldItem.SiteID);
                        self.ilOldItem = {};
                        self.ilSelectedItem(null);
                    };
                    self.ilCancelAdd = function (item) {
                        self.ilSelectedItem().ilCurrentTemplate = 'ilShowTemplate';
                        self.ilSelectedItem(null);
                        self.ilInventoryLocations.remove(item);
                    };
                    self.ilAdd = function () {
                        var newItem = new InventoryLocation();
                        newItem.ilID(9999);
                        newItem.ilCurrentTemplate = 'ilAddTemplate';
                        self.ilInventoryLocations.push(newItem);
                        self.ilSelectedItem(newItem);
                        self.ilMoveToPage(self.ilMaxPageIndex());
                    };
                    self.ilRemove = function (item) {
                        if (item.ilID()) {
                            if (confirm('Are you sure you wish to delete this inventory location?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/InventoryLocations/' + item.ilID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.ilSiteID(), success:
                                        function (result) {
                                            self.ilInventoryLocations.remove(item);
                                            if (self.ilPageIndex() > self.ilMaxPageIndex()) {
                                                self.ilMoveToPage(self.ilMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.ilInventoryLocations.remove(item);
                            if (self.ilPageIndex() > self.ilMaxPageIndex()) {
                                self.ilMoveToPage(self.ilMaxPageIndex());
                            }
                        }
                    };
                    self.ilSaveAdd = function () {
                        if (self.ilSelectedItem().errors().length === 0) {
                            var item = self.ilSelectedItem();
                            var dataItem = {
                                ID: item.ilID(), ProductTypeID: item.ilProductTypeID(), LocationDescription: item.ilLocationDescription(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.ilSiteID(), EntryByUserID: item.ilEntryByUserID(),
                                TransactionDateTime: item.ilTransactionDateTime()
                            };
                            $.post('api/InventoryLocations', dataItem, function (result) {
                                item.ilID(result.ID);
                                item.ilCurrentTemplate = null;
                                self.ilSelectedItem(null);
                            });
                        } else {
                            self.ilSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.ilSaveEdit = function () {
                        if (self.ilSelectedItem().errors().length === 0) {
                            var item = self.ilSelectedItem();
                            var dataItem = {
                                ID: item.ilID(), ProductTypeID: item.ilProductTypeID(), LocationDescription: item.ilLocationDescription(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.ilSiteID(), EntryByUserID: item.ilEntryByUserID(),
                                TransactionDateTime: item.ilTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/InventoryLocations/' + item.ilID(), data: dataItem, success:
                                    function (result) {
                                        item.ilCurrentTemplate = 'ilShowTemplate';
                                        self.ilSelectedItem(null);
                                    }
                            });
                        } else {
                            self.ilSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.ilTemplateToUse = function (item) {
                        return self.ilSelectedItem() === item && item.ilCurrentTemplate === 'ilEditTemplate' ? 'ilEditTemplate' :
                            self.ilSelectedItem() === item && item.ilCurrentTemplate === 'ilAddTemplate' ? 'ilAddTemplate' : 'ilShowTemplate';
                    };
                    self.ilPreviousPage = function () {
                        if (self.ilPageIndex() > 0) {
                            self.ilPageIndex(self.ilPageIndex() - 1);
                        }
                    };
                    self.ilNextPage = function () {
                        if (self.ilPageIndex() < self.ilMaxPageIndex()) {
                            self.ilPageIndex(self.ilPageIndex() + 1);
                        }
                    };
                    self.ilMoveToPage = function (index) {
                        self.ilPageIndex(index);
                    };


                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 2) {
                                self.ilInventoryLocations(self.lastArray);
                                self.doneLoading = true;
                                self.ilCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/InventoryLocations' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new InventoryLocation(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/ProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.ilProductTypes($.map(data, function (item) {
                                    return new ProductType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var ilInventoryLocationsViewModel = new InventoryLocationsViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(ilInventoryLocationsViewModel, document.getElementById('main'));
                }
            }

            function InventoryQuotasPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function InventoryQuotasViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.iqInventoryQuotas = ko.observableArray();
                    self.iqProductTypes = ko.observableArray();
                    self.iqUserSites = ko.observableArray(UIUserSites);
                    self.iqPageSize = ko.observable(5);
                    self.iqPageIndex = ko.observable(0);
                    self.iqSelectedItem = ko.observable();
                    self.iqOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.iqUserSites().length; i++) {
                            if (self.iqUserSites()[i].SiteID == siteID()) {
                                return self.iqUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getIQProductTypeByID = function (productTypeID) {
                        for (var i = 0; i < self.iqProductTypes().length; i++) {
                            if (self.iqProductTypes()[i].ptID() == productTypeID) {
                                return self.iqProductTypes()[i].ptName();
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostInventoryQuota'))) {
                            return true;
                        }
                        return false;
                    }
                    self.iqCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.iqPagedList = ko.dependentObservable(function () {
                        var size = self.iqPageSize();
                        var start = self.iqPageIndex() * size;
                        return self.iqInventoryQuotas.slice(start, start + size);
                    });
                    self.iqMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.iqInventoryQuotas().length / self.iqPageSize()) - 1;
                    });
                    self.iqAllPages = ko.dependentObservable(function () {
                        var iqPages = [];
                        for (i = 0; i <= self.iqMaxPageIndex() ; i++) {
                            iqPages.push({ iqPageNumber: (i + 1) });
                        }
                        return iqPages;
                    });
                    self.iqEdit = function (item) {
                        item.iqCurrentTemplate = 'iqEditTemplate';
                        self.iqOldItem.ProductTypeID = item.iqProductTypeID();
                        self.iqOldItem.MinimumStock = item.iqMinimumStock();
                        self.iqOldItem.MaximumStock = item.iqMaximumStock();
                        self.iqOldItem.SiteID = item.iqSiteID();
                        self.iqSelectedItem(item);
                    };
                    self.iqCancelEdit = function (item) {
                        self.iqSelectedItem().iqCurrentTemplate = 'iqShowTemplate';
                        self.iqSelectedItem().iqProductTypeID(self.iqOldItem.ProductTypeID);
                        self.iqSelectedItem().iqMinimumStock(self.iqOldItem.MinimumStock);
                        self.iqSelectedItem().iqMaximumStock(self.iqOldItem.MaximumStock);
                        self.iqSelectedItem().iqSiteID(self.iqOldItem.SiteID);
                        self.iqOldItem = {};
                        self.iqSelectedItem(null);
                    };
                    self.iqCancelAdd = function (item) {
                        self.iqSelectedItem().iqCurrentTemplate = 'iqShowTemplate';
                        self.iqSelectedItem(null);
                        self.iqInventoryQuotas.remove(item);
                    };
                    self.iqAdd = function () {
                        var newItem = new InventoryQuota();
                        newItem.iqID(9999);
                        newItem.iqCurrentTemplate = 'iqAddTemplate';
                        self.iqInventoryQuotas.push(newItem);
                        self.iqSelectedItem(newItem);
                        self.iqMoveToPage(self.iqMaxPageIndex());
                    };
                    self.iqRemove = function (item) {
                        if (item.iqID()) {
                            if (confirm('Are you sure you wish to delete this inventory quota?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/InventoryQuotas/' + item.iqID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.iqSiteID(), success:
                                        function (result) {
                                            self.iqInventoryQuotas.remove(item);
                                            if (self.iqPageIndex() > self.iqMaxPageIndex()) {
                                                self.iqMoveToPage(self.iqMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.iqInventoryQuotas.remove(item);
                            if (self.iqPageIndex() > self.iqMaxPageIndex()) {
                                self.iqMoveToPage(self.iqMaxPageIndex());
                            }
                        }
                    };
                    self.iqSaveAdd = function () {
                        if (self.iqSelectedItem().errors().length === 0) {
                            var item = self.iqSelectedItem();
                            var dataItem = {
                                ID: item.iqID(), ProductTypeID: item.iqProductTypeID(), MinimumStock: item.iqMinimumStock(), MaximumStock: item.iqMaximumStock(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.iqSiteID(), EntryByUserID: item.iqEntryByUserID(),
                                TransactionDateTime: item.iqTransactionDateTime()
                            };
                            $.post('api/InventoryQuotas', dataItem, function (result) {
                                item.iqID(result.ID);
                                item.iqCurrentTemplate = null;
                                self.iqSelectedItem(null);
                            });
                        } else {
                            self.iqSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.iqSaveEdit = function () {
                        if (self.iqSelectedItem().errors().length === 0) {
                            var item = self.iqSelectedItem();
                            var dataItem = {
                                ID: item.iqID(), ProductTypeID: item.iqProductTypeID(), MinimumStock: item.iqMinimumStock(), MaximumStock: item.iqMaximumStock(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.iqSiteID(), EntryByUserID: item.iqEntryByUserID(),
                                TransactionDateTime: item.iqTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/InventoryQuotas/' + item.iqID(), data: dataItem, success:
                                    function (result) {
                                        item.iqCurrentTemplate = 'iqShowTemplate';
                                        self.iqSelectedItem(null);
                                    }
                            });
                        } else {
                            self.iqSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.iqTemplateToUse = function (item) {
                        return self.iqSelectedItem() === item && item.iqCurrentTemplate === 'iqEditTemplate' ? 'iqEditTemplate' :
                            self.iqSelectedItem() === item && item.iqCurrentTemplate === 'iqAddTemplate' ? 'iqAddTemplate' : 'iqShowTemplate';
                    };
                    self.iqPreviousPage = function () {
                        if (self.iqPageIndex() > 0) {
                            self.iqPageIndex(self.iqPageIndex() - 1);
                        }
                    };
                    self.iqNextPage = function () {
                        if (self.iqPageIndex() < self.iqMaxPageIndex()) {
                            self.iqPageIndex(self.iqPageIndex() + 1);
                        }
                    };
                    self.iqMoveToPage = function (index) {
                        self.iqPageIndex(index);
                    };


                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 2) {
                                self.iqInventoryQuotas(self.lastArray);
                                self.doneLoading = true;
                                self.iqCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/InventoryQuotas' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new InventoryQuota(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/ProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.iqProductTypes($.map(data, function (item) {
                                    return new ProductType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var iqInventoryQuotasViewModel = new InventoryQuotasViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(iqInventoryQuotasViewModel, document.getElementById('main'));
                }
            }

            function MenuCategoriesPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function MenuCategoriesViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.mcMenuCategories = ko.observableArray();
                    self.mcUserSites = ko.observableArray(UIUserSites);
                    self.mcPageSize = ko.observable(5);
                    self.mcPageIndex = ko.observable(0);
                    self.mcSelectedItem = ko.observable();
                    self.mcOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.mcUserSites().length; i++) {
                            if (self.mcUserSites()[i].SiteID == siteID()) {
                                return self.mcUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostMenuCategory'))) {
                            return true;
                        }
                        return false;
                    }
                    self.mcCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.mcPagedList = ko.dependentObservable(function () {
                        var size = self.mcPageSize();
                        var start = self.mcPageIndex() * size;
                        return self.mcMenuCategories.slice(start, start + size);
                    });
                    self.mcMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.mcMenuCategories().length / self.mcPageSize()) - 1;
                    });
                    self.mcAllPages = ko.dependentObservable(function () {
                        var mcPages = [];
                        for (i = 0; i <= self.mcMaxPageIndex() ; i++) {
                            mcPages.push({ mcPageNumber: (i + 1) });
                        }
                        return mcPages;
                    });
                    self.mcEdit = function (item) {
                        item.mcCurrentTemplate = 'mcEditTemplate';
                        self.mcOldItem.Name = item.mcName();
                        self.mcOldItem.SiteID = item.mcSiteID();
                        self.mcSelectedItem(item);
                    };
                    self.mcCancelEdit = function (item) {
                        self.mcSelectedItem().mcCurrentTemplate = 'mcShowTemplate';
                        self.mcSelectedItem().mcName(self.mcOldItem.Name);
                        self.mcSelectedItem().mcSiteID(self.mcOldItem.SiteID);
                        self.mcOldItem = {};
                        self.mcSelectedItem(null);
                    };
                    self.mcCancelAdd = function (item) {
                        self.mcSelectedItem().mcCurrentTemplate = 'mcShowTemplate';
                        self.mcSelectedItem(null);
                        self.mcMenuCategories.remove(item);
                    };
                    self.mcAdd = function () {
                        var newItem = new MenuCategory();
                        newItem.mcID(9999);
                        newItem.mcCurrentTemplate = 'mcAddTemplate';
                        self.mcMenuCategories.push(newItem);
                        self.mcSelectedItem(newItem);
                        self.mcMoveToPage(self.mcMaxPageIndex());
                    };
                    self.mcRemove = function (item) {
                        if (item.mcID()) {
                            if (confirm('Are you sure you wish to delete this vendor menu category?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/MenuCategories/' + item.mcID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.mcSiteID(), success:
                                        function (result) {
                                            self.mcMenuCategories.remove(item);
                                            if (self.mcPageIndex() > self.mcMaxPageIndex()) {
                                                self.mcMoveToPage(self.mcMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.mcMenuCategories.remove(item);
                            if (self.mcPageIndex() > self.mcMaxPageIndex()) {
                                self.mcMoveToPage(self.mcMaxPageIndex());
                            }
                        }
                    };
                    self.mcSaveAdd = function () {
                        if (self.mcSelectedItem().errors().length === 0) {
                            var item = self.mcSelectedItem();
                            var dataItem = {
                                ID: item.mcID(), Name: item.mcName(),
                                SiteID: item.mcSiteID(), EntryByUserID: item.mcEntryByUserID(), TransactionDateTime: item.mcTransactionDateTime(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded
                            };
                            $.post('api/MenuCategories', dataItem, function (result) {
                                item.mcID(result.ID);
                                item.mcCurrentTemplate = null;
                                self.mcSelectedItem(null);
                            });
                        } else {
                            self.mcSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.mcSaveEdit = function () {
                        if (self.mcSelectedItem().errors().length === 0) {
                            var item = self.mcSelectedItem();
                            var dataItem = {
                                ID: item.mcID(), Name: item.mcName(),
                                SiteID: item.mcSiteID(), EntryByUserID: item.mcEntryByUserID(), TransactionDateTime: item.mcTransactionDateTime(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/MenuCategories/' + item.mcID(), data: dataItem, success:
                                    function (result) {
                                        item.mcCurrentTemplate = 'mcShowTemplate';
                                        self.mcSelectedItem(null);
                                    }
                            });
                        } else {
                            self.mcSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.mcTemplateToUse = function (item) {
                        return self.mcSelectedItem() === item && item.mcCurrentTemplate === 'mcEditTemplate' ? 'mcEditTemplate' :
                            self.mcSelectedItem() === item && item.mcCurrentTemplate === 'mcAddTemplate' ? 'mcAddTemplate' : 'mcShowTemplate';
                    };
                    self.mcPreviousPage = function () {
                        if (self.mcPageIndex() > 0) {
                            self.mcPageIndex(self.mcPageIndex() - 1);
                        }
                    };
                    self.mcNextPage = function () {
                        if (self.mcPageIndex() < self.mcMaxPageIndex()) {
                            self.mcPageIndex(self.mcPageIndex() + 1);
                        }
                    };
                    self.mcMoveToPage = function (index) {
                        self.mcPageIndex(index);
                    };

                    if (UILoginUserID && UILoginPassword) {
                        $.get('api/MenuCategories' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.mcMenuCategories($.map(data, function (item) {
                                    return new MenuCategory(item);
                                }));
                                self.doneLoading = true;
                                self.mcCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var mcMenuCategoriesViewModel = new MenuCategoriesViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(mcMenuCategoriesViewModel, document.getElementById('main'));
                }
            }

            function MenuItemsPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function MenuItemsViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.miMenuItems = ko.observableArray();
                    self.miMenuCategories = ko.observableArray();
                    self.miProductTypes = ko.observableArray();
                    self.miUserSites = ko.observableArray(UIUserSites);
                    self.miPageSize = ko.observable(5);
                    self.miPageIndex = ko.observable(0);
                    self.miSelectedItem = ko.observable();
                    self.miOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.miUserSites().length; i++) {
                            if (self.miUserSites()[i].SiteID == siteID()) {
                                return self.miUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getMIMenuCategoryByID = function (menuCategoryID) {
                        if (menuCategoryID) {
                            for (var i = 0; i < self.miMenuCategories().length; i++) {
                                if (self.miMenuCategories()[i].mcID() == menuCategoryID) {
                                    return self.miMenuCategories()[i].mcName();
                                }
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostMenuItem'))) {
                            return true;
                        }
                        return false;
                    }
                    self.miCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.miPagedList = ko.dependentObservable(function () {
                        var size = self.miPageSize();
                        var start = self.miPageIndex() * size;
                        return self.miMenuItems.slice(start, start + size);
                    });
                    self.miMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.miMenuItems().length / self.miPageSize()) - 1;
                    });
                    self.miAllPages = ko.dependentObservable(function () {
                        var miPages = [];
                        for (i = 0; i <= self.miMaxPageIndex() ; i++) {
                            miPages.push({ miPageNumber: (i + 1) });
                        }
                        return miPages;
                    });
                    self.miEdit = function (item) {
                        item.miCurrentTemplate = 'miEditTemplate';
                        self.miOldItem.MenuCategoryID = item.miMenuCategoryID();
                        self.miOldItem.Name = item.miName();
                        self.miOldItem.Description = item.miDescription();
                        self.miOldItem.Image = item.miImage();
                        self.miOldItem.SiteID = item.miSiteID();
                        self.miSelectedItem(item);
                    };
                    self.miCancelEdit = function (item) {
                        self.miSelectedItem().miCurrentTemplate = 'miShowTemplate';
                        self.miSelectedItem().miMenuCategoryID(self.miOldItem.MenuCategoryID);
                        self.miSelectedItem().miName(self.miOldItem.Name);
                        self.miSelectedItem().miDescription(self.miOldItem.Description);
                        self.miSelectedItem().miImage(self.miOldItem.Image);
                        self.miSelectedItem().miSiteID(self.miOldItem.SiteID);
                        self.miOldItem = {};
                        self.miSelectedItem(null);
                    };
                    self.miCancelAdd = function (item) {
                        self.miSelectedItem().miCurrentTemplate = 'miShowTemplate';
                        self.miSelectedItem(null);
                        self.miMenuItems.remove(item);
                    };
                    self.miAdd = function () {
                        var newItem = new MenuItem();
                        newItem.miID(9999);
                        newItem.miCurrentTemplate = 'miAddTemplate';
                        self.miMenuItems.push(newItem);
                        self.miSelectedItem(newItem);
                        self.miMoveToPage(self.miMaxPageIndex());
                    };
                    self.miRemove = function (item) {
                        if (item.miID()) {
                            if (confirm('Are you sure you wish to delete this menu item?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/MenuItems/' + item.miID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.miSiteID(), success:
                                        function (result) {
                                            self.miMenuItems.remove(item);
                                            if (self.miPageIndex() > self.miMaxPageIndex()) {
                                                self.miMoveToPage(self.miMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.miMenuItems.remove(item);
                            if (self.miPageIndex() > self.miMaxPageIndex()) {
                                self.miMoveToPage(self.miMaxPageIndex());
                            }
                        }
                    };
                    self.miSaveAdd = function () {
                        if (self.miSelectedItem().errors().length === 0) {
                            var item = self.miSelectedItem();
                            var dataItem = {
                                ID: item.miID(), MenuCategoryID: item.miMenuCategoryID(), Name: item.miName(), Description: item.miDescription(), Image: item.miImage(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.miSiteID(), EntryByUserID: item.miEntryByUserID(),
                                TransactionDateTime: item.miTransactionDateTime()
                            };
                            $.post('api/MenuItems', dataItem, function (result) {
                                item.miID(result.ID);
                                item.miCurrentTemplate = null;
                                self.miSelectedItem(null);
                            });
                        } else {
                            self.miSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.miSaveEdit = function () {
                        if (self.miSelectedItem().errors().length === 0) {
                            var item = self.miSelectedItem();
                            var dataItem = {
                                ID: item.miID(), MenuCategoryID: item.miMenuCategoryID(), Name: item.miName(), Description: item.miDescription(), Image: item.miImage(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.miSiteID(), EntryByUserID: item.miEntryByUserID(),
                                TransactionDateTime: item.miTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/MenuItems/' + item.miID(), data: dataItem, success:
                                    function (result) {
                                        item.miCurrentTemplate = 'miShowTemplate';
                                        self.miSelectedItem(null);
                                    }
                            });
                        } else {
                            self.miSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.miTemplateToUse = function (item) {
                        return self.miSelectedItem() === item && item.miCurrentTemplate === 'miEditTemplate' ? 'miEditTemplate' :
                            self.miSelectedItem() === item && item.miCurrentTemplate === 'miAddTemplate' ? 'miAddTemplate' : 'miShowTemplate';
                    };
                    self.miPreviousPage = function () {
                        if (self.miPageIndex() > 0) {
                            self.miPageIndex(self.miPageIndex() - 1);
                        }
                    };
                    self.miNextPage = function () {
                        if (self.miPageIndex() < self.miMaxPageIndex()) {
                            self.miPageIndex(self.miPageIndex() + 1);
                        }
                    };
                    self.miMoveToPage = function (index) {
                        self.miPageIndex(index);
                    };


                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 2) {
                                self.miMenuItems(self.lastArray);
                                self.doneLoading = true;
                                self.miCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/MenuItems' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new MenuItem(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/MenuCategories' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.miMenuCategories($.map(data, function (item) {
                                    return new MenuCategory(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var miMenuItemsViewModel = new MenuItemsViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(miMenuItemsViewModel, document.getElementById('main'));
                }
            }

            function MenuItemIngredientsPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function MenuItemIngredientsViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.miiMenuItemIngredients = ko.observableArray();
                    self.miiMenuItems = ko.observableArray();
                    self.miiProductTypes = ko.observableArray();
                    self.miiProductMeasurementTypes = ko.observableArray();
                    self.miiUserSites = ko.observableArray(UIUserSites);
                    self.miiPageSize = ko.observable(5);
                    self.miiPageIndex = ko.observable(0);
                    self.miiSelectedItem = ko.observable();
                    self.miiOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.miiUserSites().length; i++) {
                            if (self.miiUserSites()[i].SiteID == siteID()) {
                                return self.miiUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getMIIMenuItemByID = function (menuItemID) {
                        for (var i = 0; i < self.miiMenuItems().length; i++) {
                            if (self.miiMenuItems()[i].miID() == menuItemID) {
                                return self.miiMenuItems()[i].miName();
                            }
                        }
                        return 'undefined';
                    }
                    self.getMIIProductTypeByID = function (productTypeID) {
                        for (var i = 0; i < self.miiProductTypes().length; i++) {
                            if (self.miiProductTypes()[i].ptID() == productTypeID) {
                                for (var j = 0; j < self.miiProductMeasurementTypes().length; j++) {
                                    if (self.miiProductTypes()[i].ptProductMeasurementTypeID() == self.miiProductMeasurementTypes()[j].pmtID()) {
                                        return self.miiProductTypes()[i].ptName() + ' (' + self.miiProductMeasurementTypes()[j].pmtName() + ')';
                                    }
                                }
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostMenuItemIngredient'))) {
                            return true;
                        }
                        return false;
                    }
                    self.miiCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.miiPagedList = ko.dependentObservable(function () {
                        var size = self.miiPageSize();
                        var start = self.miiPageIndex() * size;
                        return self.miiMenuItemIngredients.slice(start, start + size);
                    });
                    self.miiMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.miiMenuItemIngredients().length / self.miiPageSize()) - 1;
                    });
                    self.miiAllPages = ko.dependentObservable(function () {
                        var miiPages = [];
                        for (i = 0; i <= self.miiMaxPageIndex() ; i++) {
                            miiPages.push({ miiPageNumber: (i + 1) });
                        }
                        return miiPages;
                    });
                    self.miiEdit = function (item) {
                        item.miiCurrentTemplate = 'miiEditTemplate';
                        self.miiOldItem.MenuItemID = item.miiMenuItemID();
                        self.miiOldItem.ProductTypeID = item.miiProductTypeID();
                        self.miiOldItem.Quantity = item.miiQuantity();
                        self.miiOldItem.SiteID = item.miiSiteID();
                        self.miiSelectedItem(item);
                    };
                    self.miiCancelEdit = function (item) {
                        self.miiSelectedItem().miiCurrentTemplate = 'miiShowTemplate';
                        self.miiSelectedItem().miiMenuItemID(self.miiOldItem.MenuItemID);
                        self.miiSelectedItem().miiProductTypeID(self.miiOldItem.ProductTypeID);
                        self.miiSelectedItem().miiQuantity(self.miiOldItem.Quantity);
                        self.miiSelectedItem().miiSiteID(self.miiOldItem.SiteID);
                        self.miiOldItem = {};
                        self.miiSelectedItem(null);
                    };
                    self.miiCancelAdd = function (item) {
                        self.miiSelectedItem().miiCurrentTemplate = 'miiShowTemplate';
                        self.miiSelectedItem(null);
                        self.miiMenuItemIngredients.remove(item);
                    };
                    self.miiAdd = function () {
                        var newItem = new MenuItemIngredient();
                        newItem.miiID(9999);
                        newItem.miiCurrentTemplate = 'miiAddTemplate';
                        self.miiMenuItemIngredients.push(newItem);
                        self.miiSelectedItem(newItem);
                        self.miiMoveToPage(self.miiMaxPageIndex());
                    };
                    self.miiRemove = function (item) {
                        if (item.miiID()) {
                            if (confirm('Are you sure you wish to delete this menu item ingredient?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/MenuItemIngredients/' + item.miiID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.miiSiteID(), success:
                                        function (result) {
                                            self.miiMenuItemIngredients.remove(item);
                                            if (self.miiPageIndex() > self.miiMaxPageIndex()) {
                                                self.miiMoveToPage(self.miiMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.miiMenuItemIngredients.remove(item);
                            if (self.miiPageIndex() > self.miiMaxPageIndex()) {
                                self.miiMoveToPage(self.miiMaxPageIndex());
                            }
                        }
                    };
                    self.miiSaveAdd = function () {
                        if (self.miiSelectedItem().errors().length === 0) {
                            var item = self.miiSelectedItem();
                            var dataItem = {
                                ID: item.miiID(), MenuItemID: item.miiMenuItemID(), ProductTypeID: item.miiProductTypeID(), Quantity: item.miiQuantity(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.miiSiteID(), EntryByUserID: item.miiEntryByUserID(),
                                TransactionDateTime: item.miiTransactionDateTime()
                            };
                            $.post('api/MenuItemIngredients', dataItem, function (result) {
                                item.miiID(result.ID);
                                item.miiCurrentTemplate = null;
                                self.miiSelectedItem(null);
                            });
                        } else {
                            self.miiSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.miiSaveEdit = function () {
                        if (self.miiSelectedItem().errors().length === 0) {
                            var item = self.miiSelectedItem();
                            var dataItem = {
                                ID: item.miiID(), MenuItemID: item.miiMenuItemID(), ProductTypeID: item.miiProductTypeID(), Quantity: item.miiQuantity(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.miiSiteID(), EntryByUserID: item.miiEntryByUserID(),
                                TransactionDateTime: item.miiTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/MenuItemIngredients/' + item.miiID(), data: dataItem, success:
                                    function (result) {
                                        item.miiCurrentTemplate = 'miShowTemplate';
                                        self.miiSelectedItem(null);
                                    }
                            });
                        } else {
                            self.miiSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.miiTemplateToUse = function (item) {
                        return self.miiSelectedItem() === item && item.miiCurrentTemplate === 'miiEditTemplate' ? 'miiEditTemplate' :
                            self.miiSelectedItem() === item && item.miiCurrentTemplate === 'miiAddTemplate' ? 'miiAddTemplate' : 'miiShowTemplate';
                    };
                    self.miiPreviousPage = function () {
                        if (self.miiPageIndex() > 0) {
                            self.miiPageIndex(self.miiPageIndex() - 1);
                        }
                    };
                    self.miiNextPage = function () {
                        if (self.miiPageIndex() < self.miiMaxPageIndex()) {
                            self.miiPageIndex(self.miiPageIndex() + 1);
                        }
                    };
                    self.miiMoveToPage = function (index) {
                        self.miiPageIndex(index);
                    };


                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 4) {
                                self.miiMenuItemIngredients(self.lastArray);
                                self.doneLoading = true;
                                self.miiCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/MenuItemIngredients' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new MenuItemIngredient(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/MenuItems' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.miiMenuItems($.map(data, function (item) {
                                    return new MenuItem(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/ProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.miiProductTypes($.map(data, function (item) {
                                    return new ProductType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/ProductMeasurementTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.miiProductMeasurementTypes($.map(data, function (item) {
                                    return new ProductMeasurementType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var miiMenuItemIngredientsViewModel = new MenuItemIngredientsViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(miiMenuItemIngredientsViewModel, document.getElementById('main'));
                }
            }

            function MenuItemPricesPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function MenuItemPricesViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.mipMenuItemPrices = ko.observableArray();
                    self.mipMenuItems = ko.observableArray();
                    self.mipUserSites = ko.observableArray(UIUserSites);
                    self.mipPageSize = ko.observable(5);
                    self.mipPageIndex = ko.observable(0);
                    self.mipSelectedItem = ko.observable();
                    self.mipOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.mipUserSites().length; i++) {
                            if (self.mipUserSites()[i].SiteID == siteID()) {
                                return self.mipUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getMIPMenuItemByID = function (menuItemID) {
                        for (var i = 0; i < self.mipMenuItems().length; i++) {
                            if (self.mipMenuItems()[i].miID() == menuItemID) {
                                return self.mipMenuItems()[i].miName();
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostMenuItemPrice'))) {
                            return true;
                        }
                        return false;
                    }
                    self.mipCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.mipPagedList = ko.dependentObservable(function () {
                        var size = self.mipPageSize();
                        var start = self.mipPageIndex() * size;
                        return self.mipMenuItemPrices.slice(start, start + size);
                    });
                    self.mipMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.mipMenuItemPrices().length / self.mipPageSize()) - 1;
                    });
                    self.mipAllPages = ko.dependentObservable(function () {
                        var mipPages = [];
                        for (i = 0; i <= self.mipMaxPageIndex() ; i++) {
                            mipPages.push({ mipPageNumber: (i + 1) });
                        }
                        return mipPages;
                    });
                    self.mipEdit = function (item) {
                        item.mipCurrentTemplate = 'mipEditTemplate';
                        self.mipOldItem.MenuItemID = item.mipMenuItemID();
                        self.mipOldItem.Price = item.mipPrice();
                        self.mipOldItem.StartDate = item.mipStartDate();
                        self.mipOldItem.EndDate = item.mipEndDate();
                        self.mipOldItem.SiteID = item.mipSiteID();
                        self.mipSelectedItem(item);
                    };
                    self.mipCancelEdit = function (item) {
                        self.mipSelectedItem().mipCurrentTemplate = 'mipShowTemplate';
                        self.mipSelectedItem().mipMenuItemID(self.mipOldItem.MenuItemID);
                        self.mipSelectedItem().mipPrice(self.mipOldItem.Price);
                        self.mipSelectedItem().mipStartDate(self.mipOldItem.StartDate);
                        self.mipSelectedItem().mipEndDate(self.mipOldItem.EndDate);
                        self.mipSelectedItem().mipSiteID(self.mipOldItem.SiteID);
                        self.mipOldItem = {};
                        self.mipSelectedItem(null);
                    };
                    self.mipCancelAdd = function (item) {
                        self.mipSelectedItem().mipCurrentTemplate = 'mipShowTemplate';
                        self.mipSelectedItem(null);
                        self.mipMenuItemPrices.remove(item);
                    };
                    self.mipAdd = function () {
                        var newItem = new MenuItemPrice();
                        newItem.mipID(9999);
                        newItem.mipCurrentTemplate = 'mipAddTemplate';
                        self.mipMenuItemPrices.push(newItem);
                        self.mipSelectedItem(newItem);
                        self.mipMoveToPage(self.mipMaxPageIndex());
                    };
                    self.mipRemove = function (item) {
                        if (item.mipID()) {
                            if (confirm('Are you sure you wish to delete this menu item price?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/MenuItemPrices/' + item.mipID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.mipSiteID(), success:
                                        function (result) {
                                            self.mipMenuItemPrices.remove(item);
                                            if (self.mipPageIndex() > self.mipMaxPageIndex()) {
                                                self.mipMoveToPage(self.mipMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.mipMenuItemPrices.remove(item);
                            if (self.mipPageIndex() > self.mipMaxPageIndex()) {
                                self.mipMoveToPage(self.mipMaxPageIndex());
                            }
                        }
                    };
                    self.mipSaveAdd = function () {
                        if (self.mipSelectedItem().errors().length === 0) {
                            var item = self.mipSelectedItem();
                            var dataItem = {
                                ID: item.mipID(), MenuItemID: item.mipMenuItemID(), Price: item.mipPrice(), StartDate: item.mipStartDate(), EndDate: item.mipEndDate(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.mipSiteID(), EntryByUserID: item.mipEntryByUserID(),
                                TransactionDateTime: item.mipTransactionDateTime()
                            };
                            $.post('api/MenuItemPrices', dataItem, function (result) {
                                item.mipID(result.ID);
                                item.mipCurrentTemplate = null;
                                self.mipSelectedItem(null);
                            });
                        } else {
                            self.mipSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.mipSaveEdit = function () {
                        if (self.mipSelectedItem().errors().length === 0) {
                            var item = self.mipSelectedItem();
                            var dataItem = {
                                ID: item.mipID(), MenuItemID: item.mipMenuItemID(), Price: item.mipPrice(), StartDate: item.mipStartDate(), EndDate: item.mipEndDate(),
                                UILoginUserID: UILoginUserID, UILoginPassword: UILoginPasswordUnencoded, SiteID: item.mipSiteID(), EntryByUserID: item.mipEntryByUserID(),
                                TransactionDateTime: item.mipTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/MenuItemPrices/' + item.mipID(), data: dataItem, success:
                                    function (result) {
                                        item.mipCurrentTemplate = 'miShowTemplate';
                                        self.mipSelectedItem(null);
                                    }
                            });
                        } else {
                            self.mipSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.mipTemplateToUse = function (item) {
                        return self.mipSelectedItem() === item && item.mipCurrentTemplate === 'mipEditTemplate' ? 'mipEditTemplate' :
                            self.mipSelectedItem() === item && item.mipCurrentTemplate === 'mipAddTemplate' ? 'mipAddTemplate' : 'mipShowTemplate';
                    };
                    self.mipPreviousPage = function () {
                        if (self.mipPageIndex() > 0) {
                            self.mipPageIndex(self.mipPageIndex() - 1);
                        }
                    };
                    self.mipNextPage = function () {
                        if (self.mipPageIndex() < self.mipMaxPageIndex()) {
                            self.mipPageIndex(self.mipPageIndex() + 1);
                        }
                    };
                    self.mipMoveToPage = function (index) {
                        self.mipPageIndex(index);
                    };


                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 2) {
                                self.mipMenuItemPrices(self.lastArray);
                                self.doneLoading = true;
                                self.mipCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/MenuItemPrices' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new MenuItemPrice(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/MenuItems' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.mipMenuItems($.map(data, function (item) {
                                    return new MenuItem(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var mipMenuItemPricesViewModel = new MenuItemPricesViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(mipMenuItemPricesViewModel, document.getElementById('main'));
                }
            }

            function RequisitionsPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function RequisitionsViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.reqRequisitions = ko.observableArray();
                    self.reqProductTypes = ko.observableArray();
                    self.reqUserSites = ko.observableArray(UIUserSites);                                                                                                                                                                                                                                                                                                                                                       
                    self.reqPageSize = ko.observable(5);
                    self.reqPageIndex = ko.observable(0);
                    self.reqSelectedItem = ko.observable();
                    self.reqOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.reqUserSites().length; i++) {
                            if (self.reqUserSites()[i].SiteID == siteID()) {
                                return self.reqUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.getReqProductTypeByID = function (productTypeID) {
                        for (var x = 0; x < self.reqProductTypes().length; x++) {
                            if (self.reqProductTypes()[x].ptID() == productTypeID) {
                                return self.reqProductTypes()[x].ptName();
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostRequisition'))) {
                            return true;
                        }
                        return false;
                    }
                    self.reqCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.reqPagedList = ko.dependentObservable(function () {
                        var size = self.reqPageSize();
                        var start = self.reqPageIndex() * size;
                        return self.reqRequisitions.slice(start, start + size);
                    });
                    self.reqMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.reqRequisitions().length / self.reqPageSize()) - 1;
                    });
                    self.reqAllPages = ko.dependentObservable(function () {
                        var reqPages = [];
                        for (i = 0; i <= self.reqMaxPageIndex() ; i++) {
                            reqPages.push({ reqPageNumber: (i + 1) });
                        }
                        return reqPages;
                    });
                    self.reqEdit = function (item) {
                        item.reqCurrentTemplate = 'reqEditTemplate';
                        self.reqOldItem.ProductTypeID = item.reqProductTypeID();
                        self.reqOldItem.Quantity = item.reqQuantity();
                        self.reqOldItem.Authorized = item.reqAuthorized();
                        self.reqOldItem.SiteID = item.reqSiteID();
                        self.reqSelectedItem(item);
                    };
                    self.reqCancelEdit = function (item) {
                        self.reqSelectedItem().reqCurrentTemplate = 'reqShowTemplate';
                        self.reqSelectedItem().reqProductTypeID(self.reqOldItem.ProductTypeID);
                        self.reqSelectedItem().reqQuantity(self.reqOldItem.Quantity);
                        self.reqSelectedItem().reqAuthorized(self.reqOldItem.Authorized);
                        self.reqSelectedItem().reqSiteID(self.reqOldItem.SiteID);
                        self.reqOldItem = {};
                        self.reqSelectedItem(null);
                    };
                    self.reqCancelAdd = function (item) {
                        self.reqSelectedItem().reqCurrentTemplate = 'reqShowTemplate';
                        self.reqSelectedItem(null);
                        self.reqRequisitions.remove(item);
                    };
                    self.reqAdd = function () {
                        var newItem = new Requisition();
                        newItem.reqID(9999);
                        newItem.reqCurrentTemplate = 'reqAddTemplate';
                        self.reqRequisitions.push(newItem);
                        self.reqSelectedItem(newItem);
                        self.reqMoveToPage(self.reqMaxPageIndex());
                    };
                    self.reqRemove = function (item) {
                        if (item.reqID()) {
                            if (confirm('Are you sure you wish to delete this requisition?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/Requisitions/' + item.reqID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.reqSiteID(), success:
                                        function (result) {
                                            self.reqRequisitions.remove(item);
                                            if (self.reqPageIndex() > self.reqMaxPageIndex()) {
                                                self.reqMoveToPage(self.reqMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.reqRequisitions.remove(item);
                            if (self.reqPageIndex() > self.reqMaxPageIndex()) {
                                self.reqMoveToPage(self.reqMaxPageIndex());
                            }
                        }
                    };
                    self.reqSaveAdd = function () {
                        if (self.reqSelectedItem().errors().length === 0) {
                            var item = self.reqSelectedItem();
                            var dataItem = {
                                ID: item.reqID(), ProductTypeID: item.reqProductTypeID(), Quantity: item.reqQuantity(),
                                Authorized: item.reqAuthorized(), UILoginUserID: UILoginUserID,
                                UILoginPassword: UILoginPasswordUnencoded, SiteID: item.reqSiteID(), EntryByUserID: item.reqEntryByUserID(),
                                TransactionDateTime: item.reqTransactionDateTime()
                            };
                            $.post('api/Requisitions', dataItem, function (result) {
                                item.reqID(result.ID);
                                item.reqCurrentTemplate = null;
                                self.reqSelectedItem(null);
                            });
                        } else {
                            self.reqSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.reqSaveEdit = function () {
                        if (self.reqSelectedItem().errors().length === 0) {
                            var item = self.reqSelectedItem();
                            var dataItem = {
                                ID: item.reqID(), ProductTypeID: item.reqProductTypeID(), Quantity: item.reqQuantity(),
                                Authorized: item.reqAuthorized(), UILoginUserID: UILoginUserID,
                                UILoginPassword: UILoginPasswordUnencoded, SiteID: item.reqSiteID(), EntryByUserID: item.reqEntryByUserID(),
                                TransactionDateTime: item.reqTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/Requisitions/' + item.reqID(), data: dataItem, success:
                                    function (result) {
                                        item.reqCurrentTemplate = 'reqShowTemplate';
                                        self.reqSelectedItem(null);
                                    }
                            });
                        } else {
                            self.reqSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.reqTemplateToUse = function (item) {
                        return self.reqSelectedItem() === item && item.reqCurrentTemplate === 'reqEditTemplate' ? 'reqEditTemplate' :
                            self.reqSelectedItem() === item && item.reqCurrentTemplate === 'reqAddTemplate' ? 'reqAddTemplate' : 'reqShowTemplate';
                    };
                    self.reqPreviousPage = function () {
                        if (self.reqPageIndex() > 0) {
                            self.reqPageIndex(self.reqPageIndex() - 1);
                        }
                    };
                    self.reqNextPage = function () {
                        if (self.reqPageIndex() < self.reqMaxPageIndex()) {
                            self.reqPageIndex(self.reqPageIndex() + 1);
                        }
                    };
                    self.reqMoveToPage = function (index) {
                        self.reqPageIndex(index);
                    };


                    if (UILoginUserID && UILoginPassword) {
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 2) {
                                self.reqRequisitions(self.lastArray);
                                self.doneLoading = true;
                                self.reqCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }

                        $.get('api/Requisitions' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.lastArray = $.map(data, function (item) {
                                    return new Requisition(item);
                                });
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                        $.get('api/ProductTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.reqProductTypes($.map(data, function (item) {
                                    return new ProductType(item);
                                }));
                                self.checkIfDone();
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var reqsRequisitionsViewModel = new RequisitionsViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(reqsRequisitionsViewModel, document.getElementById('main'));
                }
            }

            function SettlementTypesPage(UILoginUserID, UILoginPassword) {
                var redirectToLoginPage = false;
                function SettlementTypesViewModel(UILoginUserID, UILoginPassword) {
                    var self = this;
                    self.doneLoading = false;
                    self.stSettlementTypes = ko.observableArray();
                    self.stUserSites = ko.observableArray(UIUserSites);
                    self.stPageSize = ko.observable(5);
                    self.stPageIndex = ko.observable(0);
                    self.stSelectedItem = ko.observable();
                    self.stOldItem = {};
                    self.getBusinessName = function (siteID) {
                        for (var i = 0; i < self.stUserSites().length; i++) {
                            if (self.stUserSites()[i].SiteID == siteID()) {
                                return self.stUserSites()[i];
                            }
                        }
                        return 'undefined';
                    }
                    self.shouldMakeAddVisible = function () {
                        if (self.doneLoading && (UIUserIsRoot || UIUserSites.length > 0 || checkControllerActionPermission('PostSettlementType'))) {
                            return true;
                        }
                        return false;
                    }
                    self.stCheckIfCanAdd = ko.observable(self.shouldMakeAddVisible());
                    self.stPagedList = ko.dependentObservable(function () {
                        var size = self.stPageSize();
                        var start = self.stPageIndex() * size;
                        return self.stSettlementTypes.slice(start, start + size);
                    });
                    self.stMaxPageIndex = ko.dependentObservable(function () {
                        return Math.ceil(self.stSettlementTypes().length / self.stPageSize()) - 1;
                    });
                    self.stAllPages = ko.dependentObservable(function () {
                        var stPages = [];
                        for (i = 0; i <= self.stMaxPageIndex() ; i++) {
                            stPages.push({ stPageNumber: (i + 1) });
                        }
                        return stPages;
                    });
                    self.stEdit = function (item) {
                        item.stCurrentTemplate = 'stEditTemplate';
                        self.stOldItem.Quantity = item.stDescription();
                        self.stOldItem.SiteID = item.stSiteID();
                        self.stSelectedItem(item);
                    };
                    self.stCancelEdit = function (item) {
                        self.stSelectedItem().stCurrentTemplate = 'stShowTemplate';
                        self.stSelectedItem().stDescription(self.stOldItem.Description);
                        self.stSelectedItem().stSiteID(self.stOldItem.SiteID);
                        self.stOldItem = {};
                        self.stSelectedItem(null);
                    };
                    self.stCancelAdd = function (item) {
                        self.stSelectedItem().stCurrentTemplate = 'stShowTemplate';
                        self.stSelectedItem(null);
                        self.stSettlementTypes.remove(item);
                    };
                    self.stAdd = function () {
                        var newItem = new SettlementType();
                        newItem.stID(9999);
                        newItem.stCurrentTemplate = 'stAddTemplate';
                        self.stSettlementTypes.push(newItem);
                        self.stSelectedItem(newItem);
                        self.stMoveToPage(self.stMaxPageIndex());
                    };
                    self.stRemove = function (item) {
                        if (item.stID()) {
                            if (confirm('Are you sure you wish to delete this settlement types?')) {
                                $.ajax({
                                    type: 'DELETE', url: 'api/SettlementTypes/' + item.stID() + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword + '&SiteID=' + item.stSiteID(), success:
                                        function (result) {
                                            self.stSettlementTypes.remove(item);
                                            if (self.stPageIndex() > self.stMaxPageIndex()) {
                                                self.stMoveToPage(self.stMaxPageIndex());
                                            }
                                        }
                                });
                            }
                        }
                        else {
                            self.stSettlementTypes.remove(item);
                            if (self.stPageIndex() > self.stMaxPageIndex()) {
                                self.stMoveToPage(self.stMaxPageIndex());
                            }
                        }
                    };
                    self.stSaveAdd = function () {
                        if (self.stSelectedItem().errors().length === 0) {
                            var item = self.stSelectedItem();
                            var dataItem = {
                                ID: item.stID(), Description: item.stDescription(), UILoginUserID: UILoginUserID,
                                UILoginPassword: UILoginPasswordUnencoded, SiteID: item.stSiteID(), EntryByUserID: item.stEntryByUserID(),
                                TransactionDateTime: item.stTransactionDateTime()
                            };
                            $.post('api/SettlementTypes', dataItem, function (result) {
                                item.stID(result.ID);
                                item.stCurrentTemplate = null;
                                self.stSelectedItem(null);
                            });
                        } else {
                            self.stSelectedItem().errors.showAllMessages();
                        }
                    };
                    self.stSaveEdit = function () {
                        if (self.stSelectedItem().errors().length === 0) {
                            var item = self.stSelectedItem();
                            var dataItem = {
                                ID: item.stID(), Description: item.stDescription(), UILoginUserID: UILoginUserID,
                                UILoginPassword: UILoginPasswordUnencoded, SiteID: item.stSiteID(), EntryByUserID: item.stEntryByUserID(),
                                TransactionDateTime: item.stTransactionDateTime()
                            };
                            $.ajax({
                                type: 'PUT', url: 'api/SettlementTypes/' + item.stID(), data: dataItem, success:
                                    function (result) {
                                        item.stCurrentTemplate = 'stShowTemplate';
                                        self.stSelectedItem(null);
                                    }
                            });
                        } else {
                            self.stSelectedItem().errors.showAllMessages();
                        }
                    }
                    self.stTemplateToUse = function (item) {
                        return self.stSelectedItem() === item && item.stCurrentTemplate === 'stEditTemplate' ? 'stEditTemplate' :
                            self.stSelectedItem() === item && item.stCurrentTemplate === 'stAddTemplate' ? 'stAddTemplate' : 'stShowTemplate';
                    };
                    self.stPreviousPage = function () {
                        if (self.stPageIndex() > 0) {
                            self.stPageIndex(self.stPageIndex() - 1);
                        }
                    };
                    self.stNextPage = function () {
                        if (self.stPageIndex() < self.stMaxPageIndex()) {
                            self.stPageIndex(self.stPageIndex() + 1);
                        }
                    };
                    self.stMoveToPage = function (index) {
                        self.stPageIndex(index);
                    };


                    if (UILoginUserID && UILoginPassword) {
                        $.get('api/SettlementTypes' + '?UILoginUserID=' + UILoginUserID + '&UILoginPassword=' + UILoginPassword, function (data, status) {
                            if (!data) {
                                redirectToLoginPage = true;
                                location.hash = '#';
                                toggleSPAPage('HomePage', 'main');
                            } else {
                                self.stSettlementTypes($.map(data, function (item) {
                                    return new SettlementType(item);
                                }));
                                self.doneLoading = true;
                                self.stCheckIfCanAdd(self.shouldMakeAddVisible());
                            }
                        }).fail(function () {
                            redirectToLoginPage = true;
                            location.hash = '#';
                            toggleSPAPage('HomePage', 'main');
                        });
                    } else {
                        redirectToLoginPage = true;
                        window.location = '#LoginPage';
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var stSettlementTypesViewModel = new SettlementTypesViewModel(UILoginUserID, UILoginPassword);

                if (!redirectToLoginPage) {
                    ko.applyBindings(stSettlementTypesViewModel, document.getElementById('main'));
                }
            }

            var refToSecurityViewModel;

            function LoginPage() {
                function LoginPageViewModel() {
                    var self = this;
                    self.Password = ko.observable();
                    self.UserName = ko.observable();
                    self.LoginError = ko.observable();
                    self.Login = function () {
                        self.doneLoading = 0;
                        self.lastArray = [];
                        self.checkIfDone = function () {
                            if (++self.doneLoading == 3) {
                                window.location = '#';
                                toggleSPAPage('HomePage', 'main');
                                self.LoginError(false);
                                refToSecurityViewModel.securityCheckOnProductTypeCategoriesPage(refToSecurityViewModel.checkIfLoggedIn('GetProductTypeCategories'));
                                refToSecurityViewModel.securityCheckOnProductMeasurementTypesPage(refToSecurityViewModel.checkIfLoggedIn('GetProductMeasurementTypes'));
                                refToSecurityViewModel.securityCheckOnProductTypesPage(refToSecurityViewModel.checkIfLoggedIn('GetProductTypes'));
                                refToSecurityViewModel.securityCheckOnVendorsPage(refToSecurityViewModel.checkIfLoggedIn('GetVendors'));
                                refToSecurityViewModel.securityCheckOnVendorContactDetailsPage(refToSecurityViewModel.checkIfLoggedIn('GetVendorContactDetails'));
                                refToSecurityViewModel.securityCheckOnVendorProductTypesPage(refToSecurityViewModel.checkIfLoggedIn('GetVendorProductTypes'));
                                refToSecurityViewModel.securityCheckOnVendorProductTypePricesPage(refToSecurityViewModel.checkIfLoggedIn('GetVendorProductTypePrices'));
                                refToSecurityViewModel.securityCheckOnPurchaseOrdersPage(refToSecurityViewModel.checkIfLoggedIn('GetPurchaseOrders'));
                                refToSecurityViewModel.securityCheckOnInventoriesPage(refToSecurityViewModel.checkIfLoggedIn('GetInventories'));
                                refToSecurityViewModel.securityCheckOnReceivedPage(refToSecurityViewModel.checkIfLoggedIn('GetReceived'));
                                refToSecurityViewModel.securityCheckOnInventoryLocationsPage(refToSecurityViewModel.checkIfLoggedIn('GetInventoryLocations'));
                                refToSecurityViewModel.securityCheckOnInventoryQuotasPage(refToSecurityViewModel.checkIfLoggedIn('GetInventoryQuotas'));
                                refToSecurityViewModel.securityCheckOnMenuCategoriesPage(refToSecurityViewModel.checkIfLoggedIn('GetMenuCategories'));
                                refToSecurityViewModel.securityCheckOnMenuItemsPage(refToSecurityViewModel.checkIfLoggedIn('GetMenuItems'));
                                refToSecurityViewModel.securityCheckOnRequisitionsPage(refToSecurityViewModel.checkIfLoggedIn('GetRequisitions'));
                                refToSecurityViewModel.securityCheckOnSettlementTypesPage(refToSecurityViewModel.checkIfLoggedIn('GetSettlementTypes'));
                                refToSecurityViewModel.securityCheckOnMenuItemIngredientsPage(refToSecurityViewModel.checkIfLoggedIn('GetMenuItemIngredients'));
                                refToSecurityViewModel.securityCheckOnMenuItemPricesPage(refToSecurityViewModel.checkIfLoggedIn('GetMenuItemPrices'));
                                refToSecurityViewModel.showLogin(UILoginUserID && UILoginPassword ? false : true);
                                refToSecurityViewModel.showSignOut(UILoginUserID && UILoginPassword ? true : false);
                            }
                        }

                        $.get('api/Users' + '?UserName=' + encodeURIComponent(self.UserName()) + '&Password=' + encodeURIComponent(self.Password()), null, function (data) {
                            UILoginUserID = data.ID;
                            UILoginPassword = encodeURIComponent(self.Password());
                            UILoginPasswordUnencoded = self.Password();
                            UIUserIsRoot = data.IsRootUser;
                            self.checkIfDone();
                        }).fail(function () {
                            self.UserName('');
                            self.Password('');
                            self.LoginError(true);
                        });
                        $.get('api/Users' + '?UserName=' + encodeURIComponent(self.UserName()) + '&Password=' + encodeURIComponent(self.Password()) + '&Dummy=xxx', null, function (data) {
                            UIUserSites = data;
                            self.checkIfDone();
                        }).fail(function () {
                            self.UserName('');
                            self.Password('');
                            self.LoginError(true);
                        });
                        $.get('api/Users' + '?UserName=' + encodeURIComponent(self.UserName()) + '&Password=' + encodeURIComponent(self.Password()) + '&Dummy=xxx&XDummy=xxx', null, function (data) {
                            UIControllerActionPermissions = data;
                            self.checkIfDone();
                        }).fail(function () {
                            self.UserName('');
                            self.Password('');
                            self.LoginError(true);
                        });
                    }
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var loginPageViewModel = new LoginPageViewModel();

                ko.applyBindings(loginPageViewModel, document.getElementById('main'));
            }

            function Security() {
                function SecurityViewModel() {
                    var self = this;
                    self.UserID = ko.observable();
                    self.Name = ko.observable();
                    self.UserName = ko.observable();
                    self.Password = ko.observable();
                    self.checkIfLoggedIn = function (controllerActionName) {
                        if (!UILoginUserID || !UILoginPassword || !UIControllerActionPermissions) {
                            return false;
                        }
                        if (UIUserIsRoot || isSiteAdminOnAnySite()) {
                            return true;
                        }
                        for (var i = 0; i < UIControllerActionPermissions.length; i++) {
                            if (UIControllerActionPermissions[i].ControllerActionName == controllerActionName) {
                                if (UIControllerActionPermissions[i].Allow) {
                                    return true;
                                }
                            }
                        }
                        return false;
                    }
                    self.securityCheckOnProductTypeCategoriesPage = ko.observable(false);
                    self.securityCheckOnProductMeasurementTypesPage = ko.observable(false);
                    self.securityCheckOnProductTypesPage = ko.observable(false);
                    self.securityCheckOnVendorsPage = ko.observable(false);
                    self.securityCheckOnVendorContactDetailsPage = ko.observable(false);
                    self.securityCheckOnVendorProductTypesPage = ko.observable(false);
                    self.securityCheckOnVendorProductTypePricesPage = ko.observable(false);
                    self.securityCheckOnPurchaseOrdersPage = ko.observable(false);
                    self.securityCheckOnInventoriesPage = ko.observable(false);
                    self.securityCheckOnReceivedPage = ko.observable(false);
                    self.securityCheckOnInventoryLocationsPage = ko.observable(false);
                    self.securityCheckOnInventoryQuotasPage = ko.observable(false);
                    self.securityCheckOnMenuCategoriesPage = ko.observable(false);
                    self.securityCheckOnMenuItemsPage = ko.observable(false);
                    self.securityCheckOnRequisitionsPage = ko.observable(false);
                    self.securityCheckOnSettlementTypesPage = ko.observable(false);
                    self.securityCheckOnMenuItemIngredientsPage = ko.observable(false);
                    self.securityCheckOnMenuItemPricesPage = ko.observable(false);
                    self.showLogin = ko.observable(UILoginUserID && UILoginPassword ? false : true);
                    self.showSignOut = ko.observable(UILoginUserID && UILoginPassword ? true : false);
                }

                ko.validation.init({
                    registerExtenders: true,
                    messagesOnModified: true,
                    insertMessages: true,
                    parseInputAttributes: true,
                    messageTemplate: null
                }, true);

                var securityViewModel = new SecurityViewModel();
                refToSecurityViewModel = securityViewModel;

                ko.applyBindings(securityViewModel, document.getElementById('Secured'));
            }

            Security();

            Sammy(function () {
                this.get('#ProductTypeCategoriesPage', function () {
                    toggleSPAPage('ProductTypeCategoriesPage', 'main');
                });
                this.get('#ProductMeasurementTypesPage', function () {
                    toggleSPAPage('ProductMeasurementTypesPage', 'main');
                });
                this.get('#ProductTypesPage', function () {
                    toggleSPAPage('ProductTypesPage', 'main');
                });
                this.get('#VendorsPage', function () {
                    toggleSPAPage('VendorsPage', 'main');
                });
                this.get('#VendorContactDetailsPage', function () {
                    toggleSPAPage('VendorContactDetailsPage', 'main');
                });
                this.get('#VendorProductTypesPage', function () {
                    toggleSPAPage('VendorProductTypesPage', 'main');
                });
                this.get('#VendorProductTypePricesPage', function () {
                    toggleSPAPage('VendorProductTypePricesPage', 'main');
                });
                this.get('#PurchaseOrdersPage', function () {
                    toggleSPAPage('PurchaseOrdersPage', 'main');
                });
                this.get('#InventoriesPage', function () {
                    toggleSPAPage('InventoriesPage', 'main');
                });
                this.get('#ReceivedPage', function () {
                    toggleSPAPage('ReceivedPage', 'main');
                });
                this.get('#InventoryLocationsPage', function () {
                    toggleSPAPage('InventoryLocationsPage', 'main');
                });
                this.get('#InventoryQuotasPage', function () {
                    toggleSPAPage('InventoryQuotasPage', 'main');
                });
                this.get('#MenuCategoriesPage', function () {
                    toggleSPAPage('MenuCategoriesPage', 'main');
                });
                this.get('#MenuItemsPage', function () {
                    toggleSPAPage('MenuItemsPage', 'main');
                });
                this.get('#RequisitionsPage', function () {
                    toggleSPAPage('RequisitionsPage', 'main');
                });
                this.get('#SettlementTypesPage', function () {
                    toggleSPAPage('SettlementTypesPage', 'main');
                });
                this.get('#MenuItemIngredientsPage', function () {
                    toggleSPAPage('MenuItemIngredientsPage', 'main');
                });
                this.get('#MenuItemPricesPage', function () {
                    toggleSPAPage('MenuItemPricesPage', 'main');
                });
                this.get('#LoginPage', function () {
                    toggleSPAPage('LoginPage', 'main');
                });
                this.get('#LicensePage', function () {
                    $('#main').html($('#LicensePage').html());
                });
                this.get('#SignOutPage', function () {
                    UILoginUserID = null;
                    UILoginPassword = null;
                    UILoginPasswordUnencoded = null;
                    UIUserIsRoot = null;
                    UIUserSites = null;
                    UIControllerActionPermissions = null;

                    refToSecurityViewModel.securityCheckOnProductTypeCategoriesPage(refToSecurityViewModel.checkIfLoggedIn('GetProductTypeCategories'));
                    refToSecurityViewModel.securityCheckOnProductMeasurementTypesPage(refToSecurityViewModel.checkIfLoggedIn('GetProductMeasurementTypes'));
                    refToSecurityViewModel.securityCheckOnProductTypesPage(refToSecurityViewModel.checkIfLoggedIn('GetProductTypes'));
                    refToSecurityViewModel.securityCheckOnVendorsPage(refToSecurityViewModel.checkIfLoggedIn('GetVendors'));
                    refToSecurityViewModel.securityCheckOnVendorContactDetailsPage(refToSecurityViewModel.checkIfLoggedIn('GetVendorContactDetails'));
                    refToSecurityViewModel.securityCheckOnVendorProductTypesPage(refToSecurityViewModel.checkIfLoggedIn('GetVendorProductTypes'));
                    refToSecurityViewModel.securityCheckOnVendorProductTypePricesPage(refToSecurityViewModel.checkIfLoggedIn('GetVendorProductTypePrices'));
                    refToSecurityViewModel.securityCheckOnPurchaseOrdersPage(refToSecurityViewModel.checkIfLoggedIn('GetPurchaseOrders'));
                    refToSecurityViewModel.securityCheckOnInventoriesPage(refToSecurityViewModel.checkIfLoggedIn('GetInventories'));
                    refToSecurityViewModel.securityCheckOnReceivedPage(refToSecurityViewModel.checkIfLoggedIn('GetReceived'));
                    refToSecurityViewModel.securityCheckOnInventoryLocationsPage(refToSecurityViewModel.checkIfLoggedIn('GetInventoryLocations'));
                    refToSecurityViewModel.securityCheckOnInventoryQuotasPage(refToSecurityViewModel.checkIfLoggedIn('GetInventoryQuotas'));
                    refToSecurityViewModel.securityCheckOnMenuCategoriesPage(refToSecurityViewModel.checkIfLoggedIn('GetMenuCategories'));
                    refToSecurityViewModel.securityCheckOnMenuItemsPage(refToSecurityViewModel.checkIfLoggedIn('GetMenuItems'));
                    refToSecurityViewModel.securityCheckOnRequisitionsPage(refToSecurityViewModel.checkIfLoggedIn('GetRequisitions'));
                    refToSecurityViewModel.securityCheckOnSettlementTypesPage(refToSecurityViewModel.checkIfLoggedIn('GetSettlementTypes'));
                    refToSecurityViewModel.securityCheckOnMenuItemIngredientsPage(refToSecurityViewModel.checkIfLoggedIn('GetMenuItemIngredients'));
                    refToSecurityViewModel.securityCheckOnMenuItemPricesPage(refToSecurityViewModel.checkIfLoggedIn('GetMenuItemPrices'));
                    refToSecurityViewModel.showLogin(UILoginUserID && UILoginPassword ? false : true);
                    refToSecurityViewModel.showSignOut(UILoginUserID && UILoginPassword ? true : false);

                    window.location = '#';
                    toggleSPAPage('HomePage', 'main');
                });
                this.get('#RegisterPage', function () {
                    toggleSPAPage('RegisterPage', 'main');
                });
                this.get('', function () {
                    toggleSPAPage('HomePage', 'main');
                });
            }).run();

            $('#copyrightYear').html((new Date()).getFullYear().toString());
        });
    </script>
    <style type="text/css">
        .txtboxStyle {
            padding: 3px;
            font-size: 16px;
            border-style: solid;
            border-radius: 5px;
            border-color: #ebebeb;
            color: #7a7a7a;
            border-width: 1px;
        }

        .validationMessage {
            color: red;
        }
    </style>
</head>
<body>
    <div>
        <div class="jumbotron page-header" style="background-color: black; color: white">
            <table>
                <tr>
                    <td>
                        <img src="Images/tandoori.png" height="150" />
                    </td>
                    <td>
                        <h1>&nbsp;&nbsp;&nbsp;&nbsp;Epic Restaurant Manager</h1>
                    </td>
                </tr>
            </table>
        </div>
        <div id="Secured">
            <nav class="navbar navbar-inverse">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">Epic Restaurant Manager</a>
                    </div>
                    <div>
                        <ul class="nav navbar-nav">
                            <li class="active"><a href="#">Home</a></li>
                            <li class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                    Core
                                    <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li data-bind="visible: securityCheckOnProductTypeCategoriesPage"><a href="#ProductTypeCategoriesPage">Product Type Categories</a></li>
                                    <li data-bind="visible: securityCheckOnProductMeasurementTypesPage"><a href="#ProductMeasurementTypesPage">Product Measurement Types</a></li>
                                    <li data-bind="visible: securityCheckOnProductTypesPage"><a href="#ProductTypesPage">Product Types</a></li>
                                    <li data-bind="visible: securityCheckOnInventoriesPage"><a href="#InventoriesPage">Inventory</a></li>
                                    <li data-bind="visible: securityCheckOnInventoryLocationsPage"><a href="#InventoryLocationsPage">Inventory Locations</a></li>
                                    <li data-bind="visible: securityCheckOnInventoryQuotasPage"><a href="#InventoryQuotasPage">Inventory Quotas</a></li>
                                    <li data-bind="visible: securityCheckOnRequisitionsPage"><a href="#RequisitionsPage">Requisitions</a></li>
                                    <li data-bind="visible: securityCheckOnSettlementTypesPage"><a href="#SettlementTypesPage">Settlement Types</a></li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                    Purchasing
                                    <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li data-bind="visible: securityCheckOnVendorsPage"><a href="#VendorsPage">Vendors</a></li>
                                    <li data-bind="visible: securityCheckOnVendorContactDetailsPage"><a href="#VendorContactDetailsPage">Vendor Contact Details</a></li>
                                    <li data-bind="visible: securityCheckOnVendorProductTypesPage"><a href="#VendorProductTypesPage">Vendor Product Types</a></li>
                                    <li data-bind="visible: securityCheckOnVendorProductTypePricesPage"><a href="#VendorProductTypePricesPage">Vendor Product Type Prices</a></li>
                                    <li data-bind="visible: securityCheckOnPurchaseOrdersPage"><a href="#PurchaseOrdersPage">Purchase Orders</a></li>
                                    <li data-bind="visible: securityCheckOnReceivedPage"><a href="#ReceivedPage">Received</a></li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                    Menu
                                    <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li data-bind="visible: securityCheckOnMenuCategoriesPage"><a href="#MenuCategoriesPage">Menu Categories</a></li>
                                    <li data-bind="visible: securityCheckOnMenuItemsPage"><a href="#MenuItemsPage">Menu Items</a></li>
                                    <li data-bind="visible: securityCheckOnMenuItemIngredientsPage"><a href="#MenuItemIngredientsPage">Menu Item Ingredients</a></li>
                                    <li data-bind="visible: securityCheckOnMenuItemPricesPage"><a href="#MenuItemPricesPage">Menu Item Prices</a></li>
                                </ul>
                            </li>
                        </ul>
                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="#LicensePage">Terms of Use</a></li>
                            <li data-bind="visible: showLogin"><a href="#LoginPage">Login</a></li>
                            <li data-bind="visible: showSignOut"><a href="#SignOutPage">Signout</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
        <div id="main" class="container-fluid">
        </div>
        <footer>
            <p>&copy; <span id="copyrightYear"></span> - <a href="">Akshay Srinivasan</a></p>
        </footer>
    </div>
    <script id="HomePage" type="text/html">
        <h1>Home Page Under Construction</h1>
    </script>
    <script id="LoginPage" type="text/html">
        <div>
            <table cellpadding="20" align="center">
                <tr>
                    <td>
                        <h3>User Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: UserName" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>Password:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: Password" type="password" />
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <a class="btn btn-primary" style="width:100%" data-bind="click: $root.Login" href="#" title="login">Login</a>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <a href="#RegisterPage">Register New User and Restaurant</a>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center" data-bind="visible: LoginError">
                        <span style="color:red">Login failed.  User Name or Password incorrect.</span>
                    </td>
                </tr>
            </table>
        </div>
    </script>
    <script id="RegisterPage" type="text/html">
        <div>
            <table cellpadding="20" align="center">
                <tr>
                    <td>
                        <h3>User Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: UserName" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>Full Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: Name" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>Email Address:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: EmailAddress" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>Phone Number:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: PhoneNumber" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>Address:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: Address" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>City:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: City" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>State:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: State" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>Country:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: Country" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>Zip Code:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: ZipCode" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>Job Title:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: JobTitle" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>Password:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input type="password" class="txtboxStyle" data-bind="value: Password" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>Retype Password:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input class="txtboxStyle" data-bind="value: RetypePassword" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>Photo:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3>
                    </td>
                    <td>
                        <input type="file" data-bind="value: Photo" />
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <a class="btn btn-primary" style="width:100%" data-bind="click: $root.Register" href="#" title="register">Register</a>
                    </td>
                </tr>
            </table>
        </div>
    </script>
    <script id="ProductTypeCategoriesPage" type="text/html">
        <div>
            <h2>Product Type Categories</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.ptcCheckIfCanAdd, click: $root.ptcAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Product Type Category</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: ptcTemplateToUse, foreach: ptcPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: ptcPageIndex() === 0 }">
                    <a href="#" data-bind="click: ptcPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: ptcAllPages">
                <li data-bind="css: { active: $data.ptcPageNumber === ($root.ptcPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.ptcPageNumber, click: function () { $root.ptcMoveToPage($data.ptcPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: ptcPageIndex() === ptcMaxPageIndex() }">
                    <a href="#" data-bind="click: ptcNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="ptcShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: ptcID"></td>
            <td data-bind="text: ptcName"></td>
            <td data-bind="text: ptcDescription"></td>
            <td data-bind="text: $root.getBusinessName($data.ptcSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: ptcCheckIfEditable, click: $root.ptcEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: ptcCheckIfDeletable, click: $root.ptcRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="ptcEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: ptcID" />
            <td>
                <input class="txtboxStyle" data-bind="value: ptcName" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: ptcDescription" />
            </td>
            <td data-bind="text: $root.getBusinessName($data.ptcSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: $root.ptcSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.ptcCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="ptcAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td>
                <input class="txtboxStyle" data-bind="value: ptcName" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: ptcDescription" />
            </td>
            <td><select data-bind="options: $root.ptcUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.ptcSiteID" style="width:100%"></select></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: $root.ptcSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.ptcCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="ProductMeasurementTypesPage" type="text/html">
        <div>
            <h2>Product Measurement Types</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.pmtCheckIfCanAdd, click: $root.pmtAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Product Measurement Type</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: pmtTemplateToUse, foreach: pmtPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: pmtPageIndex() === 0 }">
                    <a href="#" data-bind="click: pmtPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: pmtAllPages">
                <li data-bind="css: { active: $data.pmtPageNumber === ($root.pmtPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.pmtPageNumber, click: function () { $root.pmtMoveToPage($data.pmtPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: pmtPageIndex() === pmtMaxPageIndex() }">
                    <a href="#" data-bind="click: pmtNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="pmtShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: pmtID"></td>
            <td data-bind="text: pmtName"></td>
            <td data-bind="text: pmtDescription"></td>
            <td data-bind="text: $root.getBusinessName($data.pmtSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: pmtCheckIfEditable, click: $root.pmtEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: pmtCheckIfDeletable, click: $root.pmtRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="pmtEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: pmtID" />
            <td>
                <input class="txtboxStyle" data-bind="value: pmtName" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: pmtDescription" />
            </td>
            <td data-bind="text: $root.getBusinessName($data.pmtSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: $root.pmtSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.pmtCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="pmtAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td>
                <input class="txtboxStyle" data-bind="value: pmtName" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: pmtDescription" />
            </td>
            <td><select data-bind="options: $root.pmtUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.pmtSiteID" style="width:100%"></select></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: $root.pmtSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.pmtCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="ProductTypesPage" type="text/html">
        <div>
            <h2>Product Types</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.ptCheckIfCanAdd, click: $root.ptAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Product Type</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Product Type Category</th>
                        <th>Product Measurement Type</th>
                        <th>Image</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: ptTemplateToUse, foreach: ptPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: ptPageIndex() === 0 }">
                    <a href="#" data-bind="click: ptPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: ptAllPages">
                <li data-bind="css: { active: $data.ptPageNumber === ($root.ptPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.ptPageNumber, click: function () { $root.ptMoveToPage($data.ptPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: ptPageIndex() === ptMaxPageIndex() }">
                    <a href="#" data-bind="click: ptNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="ptShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: ptID"></td>
            <td data-bind="text: ptName"></td>
            <td data-bind="text: $root.getProductTypeCategoryByID($data.ptProductTypeCategoryID).ptcName"></td>
            <td data-bind="text: $root.getProductMeasurementTypeByID($data.ptProductMeasurementTypeID).pmtName"></td>
            <td><img src="" data-bind="attr: { src: $data.ptImage() }" height="150"/></td>
            <td data-bind="text: $root.getBusinessName($data.ptSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: ptCheckIfEditable, click: $root.ptEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: ptCheckIfDeletable, click: $root.ptRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="ptEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: ptID" />
            <td><input class="txtboxStyle" data-bind="value: ptName"></td>
            <td><select data-bind="options: $root.ptProductTypeCategories, optionsText: 'ptcName', optionsValue: 'ptcID', value: $data.ptProductTypeCategoryID" style="width:100%"></select></td>
            <td><select data-bind="options: $root.ptProductMeasurementTypes, optionsText: 'pmtName', optionsValue: 'pmtID', value: $data.ptProductMeasurementTypeID" style="width:100%"></select></td>
            <td><input data-bind="event: { change: ptImageFileUpload }" type="file" accept="image/*" class="fileChooser" /></td>
            <td data-bind="text: $root.getBusinessName($data.ptSiteID).SiteName"></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.ptSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.ptCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="ptAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><input class="txtboxStyle" data-bind="value: ptName"></td>
            <td><select data-bind="options: $root.ptProductTypeCategories, optionsText: 'ptcName', optionsValue: 'ptcID', value: $data.ptProductTypeCategoryID" style="width:100%"></select></td>
            <td><select data-bind="options: $root.ptProductMeasurementTypes, optionsText: 'pmtName', optionsValue: 'pmtID', value: $data.ptProductMeasurementTypeID" style="width:100%"></select></td>
            <td><input data-bind="event: { change: ptImageFileUpload }" type="file" accept="image/*" class="fileChooser" /></td>
            <td><select data-bind="options: $root.ptUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.ptSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.ptSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.ptCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="VendorsPage" type="text/html">
        <div>
            <h2>Vendors</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.vCheckIfCanAdd, click: $root.vAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Vendor</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Address</th>
                        <th>City</th>
                        <th>State</th>
                        <th>Country</th>
                        <th>Zip Code</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: vTemplateToUse, foreach: vPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: vPageIndex() === 0 }">
                    <a href="#" data-bind="click: vPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: vAllPages">
                <li data-bind="css: { active: $data.vPageNumber === ($root.vPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.vPageNumber, click: function () { $root.vMoveToPage($data.vPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: vPageIndex() === vMaxPageIndex() }">
                    <a href="#" data-bind="click: vNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="vShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: vID"></td>
            <td data-bind="text: vName"></td>
            <td data-bind="text: vAddress"></td>
            <td data-bind="text: vCity"></td>
            <td data-bind="text: vState"></td>
            <td data-bind="text: vCountry"></td>
            <td data-bind="text: vZipCode"></td>
            <td data-bind="text: $root.getBusinessName($data.vSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: vCheckIfEditable, click: $root.vEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: vCheckIfDeletable, click: $root.vRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="vEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: vID" />
            <td>
                <input class="txtboxStyle" data-bind="value: vName" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: vAddress" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: vCity" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: vState" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: vCountry" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: vZipCode" />
            </td>
            <td data-bind="text: $root.getBusinessName($data.vSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: $root.vSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.vCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="vAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td>
                <input class="txtboxStyle" data-bind="value: vName" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: vAddress" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: vCity" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: vState" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: vCountry" />
            </td>
            <td>
                <input class="txtboxStyle" data-bind="value: vZipCode" />
            </td>
            <td><select data-bind="options: $root.vUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.vSiteID" style="width:100%"></select></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: $root.vSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.vCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="VendorContactDetailsPage" type="text/html">
        <div>
            <h2>Vendor Contact Details</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.vcdCheckIfCanAdd, click: $root.vcdAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Vendor Contact Detail</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Phone Number</th>
                        <th>Vendor</th>
                        <th>Active</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: vcdTemplateToUse, foreach: vcdPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: vcdPageIndex() === 0 }">
                    <a href="#" data-bind="click: vcdPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: vcdAllPages">
                <li data-bind="css: { active: $data.vcdPageNumber === ($root.vcdPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.vcdPageNumber, click: function () { $root.vcdMoveToPage($data.vcdPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: vcdPageIndex() === vcdMaxPageIndex() }">
                    <a href="#" data-bind="click: vcdNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="vcdShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: vcdID"></td>
            <td data-bind="text: vcdName"></td>
            <td data-bind="text: vcdPhoneNumber"></td>
            <td data-bind="text: $root.getVCDVendorByID($data.vcdVendorID).vName"></td>
            <td data-bind="text: vcdActive"></td>
            <td data-bind="text: $root.getBusinessName($data.vcdSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: vcdCheckIfEditable, click: $root.vcdEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: vcdCheckIfDeletable, click: $root.vcdRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="vcdEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: vcdID" />
            <td><input class="txtboxStyle" data-bind="value: vcdName"></td>
            <td><input class="txtboxStyle" data-bind="value: vcdPhoneNumber"></td>
            <td><select data-bind="options: $root.vcdVendors, optionsText: 'vName', optionsValue: 'vID', value: $data.vcdVendorID" style="width:100%"></select></td>
            <td><input type="checkbox" data-bind="checked: vcdActive, checkedValue: vcdActive"></td>
            <td data-bind="text: $root.getBusinessName($data.vcdSiteID).SiteName"></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.vcdSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.vcdCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="vcdAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><input class="txtboxStyle" data-bind="value: vcdName"></td>
            <td><input class="txtboxStyle" data-bind="value: vcdPhoneNumber"></td>
            <td><select data-bind="options: $root.vcdVendors, optionsText: 'vName', optionsValue: 'vID', value: $data.vcdVendorID" style="width:100%"></select></td>
            <td><input type="checkbox" data-bind="checked: vcdActive, checkedValue: vcdActive"></td>
            <td><select data-bind="options: $root.vcdUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.vcdSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.vcdSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.vcdCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="VendorProductTypesPage" type="text/html">
        <div>
            <h2>Vendor Product Types</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.vptCheckIfCanAdd, click: $root.vptAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Vendor Product Type</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Vendor</th>
                        <th>Product Type</th>
                        <th>Description</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: vptTemplateToUse, foreach: vptPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: vptPageIndex() === 0 }">
                    <a href="#" data-bind="click: vptPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: vptAllPages">
                <li data-bind="css: { active: $data.vptPageNumber === ($root.vptPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.vptPageNumber, click: function () { $root.vptMoveToPage($data.vptPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: vptPageIndex() === vptMaxPageIndex() }">
                    <a href="#" data-bind="click: vptNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="vptShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: vptID"></td>
            <td data-bind="text: $root.getVPTVendorByID($data.vptVendorID).vName"></td>
            <td data-bind="text: $root.getVPTProductTypeByID($data.vptProductTypeID).ptName"></td>
            <td data-bind="text: vptDescription"></td>
            <td data-bind="text: $root.getBusinessName($data.vptSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: vptCheckIfEditable, click: $root.vptEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: vptCheckIfDeletable, click: $root.vptRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="vptEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: vptID" />
            <td><select data-bind="options: $root.vptVendors, optionsText: 'vName', optionsValue: 'vID', value: $data.vptVendorID" style="width:100%"></select></td>
            <td><select data-bind="options: $root.vptProductTypes, optionsText: 'ptName', optionsValue: 'ptID', value: $data.vptProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: vptDescription"></td>
            <td data-bind="text: $root.getBusinessName($data.vptSiteID).SiteName"></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.vptSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.vptCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="vptAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><select data-bind="options: $root.vptVendors, optionsText: 'vName', optionsValue: 'vID', value: $data.vptVendorID" style="width:100%"></select></td>
            <td><select data-bind="options: $root.vptProductTypes, optionsText: 'ptName', optionsValue: 'ptID', value: $data.vptProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: vptDescription"></td>
            <td><select data-bind="options: $root.vptUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.vptSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.vptSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.vptCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="VendorProductTypePricesPage" type="text/html">
        <div>
            <h2>Vendor Product Type Prices</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.vptpCheckIfCanAdd, click: $root.vptpAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Vendor Product Type Price</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Vendor Product Type</th>
                        <th>Price</th>
                        <th>Contract Start Date</th>
                        <th>Contract End Date</th>
                        <th>Restaurant</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: vptpTemplateToUse, foreach: vptpPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: vptpPageIndex() === 0 }">
                    <a href="#" data-bind="click: vptpPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: vptpAllPages">
                <li data-bind="css: { active: $data.vptpPageNumber === ($root.vptpPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.vptpPageNumber, click: function () { $root.vptpMoveToPage($data.vptpPageNumber - 1); }"></a>
                </li>
            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: vptpPageIndex() === vptpMaxPageIndex() }">
                    <a href="#" data-bind="click: vptpNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="vptpShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: vptpID"></td>
            <td data-bind="text: $root.getVPTPVendorProductTypeByID($data.vptpVendorProductTypeID())"></td>
            <td data-bind="text: vptpPricePerMeasurementType"></td>
            <td data-bind="text: (new Date(vptpContractStartDate()).getMonth() + 1) + '/' + (new Date(vptpContractStartDate())).getDate() + '/' + (new Date(vptpContractStartDate())).getFullYear()"></td>
            <td data-bind="text: (new Date(vptpContractEndDate()).getMonth() + 1) + '/' + (new Date(vptpContractEndDate())).getDate() + '/' + (new Date(vptpContractEndDate())).getFullYear()"></td>
            <td data-bind="text: $root.getBusinessName($data.vptpSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: vptpCheckIfEditable, click: $root.vptpEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: vptpCheckIfDeletable, click: $root.vptpRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="vptpEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: vptpID" />
            <td><select data-bind="options: $root.vptpVendorProductTypes, optionsText: function(item) { return $root.getVPTPVendorProductTypeByID(item.vptID()); }, optionsValue: 'vptID', value: $data.vptpVendorProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: vptpPricePerMeasurementType"></td>
            <td><input class="txtboxStyle" data-bind="value: vptpContractStartDate" type="date"></td>
            <td><input class="txtboxStyle" data-bind="value: vptpContractEndDate" type="date"></td>
            <td data-bind="text: $root.getBusinessName($data.vptpSiteID).SiteName"></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.vptpSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.vptpCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="vptpAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><select data-bind="options: $root.vptpVendorProductTypes, optionsText: function(item) { return $root.getVPTPVendorProductTypeByID(item.vptID()); }, optionsValue: 'vptID', value: $data.vptpVendorProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: vptpPricePerMeasurementType"></td>
            <td><input class="txtboxStyle" data-bind="value: vptpContractStartDate" type="date"></td>
            <td><input class="txtboxStyle" data-bind="value: vptpContractEndDate" type="date"></td>
            <td><select data-bind="options: $root.vptpUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.vptpSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.vptpSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.vptpCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="PurchaseOrdersPage" type="text/html">
        <div>
            <h2>Purchase Orders</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.poCheckIfCanAdd, click: $root.poAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Purchase Order</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Vendor Product Type</th>
                        <th>Quantity</th>
                        <th>Order Placed On</th>
                        <th>Expected Delivery On</th>
                        <th>Comments</th>
                        <th>Restraunt Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: poTemplateToUse, foreach: poPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: poPageIndex() === 0 }">
                    <a href="#" data-bind="click: poPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: poAllPages">
                <li data-bind="css: { active: $data.poPageNumber === ($root.poPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.poPageNumber, click: function () { $root.poMoveToPage($data.poPageNumber - 1); }"></a>
                </li>
            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: poPageIndex() === poMaxPageIndex() }">
                    <a href="#" data-bind="click: poNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="poShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: poID"></td>
            <td data-bind="text: $root.getPOVendorProductTypeByID($data.poVendorProductTypeID).vptDescription"></td>
            <td data-bind="text: poQuantity"></td>
            <td data-bind="text: (new Date(poOrderPlacedOnDate()).getMonth() + 1) + '/' + (new Date(poOrderPlacedOnDate())).getDate() + '/' + (new Date(poOrderPlacedOnDate())).getFullYear()"></td>
            <td data-bind="text: (new Date(poExpectedDeliveryDate()).getMonth() + 1) + '/' + (new Date(poExpectedDeliveryDate())).getDate() + '/' + (new Date(poExpectedDeliveryDate())).getFullYear()"></td>
            <td data-bind="text: poComments"></td>
            <td data-bind="text: $root.getBusinessName($data.poSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: poCheckIfEditable, click: $root.poEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: poCheckIfDeletable, click: $root.poRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="poEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: poID" />
            <td><select data-bind="options: $root.poVendorProductTypes, optionsText: 'vptDescription', optionsValue: 'vptID', value: $data.poVendorProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: poQuantity"></td>
            <td><input class="txtboxStyle" data-bind="value: poOrderPlacedOnDate" type="date"></td>
            <td><input class="txtboxStyle" data-bind="value: poExpectedDeliveryDate" type="date"></td>
            <td><input class="txtboxStyle" data-bind="value: poComments"></td>
            <td><select data-bind="options: $root.poUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.poSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.poSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.poCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="poAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><select data-bind="options: $root.poVendorProductTypes, optionsText: 'vptDescription', optionsValue: 'vptID', value: $data.poVendorProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: poQuantity"></td>
            <td><input class="txtboxStyle" data-bind="value: poOrderPlacedOnDate" type="date"></td>
            <td><input class="txtboxStyle" data-bind="value: poExpectedDeliveryDate" type="date"></td>
            <td><input class="txtboxStyle" data-bind="value: poComments"></td>
            <td><select data-bind="options: $root.poUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.poSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.poSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.poCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="InventoriesPage" type="text/html">
        <div>
            <h2>Inventory</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.iCheckIfCanAdd, click: $root.iAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Inventory Item</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Product Type</th>
                        <th>Quantity</th>
                        <th>Restraunt Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: iTemplateToUse, foreach: iPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: iPageIndex() === 0 }">
                    <a href="#" data-bind="click: iPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: iAllPages">
                <li data-bind="css: { active: $data.iPageNumber === ($root.iPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.iPageNumber, click: function () { $root.iMoveToPage($data.iPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: iPageIndex() === iMaxPageIndex() }">
                    <a href="#" data-bind="click: iNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="iShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: iID"></td>
            <td data-bind="text: $root.getIProductTypeByID($data.iProductTypeID).ptName"></td>
            <td data-bind="text: iQuantity"></td>
            <td data-bind="text: $root.getBusinessName($data.iSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: iCheckIfEditable, click: $root.iEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: iCheckIfDeletable, click: $root.iRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="iEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: iID" />
            <td data-bind="text: $root.getIProductTypeByID($data.iProductTypeID).ptName"></td>
            <td><input class="txtboxStyle" data-bind="value: iQuantity"></td>
            <td><select data-bind="options: $root.iUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.iSiteID"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.iSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.iCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="iAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><select data-bind="options: $root.iProductTypes, optionsText: 'ptName', optionsValue: 'ptID', value: $data.iProductTypeID"></select></td>
            <td><input class="txtboxStyle" data-bind="value: iQuantity"></td>
            <td><select data-bind="options: $root.iUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.iSiteID"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.iSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.iCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="ReceivedPage" type="text/html">
        <div>
            <h2>Received</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.rCheckIfCanAdd, click: $root.rAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Receiving Item</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Vendor Product Type</th>
                        <th>Quantity</th>
                        <th>Price Paid</th>
                        <th>Received Date</th>
                        <th>Comments</th>
                        <th>Restraunt Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: rTemplateToUse, foreach: rPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: rPageIndex() === 0 }">
                    <a href="#" data-bind="click: rPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: rAllPages">
                <li data-bind="css: { active: $data.rPageNumber === ($root.rPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.rPageNumber, click: function () { $root.rMoveToPage($data.rPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: rPageIndex() === rMaxPageIndex() }">
                    <a href="#" data-bind="click: rNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="rShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: rID"></td>
            <td data-bind="text: $root.getRVendorProductTypeByID($data.rVendorProductTypeID).vptDescription"></td>
            <td data-bind="text: rQuantity"></td>
            <td data-bind="text: rPricePaid"></td>
            <td data-bind="text: (new Date(rReceivedDate()).getMonth() + 1) + '/' + (new Date(rReceivedDate())).getDate() + '/' + (new Date(rReceivedDate())).getFullYear()"></td>
            <td data-bind="text: rComments"></td>
            <td data-bind="text: $root.getBusinessName($data.rSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: rCheckIfEditable, click: $root.rEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: rCheckIfDeletable, click: $root.rRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="rEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: rID" />
            <td><select data-bind="options: $root.rVendorProductTypes, optionsText: 'vptDescription', optionsValue: 'vptID', value: $data.rVendorProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: rQuantity"></td>
            <td><input class="txtboxStyle" data-bind="value: rPricePaid"></td>
            <td><input class="txtboxStyle" data-bind="value: rReceivedDate" type="date"></td>
            <td><input class="txtboxStyle" data-bind="value: rComments"></td>
            <td><select data-bind="options: $root.rUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.rSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.rSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.rCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="rAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><select data-bind="options: $root.rVendorProductTypes, optionsText: 'vptDescription', optionsValue: 'vptID', value: $data.rVendorProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: rQuantity"></td>
            <td><input class="txtboxStyle" data-bind="value: rPricePaid"></td>
            <td><input class="txtboxStyle" data-bind="value: rReceivedDate" type="date"></td>
            <td><input class="txtboxStyle" data-bind="value: rComments"></td>
            <td><select data-bind="options: $root.rUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.rSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.rSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.rCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="InventoryLocationsPage" type="text/html">
        <div>
            <h2>Inventory Locations</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.ilCheckIfCanAdd, click: $root.ilAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Inventory Location</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Product Type</th>
                        <th>Location Description</th>
                        <th>Restraunt Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: ilTemplateToUse, foreach: ilPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: ilPageIndex() === 0 }">
                    <a href="#" data-bind="click: ilPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: ilAllPages">
                <li data-bind="css: { active: $data.ilPageNumber === ($root.ilPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.ilPageNumber, click: function () { $root.ilMoveToPage($data.ilPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: ilPageIndex() === ilMaxPageIndex() }">
                    <a href="#" data-bind="click: ilNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="ilShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: ilID"></td>
            <td data-bind="text: $root.getILProductTypeByID($data.ilProductTypeID())"></td>
            <td data-bind="text: ilLocationDescription"></td>
            <td data-bind="text: $root.getBusinessName($data.ilSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: ilCheckIfEditable, click: $root.ilEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: ilCheckIfDeletable, click: $root.ilRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="ilEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: ilID" />
            <td><select data-bind="options: $root.ilProductTypes, optionsText: 'ptName', optionsValue: 'ptID', value: $data.ilProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: ilLocationDescription"></td>
            <td><select data-bind="options: $root.ilUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.ilSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.ilSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.ilCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="ilAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><select data-bind="options: $root.ilProductTypes, optionsText: 'ptName', optionsValue: 'ptID', value: $data.ilProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: ilLocationDescription"></td>
            <td><select data-bind="options: $root.ilUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.ilSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.ilSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.ilCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="InventoryQuotasPage" type="text/html">
        <div>
            <h2>Inventory Quotas</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.iqCheckIfCanAdd, click: $root.iqAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Inventory Quota</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Product Type</th>
                        <th>Minimum Stock</th>
                        <th>Maximum Stock</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: iqTemplateToUse, foreach: iqPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: iqPageIndex() === 0 }">
                    <a href="#" data-bind="click: iqPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: iqAllPages">
                <li data-bind="css: { active: $data.iqPageNumber === ($root.iqPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.iqPageNumber, click: function () { $root.iqMoveToPage($data.iqPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: iqPageIndex() === iqMaxPageIndex() }">
                    <a href="#" data-bind="click: iqNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="iqShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: iqID"></td>
            <td data-bind="text: $root.getIQProductTypeByID($data.iqProductTypeID())"></td>
            <td data-bind="text: iqMinimumStock"></td>
            <td data-bind="text: iqMaximumStock"></td>
            <td data-bind="text: $root.getBusinessName($data.iqSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: iqCheckIfEditable, click: $root.iqEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: iqCheckIfDeletable, click: $root.iqRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="iqEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: iqID" />
            <td><select data-bind="options: $root.iqProductTypes, optionsText: 'ptName', optionsValue: 'ptID', value: $data.iqProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: iqMinimumStock"></td>
            <td><input class="txtboxStyle" data-bind="value: iqMaximumStock"></td>
            <td><select data-bind="options: $root.iqUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.iqSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.iqSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.iqCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="iqAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><select data-bind="options: $root.iqProductTypes, optionsText: 'ptName', optionsValue: 'ptID', value: $data.iqProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: iqMinimumStock"></td>
            <td><input class="txtboxStyle" data-bind="value: iqMaximumStock"></td>
            <td><select data-bind="options: $root.iqUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.iqSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.iqSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.iqCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="MenuCategoriesPage" type="text/html">
        <div>
            <h2>Menu Categories</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.mcCheckIfCanAdd, click: $root.mcAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Menu Category</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: mcTemplateToUse, foreach: mcPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: mcPageIndex() === 0 }">
                    <a href="#" data-bind="click: mcPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: mcAllPages">
                <li data-bind="css: { active: $data.mcPageNumber === ($root.mcPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.mcPageNumber, click: function () { $root.mcMoveToPage($data.mcPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: mcPageIndex() === mcMaxPageIndex() }">
                    <a href="#" data-bind="click: mcNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="mcShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: mcID"></td>
            <td data-bind="text: mcName"></td>
            <td data-bind="text: $root.getBusinessName($data.mcSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: mcCheckIfEditable, click: $root.mcEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: mcCheckIfDeletable, click: $root.mcRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="mcEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: mcID" />
            <td>
                <input class="txtboxStyle" data-bind="value: mcName" />
            </td>
            <td data-bind="text: $root.getBusinessName($data.mcSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: $root.mcSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.mcCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="mcAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td>
                <input class="txtboxStyle" data-bind="value: mcName" />
            </td>
            <td><select data-bind="options: $root.mcUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.mcSiteID" style="width:100%"></select></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: $root.mcSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.mcCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="MenuItemsPage" type="text/html">
        <div>
            <h2>Menu Items</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.miCheckIfCanAdd, click: $root.miAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Menu Item</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Menu Category</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Image</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: miTemplateToUse, foreach: miPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: miPageIndex() === 0 }">
                    <a href="#" data-bind="click: miPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: miAllPages">
                <li data-bind="css: { active: $data.miPageNumber === ($root.miPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.miPageNumber, click: function () { $root.miMoveToPage($data.miPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: miPageIndex() === miMaxPageIndex() }">
                    <a href="#" data-bind="click: miNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="miShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: miID"></td>
            <td data-bind="text: $root.getMIMenuCategoryByID($data.miMenuCategoryID())"></td>
            <td data-bind="text: miName"></td>
            <td data-bind="text: miDescription"></td>
            <td><img src="" data-bind="attr: { src: $data.miImage() }" height="150" /></td>
            <td data-bind="text: $root.getBusinessName($data.miSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: miCheckIfEditable, click: $root.miEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: miCheckIfDeletable, click: $root.miRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="miEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: miID" />
            <td><select data-bind="options: $root.miMenuCategories, optionsText: 'mcName', optionsValue: 'mcID', value: $data.miMenuCategoryID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: miName"></td>
            <td><input class="txtboxStyle" data-bind="value: miDescription"></td>
            <td><input data-bind="event: { change: miImageFileUpload }" type="file" accept="image/*" class="fileChooser" /></td>
            <td><select data-bind="options: $root.miUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.miSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.miSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.miCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="miAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><select data-bind="options: $root.miMenuCategories, optionsText: 'mcName', optionsValue: 'mcID', value: $data.miMenuCategoryID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: miName"></td>
            <td><input class="txtboxStyle" data-bind="value: miDescription"></td>
            <td><input data-bind="event: { change: miImageFileUpload }" type="file" accept="image/*" class="fileChooser" /></td>
            <td><select data-bind="options: $root.miUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.miSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.miSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.miCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="MenuItemIngredientsPage" type="text/html">
        <div>
            <h2>Menu Item Ingredients</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.miiCheckIfCanAdd, click: $root.miiAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Menu Item Ingredient</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Menu Item</th>
                        <th>Product Type</th>
                        <th>Quantity</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: miiTemplateToUse, foreach: miiPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: miiPageIndex() === 0 }">
                    <a href="#" data-bind="click: miiPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: miiAllPages">
                <li data-bind="css: { active: $data.miiPageNumber === ($root.miiPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.miiPageNumber, click: function () { $root.miiMoveToPage($data.miiPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: miiPageIndex() === miiMaxPageIndex() }">
                    <a href="#" data-bind="click: miiNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="miiShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: miiID"></td>
            <td data-bind="text: $root.getMIIMenuItemByID($data.miiMenuItemID())"></td>
            <td data-bind="text: $root.getMIIProductTypeByID($data.miiProductTypeID())"></td>
            <td data-bind="text: miiQuantity"></td>
            <td data-bind="text: $root.getBusinessName($data.miiSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: miiCheckIfEditable, click: $root.miiEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: miiCheckIfDeletable, click: $root.miiRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="miiEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: miiID" />
            <td><select data-bind="options: $root.miiMenuItems, optionsText: 'miName', optionsValue: 'miID', value: $data.miiMenuItemID" style="width:100%"></select></td>
            <td><select data-bind="options: $root.miiProductTypes, optionsText: function(item) { return $root.getMIIProductTypeByID(item.ptID()); }, optionsValue: 'ptID', value: $data.miiProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: miiQuantity"></td>
            <td><select data-bind="options: $root.miiUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.miiSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.miiSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.miiCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="miiAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><select data-bind="options: $root.miiMenuItems, optionsText: 'miName', optionsValue: 'miID', value: $data.miiMenuItemID" style="width:100%"></select></td>
            <td><select data-bind="options: $root.miiProductTypes, optionsText: function(item) { return $root.getMIIProductTypeByID(item.ptID()); }, optionsValue: 'ptID', value: $data.miiProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: miiQuantity"></td>
            <td><select data-bind="options: $root.miiUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.miiSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.miiSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.miiCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="MenuItemPricesPage" type="text/html">
        <div>
            <h2>Menu Item Prices</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.mipCheckIfCanAdd, click: $root.mipAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Menu Item Price</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Menu Item</th>
                        <th>Price</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: mipTemplateToUse, foreach: mipPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: mipPageIndex() === 0 }">
                    <a href="#" data-bind="click: mipPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: mipAllPages">
                <li data-bind="css: { active: $data.mipPageNumber === ($root.mipPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.mipPageNumber, click: function () { $root.mipMoveToPage($data.mipPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: mipPageIndex() === mipMaxPageIndex() }">
                    <a href="#" data-bind="click: mipNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="mipShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: mipID"></td>
            <td data-bind="text: $root.getMIPMenuItemByID($data.mipMenuItemID())"></td>
            <td data-bind="text: mipPrice"></td>
            <td data-bind="text: (new Date(mipStartDate()).getMonth() + 1) + '/' + (new Date(mipStartDate())).getDate() + '/' + (new Date(mipStartDate())).getFullYear()"></td>
            <td data-bind="text: (new Date(mipEndDate()).getMonth() + 1) + '/' + (new Date(mipEndDate())).getDate() + '/' + (new Date(mipEndDate())).getFullYear()"></td>
            <td data-bind="text: $root.getBusinessName($data.mipSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: mipCheckIfEditable, click: $root.mipEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: mipCheckIfDeletable, click: $root.mipRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="mipEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: mipID" />
            <td><select data-bind="options: $root.mipMenuItems, optionsText: 'miName', optionsValue: 'miID', value: $data.mipMenuItemID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: mipPrice"></td>
            <td><input class="txtboxStyle" data-bind="value: mipStartDate" type="date"></td>
            <td><input class="txtboxStyle" data-bind="value: mipEndDate" type="date"></td>
            <td><select data-bind="options: $root.mipUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.mipSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.mipSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.mipCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="mipAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><select data-bind="options: $root.mipMenuItems, optionsText: 'miName', optionsValue: 'miID', value: $data.mipMenuItemID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: mipPrice"></td>
            <td><input class="txtboxStyle" data-bind="value: mipStartDate" type="date"></td>
            <td><input class="txtboxStyle" data-bind="value: mipEndDate" type="date"></td>
            <td><select data-bind="options: $root.mipUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.mipSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.mipSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.mipCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="RequisitionsPage" type="text/html">
        <div>
            <h2>Requisitions</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.reqCheckIfCanAdd, click: $root.reqAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Requisition</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Product Type</th>
                        <th>Quantity</th>
                        <th>Authorized</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: reqTemplateToUse, foreach: reqPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: reqPageIndex() === 0 }">
                    <a href="#" data-bind="click: reqPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: reqAllPages">
                <li data-bind="css: { active: $data.reqPageNumber === ($root.reqPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.reqPageNumber, click: function () { $root.reqMoveToPage($data.reqPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: reqPageIndex() === reqMaxPageIndex() }">
                    <a href="#" data-bind="click: reqNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="reqShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: reqID"></td>
            <td data-bind="text: $root.getReqProductTypeByID($data.reqProductTypeID())"></td>
            <td data-bind="text: reqQuantity"></td>
            <td data-bind="text: reqAuthorized"></td>
            <td data-bind="text: $root.getBusinessName($data.reqSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: reqCheckIfEditable, click: $root.reqEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: reqCheckIfDeletable, click: $root.reqRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="reqEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: reqID" />
            <td><select data-bind="options: $root.reqProductTypes, optionsText: 'ptName', optionsValue: 'ptID', value: $data.reqProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: reqQuantity"></td>
            <td><input type="checkbox" class="txtboxStyle" data-bind="checked: reqAuthorized"></td>
            <td><select data-bind="options: $root.reqUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.reqSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.reqSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.reqCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="reqAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><select data-bind="options: $root.reqProductTypes, optionsText: 'ptName', optionsValue: 'ptID', value: $data.reqProductTypeID" style="width:100%"></select></td>
            <td><input class="txtboxStyle" data-bind="value: reqQuantity"></td>
            <td><input type="checkbox" class="txtboxStyle" data-bind="checked: reqAuthorized"></td>
            <td><select data-bind="options: $root.reqUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.reqSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.reqSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.reqCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="SettlementTypesPage" type="text/html">
        <div>
            <h2>Settlement Types</h2>
            <p>
                <a class="btn btn-primary" data-bind="visible: $root.stCheckIfCanAdd, click: $root.stAdd" href="#" title="add"><i class="glyphicon glyphicon-plus"></i>Add Settlement Type</a>
            </p>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Description</th>
                        <th>Restaurant Name</th>
                        <th style="width: 100px; text-align: right;" />
                    </tr>
                </thead>
                <tbody data-bind="template: { name: stTemplateToUse, foreach: stPagedList }"></tbody>
            </table>
            <ul class="pagination">
                <li data-bind="css: { disabled: stPageIndex() === 0 }">
                    <a href="#" data-bind="click: stPreviousPage">Previous</a>
                </li>
            </ul>
            <ul class="pagination" data-bind="foreach: stAllPages">
                <li data-bind="css: { active: $data.stPageNumber === ($root.stPageIndex() + 1) }">
                    <a href="#" data-bind="text: $data.stPageNumber, click: function () { $root.stMoveToPage($data.stPageNumber - 1); }"></a>
                </li>

            </ul>
            <ul class="pagination">
                <li data-bind="css: { disabled: stPageIndex() === stMaxPageIndex() }">
                    <a href="#" data-bind="click: stNextPage">Next</a>
                </li>
            </ul>
        </div>
    </script>
    <script id="stShowTemplate" type="text/html">
        <tr>
            <td data-bind="text: stID"></td>
            <td data-bind="text: stDescription"></td>
            <td data-bind="text: $root.getBusinessName($data.stSiteID).SiteName"></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="visible: stCheckIfEditable, click: $root.stEdit" href="#" title="edit"><i class="glyphicon glyphicon-edit"></i></a>
                <a class="btn btn-danger" data-bind="visible: stCheckIfDeletable, click: $root.stRemove" href="#" title="remove"><i class="glyphicon glyphicon-remove"></i></a>
            </td>
        </tr>
    </script>
    <script id="stEditTemplate" type="text/html">
        <tr>
            <td data-bind="text: stID" />
            <td><input class="txtboxStyle" data-bind="value: stDescription"></td>
            <td><select data-bind="options: $root.stUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.stSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.stSaveEdit" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.stCancelEdit" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>
    <script id="stAddTemplate" type="text/html">
        <tr>
            <td></td>
            <td><input class="txtboxStyle" data-bind="value: stDescription"></td>
            <td><select data-bind="options: $root.stUserSites, optionsText: 'SiteName', optionsValue: 'SiteID', value: $data.stSiteID" style="width:100%"></select></td>
            <td>
                <a class="btn btn-success" data-bind="click: $root.stSaveAdd" href="#" title="save"><i class="glyphicon glyphicon-ok"></i></a>
                <a class="btn btn-danger" data-bind="click: $root.stCancelAdd" href="#" title="cancel"><i class="glyphicon glyphicon-trash"></i></a>
            </td>
        </tr>
    </script>

    <script id="LicensePage" type="text/html">
        <pre>
            Akshay Srinivasan's General Terms of Use
These terms govern your use of my website or services such as the Epic Restaurant Manager (collectively, “Services”) and software that I include as part of the Services, including any applications, Content Files (defined below), scripts, instruction sets, and any related documentation (collectively “Software”). By using the Services or Software, you agree to these terms. If you have entered into another agreement with us concerning specific Services or Software, then the terms of that agreement controls where it conflicts with these terms. As discussed more in Section 3 below, you retain all rights and ownership you have in your content that you make available through the Services.
1. How this Agreement Works.
1.1 Choice of Law. If you reside in India, your relationship is with Akshay Srinivasan, and the Services and Software are governed by the law of India. If you reside outside of India, your relationship is with Akshay Srinivasan, and the Services and Software are governed by the federal law of the United States of America. You may have additional rights under the law. I do not seek to limit those rights to the extent prohibited by law.
1.2 Eligibility. You may only use the Services if you are (a) over 13 years old and (b) allowed by law to enter into a binding contract.
1.3 Privacy. By using the Services or Software you agree to surrender all information collected on the website (Epic Restaurant Manager) to Akshay Srinivasan.
1.4 Availability. Pages describing the Services are accessible worldwide but this does not mean all Services or service features are available in your country, or that user-generated content available via the Services is legal in your country. I may block access to certain Services (or certain service features or content) in certain countries. It is your responsibility to make sure your use of the Services is legal where you use them. Services are not available in all languages.
 
1.5 Additional Terms. Some Services or Software are also subject to the additional terms below (the “Additional Terms”). Any content that I provide to you (such as Software, SDK, samples, etc.) are licensed, not sold, to you, and may be subject to Additional Terms. New Additional Terms may be added from time to time.
1.6 Order of Precedence. If there is any conflict between the terms in this Agreement and the Additional Terms, then the Additional Terms govern in relation to that Service or Software.
1.7 Modification. I may modify, update, or discontinue the Services, Software (including any of their portions or features) at any time without liability to you or anyone else. However, I will make reasonable effort to notify you before I make the change. I will also allow you a reasonable time to download your content. If I discontinue a Service in its entirety, then I will provide you with a pro rata refund for any unused fees for that Service that you may have prepaid.
2. Use of Service.
2.1 License. Subject to your compliance with these terms and the law, you may access and use the Services.
2.2 Akshay Srinivasan's Intellectual Property. I remain the sole owner of all right, title, and interest in the Services and Software. I reserve all rights not granted under these terms.
 2.3 Storage. When the Services provide storage, I recommend that you continue to back up your content regularly. I may create reasonable technical limits on your content, such as limits on file size, storage space, processing capacity, and other technical limits. I may suspend the Services until you are within the storage space limit associated with your account.
 2.4 User-Generated Content. I may host user-generated content from our users. If you access our Services, you may come across content that you find offensive or upsetting. Your sole remedy is to simply stop viewing the content. If available, you may also click on the “Report” button to report the content to us.
 2.5 Content Files. “Content Files” means Akshay Srinivasan-provided sample files such as stock images or sounds. Unless the documentation or specific license associated with the Content Files state otherwise, you may use, display, modify, reproduce, and distribute any of the Content Files. However, you may not distribute the Content Files on a stand-alone basis (i.e., in circumstances in which the Content Files constitute the primary value of the product being distributed), and you must not claim any trademark rights in the Content Files or derivative works of the Content Files.
 2.6 Other License Types.
 (a) NFR Version. I may designate the Software or Services as “trial”, “evaluation”, “not for resale”, or other similar designation (“NFR Version”). You may install and use the NFR Version only during the period and only for the purposes that I have stated when I provide the NFR Version. You must not use any materials you produce with the NFR Version for anything other than non-commercial purposes.
 (b) Pre-release Version. I may designate the Software or Services as a pre-release or beta version (“Pre-release Version”). Pre-release Version does not represent the final product and may contain bugs that may cause system or other failure and data loss. I may choose not to commercially release the Pre-release Version. You must promptly cease using the Pre-release Version and destroy all copies of Pre-release Version if I request you to do so, or if I release a commercial version of the Pre-release Version. Any separate agreement I enter into with you governing the Pre-release Version will supersede the provisions on Pre-Release Version set out in this section.
 (c) Education Version. If I designate the Software or Service as for use by educational users (“Educational Version”), then you may only use the Educational Version if you meet the eligibility requirements stated at http://www.adobe.com/go/edu_purchasing. You may install and use Educational Version only in the country where you are qualified as an educational user. If you reside in the European Economic Area, then the word “country” in the sentence preceding this one means the European Economic Area.
 3. Your Content.
 3.1 Ownership. You retain all rights and ownership of your content. I do not claim any ownership rights to your content.
 3.2 Licenses to Your Content in Order to Operate the Services. I require certain licenses from you to your content to operate and enable the Services. When you upload content to the Services, you grant us a non-exclusive, worldwide, royalty-free, sub-licensable, and transferrable license to use, reproduce, publicly display, distribute, modify (so as to better showcase your content, for example), publicly perform, and translate the content as needed in response to user driven actions (such as when you choose to store privately or share your content with others). This license is only for the purpose of operating or improving the Services.
 3.3 Our Access. I will not access, view, or listen to any of your content, except as reasonably necessary to perform the Services. Actions reasonably necessary to perform the Services may include (but are not limited to) (a) responding to support requests; (b) detecting, preventing, or otherwise addressing fraud, security, unlawful, or technical issues; and (c) enforcing these terms.
 3.4 Sharing Your Content.
 (a) Sharing. Some Services may provide features that allow you to Share your content with other users or to make it public. “Share” means to email, post, transmit, upload, or otherwise make available (whether to us or other users) through your use of the Services. Other users may use, copy, modify, or re-share your content in many ways. Please consider carefully what you choose to Share or make public as you are entirely responsible for the content that you Share.
 (b) Level of Access. I do not monitor or control what others do with your content. You are responsible for determining the limitations that are placed on your content and for applying the appropriate level of access to your content. If you do not choose the access level to apply to your content, the system may default to its most permissive setting. It’s your responsibility to let other users know how your content may be shared and adjust the setting related to accessing or sharing of your content.
 (c) Comments. The Services may allow you to comment on content. Comments are not anonymous, and may be viewed by other users. Your comments may be deleted by you, other users, or us.
 3.5 Termination of License. You may revoke this license to your content and terminate our rights at any time by removing your content from the Service. However, some copies of your content may be retained as part of our routine backups.
 3.6 Feedback. You have no obligation to provide us with ideas, suggestions, or proposals (“Feedback”). However, if you submit Feedback to us, then you grant us a non-exclusive, worldwide, royalty-free license that is sub-licensable and transferrable, to make, use, sell, have made, offer to sell, import, reproduce, publicly display, distribute, modify, and publicly perform the Feedback.
 3.7 Selling Your Content. I may allow you to license your content to other users through our Services. If available, you may choose to license your content through us under a separate agreement or directly to other users under an agreement between you and the buyer.
 4. Account Information.
 You are responsible for all activity that occurs via your account. Please notify Customer Support immediately if you become aware of any unauthorized use of your account. You may not (a) Share your account information (except with an authorized account administrator) or (b) use another person’s account. Your account administrator may use your account information to manage your use and access to the Services.
 5. User Conduct.
 5.1 Responsible Use. The Akshay Srinivasan's site Epic Restaurant Manager's communities often consist of users who expect a certain degree of courtesy and professionalism. You must use the Services responsibly.
 5.2 Misuse. You must not misuse the Services, Software, or content that I provide to you as part of the Services. For example, you must not:
 (a) copy, modify, host, stream, sublicense, or resell the Services, Software, or content;
 (b) enable or allow others to use the Service, Software, or content using your account information;
 (c) use the content or Software included in the Services to construct any kind of database;
 (d) access or attempt to access the Services by any means other than the interface I provided or authorized;
 (e) circumvent any access or use restrictions put into place to prevent certain uses of the Services;
 (f) share content or engage in behavior that violates anyone’s Intellectual Property Right (“Intellectual Property Rights” means copyright, moral rights, trademark, trade dress, patent, trade secret, unfair competition, right of privacy, right of publicity, and any other proprietary rights.);
 (g) upload or share any content that is unlawful, harmful, threatening, abusive, tortious, defamatory, libelous, vulgar, lewd, profane, invasive of another’s privacy, or hateful;
 (h) impersonate any person or entity, or falsely state or otherwise misrepresent your affiliation with a person or entity;
 (i) attempt to disable, impair, or destroy the Services, software, or hardware;
 (j) disrupt, interfere with, or inhibit any other user from using the Services (such as stalking, intimidating, or harassing others, inciting others to commit violence, or harming minors in any way),
 (k) engage in chain letters, junk mails, pyramid schemes, spamming, or other unsolicited messages;
 (l) place advertisement of any products or services in the Services;
 (m) use any data mining or similar data gathering and extraction methods in connection with the Services; or
 (n) violate applicable law.
 6. Fees and Payment.
 6.1 Taxes and Third-Party Fees. You must pay any applicable taxes, and any applicable third-party fee (including, for example telephone toll charges, mobile carrier fees, ISP charges, data plan charges, credit card fees, foreign exchange fees). I are not responsible for these fees. I may take steps to collect the fees you owe us. You are responsible for all related collection costs and expenses.
 6.2 Credit Card Information. If you do not notify us of updates to your payment method, to avoid interruption of your service, I may participate in programs supported by your card provider to try to update your payment information, and you authorize us to continue billing your account with the updated information that I obtain.
 7. Your Warranty and Indemnification Obligations.
 7.1 Warranty. By uploading your content to the Services, you agree that you have: (a) all necessary licenses and permissions, to use and Share your content and (b) the rights necessary to grant the licenses in these terms.
 7.2 Indemnification. You will indemnify us and our subsidiaries, affiliates, officers, agents, employees, partners, and licensors from any claim, demand, loss, or damages, including reasonable attorneys’ fees, arising out of or related to your content, your use of the Services or Software, or your violation of these terms.
 8. Disclaimers of Warranties.
 8.1 Unless stated in the Additional Terms, the Services and Software are provided “AS-IS.” To the maximum extent permitted by law, I disclaim all warranties express or implied, including the implied warranties of non-infringement, merchantability, and fitness for a particular purpose. I make no commitments about the content within the Services. I further disclaim any warranty that (a) the Services or Software will meet your requirements or will be constantly available, uninterrupted, timely, secure, or error-free; (b) the results that may be obtained from the use of the Services or Software will be effective, accurate, or reliable; (c) the quality of the Services or Software will meet your expectations; or that (d) any errors or defects in the Services or Software will be corrected.
 8.2 I specifically disclaim any liability for any actions resulting from your use of any Services or Software. You may use and access the Services or Software at your own discretion and risk, and you are solely responsible for any damage to your computer system or loss of data that results from the use and access of any Service or Software.
 9. Limitation of Liability.
 9.1 Unless stated in the Additional Terms, I are not liable to you or anyone else for: (a) any loss of use, data, goodwill, or profits, whether or not foreseeable; and (b) any special, incidental, indirect, consequential, or punitive damages whatsoever (even if I have been advised of the possibility of these damages), including those (x) resulting from loss of use, data, or profits, whether or not foreseeable, (y)based on any theory of liability, including breach of contract or warranty, negligence or other tortious action, or (z) arising from any other claim arising out of or in connection with your use of or access to the Services or Software. Nothing in these terms limits or excludes our liability for gross negligence, for our (or our employees’) intentional misconduct, or for death or personal injury.
 9.2 Our total liability in any matter arising out of or related to these terms is limited to US $100 or the aggregate amount that you paid for access to the Service and Software during the three-month period preceding the event giving rise to the liability, whichever is larger. This limitation will apply even if I have been advised of the possibility of the liability exceeding the amount and notwithstanding any failure of essential purpose of any limited remedy.
 9.3 The limitations and exclusions in this Section 9 apply to the maximum extent permitted by law.
 10. Termination.
 10.1 Termination by You. You may stop using the Services at any time. Termination of your account does not relieve you of any obligation to pay any outstanding fees.
 10.2 Termination by Us. If I terminate these terms for reasons other than for cause, then I will make reasonable effort to notify you at least 30 days prior to termination via the email address you provide to us with instructions on how to retrieve your content. Unless stated in Additional Terms, I may at any time terminate these terms (and your access to Services or Software) with you if:
 (a) you breach any provision of these terms (or act in a manner that clearly shows you do not intend to, or are unable to, comply with these terms);
 (b) you fail to make the timely payment of fees for the Software or the Services, if any;
 (c) I are required to do so by law (for example, where the provision of the Services or Software to you is, or becomes, unlawful);
 (d) I elect to discontinue the Services or Software, in whole or in part, (such as if it becomes impractical for us to continue offering Services in your region due to change of law); or
 (e) there has been an extended period of inactivity in your free account
 10.3 Termination by Group Administrator. Group administrators for a Service such as “Creative Cloud for team” may terminate a user’s access to a Service at any time. If your group administrator terminates your access, then you may no longer be able to access content that you or other users of the group have shared on a shared workspace within that Service.
 10.4 Survival. Upon expiration or termination of these terms, any perpetual licenses you have granted, your indemnification obligations, our warranty disclaimers or limitations of liabilities, and dispute resolution provisions stated in these terms will survive. Upon the expiration or termination of the Services, some or all of the Software may cease to operate without prior notice.
 11. Investigations.
 11.1 Screening. I do not review all content uploaded to the Services, but I may use available technologies or processes to screen for certain types of illegal content (for example, child pornography) or other abusive content or behavior (for example, patterns of activity that indicate spam or phishing, or keywords that indicate adult content has been posted outside of the adult wall).
 11.2 Disclosure. I may access or disclose information about you, or your use of the Services, (a) when it is required by law (such as when I receive a valid subpoena or search warrant); (b) to respond to your requests for customer service support; or (c) when I, in our discretion, think it is necessary to protect the rights, property, or personal safety of us, our users, or the public.
 12. Export Control Laws.
 The Software, Services, content, and your use of the Software, Services, and content, are subject to U.S. and international laws, restrictions, and regulations that may govern the import, export, and use of the Software, Services, and content. You agree to comply with all the laws, restrictions, and regulations.
 13. Dispute Resolution.
 13.1 Process. For any concern or dispute you may have, you agree to first try to resolve the dispute informally by contacting us. If a dispute is not resolved within 30 days of submission, you or Akshay Srinivasan must resolve any claims relating to these terms, the Services, or the Software through final and binding arbitration, except that you may assert claims in small claims court if your claims qualify.
 13.2 Rules. If you reside in the Americas, JAMS will administrate the arbitration in Santa Clara County, California pursuant to its Comprehensive Arbitration Rules and Procedures. If you reside in Australia, New Zealand, Japan, mainland China, Hong Kong S.A.R., Macau S.A.R., Taiwan R.O.C., the Republic of Korea, India, Sri Lanka, Bangladesh, Nepal, or a member state of the Association of Southeast Asian Nations (ASEAN), then the Singapore International Arbitration Centre (SIAC) will administer the arbitration in Singapore under its Rules of Arbitration, which rules are deemed to be incorporated by reference in this section. Otherwise, the London Court of International Arbitration (LCIA) will administer the arbitration in London under the LCIA Arbitration Rules. There will be one arbitrator that you and Akshay Srinivasan both select. The arbitration will be conducted in the English language, but any witness whose native language is not English may give testimony in the witness’ native language, with simultaneous translation into English (at the expense of the party presenting the witness). Judgment upon the award rendered may be entered and will be enforceable in any court of competent jurisdiction having jurisdiction over the parties.
 13.3 No Class Actions. You may only resolve disputes with us on an individual basis, and may not bring a claim as a plaintiff or a class member in a class, consolidated, or representative action.
 13.4 Injunctive Relief. Notwithstanding the foregoing, in the event of your or others’ unauthorized access to or use of the Services or content in violation of these terms you agree that I are entitled to apply for injunctive remedies (or an equivalent type of urgent legal relief) in any jurisdiction.
 14. Compliance with Licenses.
 If you are a business, company, or organization, then I may, no more than once every 12 months, upon seven 7 days’ prior notice to you, appoint our personnel or an independent third party auditor who is obliged to maintain confidentiality to inspect (including manual inspection, electronic methods, or both) your records, systems, and facilities to verify that your installation and use of any and all Software or Services is in conformity with its valid licenses from us. Additionally, you will provide us with all records and information requested by us in order to verify that its installation and use of any and all Software and Services is in conformity with your valid licenses from us within 30 days of our request. If the verification discloses a shortfall in licenses for the Software or Services, you will immediately acquire any necessary licenses, subscriptions, and any applicable back maintenance and support. If the underpaid fees exceed 5% of the value of the payable license fees, then you will also pay for our reasonable cost of conducting the verification.
 15. Modification.
 I may modify these terms or any additional terms that apply to a Service or Software to, for example, reflect changes to the law or changes to our Services or Software. You should look at the terms regularly. I will post notice of modifications to these terms on this page. I will post notice of modified additional terms in the applicable Service or Software. By continuing to use or access the Services or Software after the revisions come into effect, you agree to be bound by the revised terms. 
 16. Miscellaneous.
 16.1 English Version. The English version of these terms will be the version used when interpreting or construing these terms.
 16.2 Notice to Akshay Srinivasan. You may send the notices to us to at the following address: Akshay Srinivasan Systems, 5A, Maker Mahal, Perry Road, Bandra (W), Mumbai - 400050, India.
 16.3 Notice to You. I may notify you by email, postal mail, postings within the Services, or other legally acceptable means.
 16.4 Entire Agreement. These terms constitute the entire agreement between you and us regarding your use of the Services and Software and supersede any prior agreements between you and us relating to the Services.
 16.5 Non-Assignment. You may not assign or otherwise transfer these terms or your rights and obligations under these terms, in whole or in part, without our written consent and any such attempt will be void. I may transfer our rights under these terms to a third party.
 16.6 Severability. If a particular term is not enforceable, the unenforceability of that term will not affect any other terms.
 16.7 No Waiver. Our failure to enforce or exercise any of these terms is not a waiver of that section.
 17. DMCA.
 I respect the Intellectual Property Rights of others and I expect our users to do the same. I will respond to clear notices of copyright infringement consistent with the Digital Millennium Copyright Act (“DMCA”). You can learn more about Akshay Srinivasan's IP Takedown policies and practices here: http://www.adobe.com/legal/dmca.html.
 Akshay Srinivasan, 5A, Maker Mahal, Perry Road, Bandra (W), Mumbai - 400050 India
        </pre>
    </script>
</body>
</html>
